(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10160,e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.s(["default",()=>t])},58234,e=>{"use strict";var t=e.i(43476),r=e.i(22016),o=e.i(28540),a=e.i(85149);function s(){let e=new Date().getFullYear();return(0,t.jsx)("footer",{className:"bg-retro-navy border-t border-retro-grid safe-bottom safe-x",children:(0,t.jsx)(o.Container,{children:(0,t.jsxs)("div",{className:"py-8 sm:py-12",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8 mb-8 sm:mb-12",children:[(0,t.jsxs)("div",{className:"sm:col-span-2 lg:col-span-1",children:[(0,t.jsx)(r.default,{href:"/",className:"inline-block touch-target",children:(0,t.jsx)("span",{className:"font-display text-base sm:text-lg text-retro-pink",children:a.SITE_CONFIG.name})}),(0,t.jsx)("p",{className:"mt-3 sm:mt-4 text-sm text-gray-400 max-w-xs",children:a.SITE_CONFIG.description})]}),a.NAV_ITEMS.filter(e=>e.children).map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-ui text-xs sm:text-sm uppercase tracking-wider text-retro-cyan mb-3 sm:mb-4",children:e.label}),(0,t.jsx)("ul",{className:"space-y-1 sm:space-y-2",children:e.children?.map(e=>(0,t.jsx)("li",{children:(0,t.jsx)(r.default,{href:e.href,className:"inline-flex items-center min-h-[36px] sm:min-h-[32px] text-sm text-gray-400 hover:text-retro-pink transition-colors duration-200",children:e.label})},e.href))})]},e.label))]}),(0,t.jsxs)("div",{className:"pt-6 sm:pt-8 border-t border-retro-grid/50 flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,t.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500 text-center sm:text-left",children:["© ",e," ",a.SITE_CONFIG.name,". All rights reserved."]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("a",{href:a.SOCIAL_LINKS.github,target:"_blank",rel:"noopener noreferrer",className:"touch-target flex items-center justify-center text-gray-400 hover:text-retro-cyan transition-colors duration-200 rounded-md hover:bg-retro-purple/30","aria-label":"GitHub",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"})})}),(0,t.jsx)("a",{href:a.SOCIAL_LINKS.patreon,target:"_blank",rel:"noopener noreferrer",className:"touch-target flex items-center justify-center text-gray-400 hover:text-retro-pink transition-colors duration-200 rounded-md hover:bg-retro-purple/30","aria-label":"Patreon",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M15.386.524c-4.764 0-8.64 3.876-8.64 8.64 0 4.75 3.876 8.613 8.64 8.613 4.75 0 8.614-3.864 8.614-8.613C24 4.4 20.136.524 15.386.524M.003 23.537h4.22V.524H.003"})})})]})]})]})})})}e.s(["Footer",()=>s])},44254,e=>{"use strict";var t=e.i(71645),r=e.i(70273);function o(){let e=(0,t.useContext)(r.ToastContext);if(!e)throw Error("useToast must be used within a ToastProvider");return e}e.s(["useToast",()=>o])},53454,e=>{"use strict";var t=e.i(43476),r=e.i(71645),o=e.i(18566),a=e.i(22016),s=e.i(3374),i=e.i(58234),l=e.i(72547),n=e.i(21745);function c(e){return"type"in e&&"separator"===e.type}function d({actions:e,minVisibleItems:o=2,className:a="",sticky:s=!1}){let i=(0,r.useRef)(null),[d,h]=(0,r.useState)(new Set),u=(0,r.useCallback)(()=>{if(!i.current)return;let t=i.current.offsetWidth-32-48,r=e.filter(e=>!c(e)).map((t,r)=>({item:t,priority:t.priority??1,originalIndex:e.indexOf(t)})),a=[...r].sort((e,t)=>e.priority-t.priority),s=0;for(let t of e)s+=c(t)?16:48;let l=new Set,n=s,d=r.length;for(let{item:e}of a){if(n<=t||d<=o)break;l.add(e.id),n-=48,d--}h(l)},[e,o]);(0,r.useEffect)(()=>{u();let e=new ResizeObserver(()=>{u()});return i.current&&e.observe(i.current),()=>e.disconnect()},[u]);let x=[],m=[];for(let t of e)if(c(t)){let r=e.slice(e.indexOf(t)+1).some(e=>!c(e)&&!d.has(e.id)),o=e.slice(0,e.indexOf(t)).some(e=>!c(e)&&!d.has(e.id));r&&o&&x.push(t)}else d.has(t.id)?m.push(t):x.push(t);let p=m.map(e=>({id:e.id,label:e.label,icon:e.icon,onClick:e.onClick,disabled:e.disabled}));return(0,t.jsxs)("div",{ref:i,className:`
        flex items-center justify-between
        bg-retro-navy/80 backdrop-blur-sm
        border-b border-retro-grid/50
        px-2 sm:px-4
        ${s?"sticky top-[var(--header-height)] z-40":""}
        ${a}
      `,style:{minHeight:"var(--toolbar-height)"},children:[(0,t.jsx)("div",{className:"flex items-center gap-1 sm:gap-2 flex-nowrap overflow-hidden",children:x.map(e=>c(e)?(0,t.jsx)("div",{className:"h-6 w-px bg-retro-grid/50 mx-1","aria-hidden":"true"},e.id):(0,t.jsx)(n.Tooltip,{content:e.tooltip||e.label,shortcut:e.shortcut,position:"bottom",children:(0,t.jsx)("button",{onClick:e.onClick,disabled:e.disabled,"aria-label":e.label,className:`
                  touch-target flex items-center justify-center p-2 rounded-md
                  text-sm font-ui transition-colors flex-shrink-0
                  ${e.disabled?"text-gray-600 cursor-not-allowed":e.active?"text-retro-cyan bg-retro-purple/40":"text-gray-300 hover:text-retro-cyan hover:bg-retro-purple/30"}
                `,children:(0,t.jsx)("span",{className:"w-6 h-6 flex-shrink-0 [&>svg]:w-full [&>svg]:h-full",children:e.icon})})},e.id))}),p.length>0&&(0,t.jsx)(l.OverflowMenu,{items:p,align:"right",label:"More actions"})]})}function h({title:e,children:r,toolbar:o,showFooter:a=!1,fullHeight:l=!0,className:n=""}){return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col safe-top",children:[(0,t.jsx)(s.Header,{}),o&&o.length>0&&(0,t.jsx)(d,{actions:o,sticky:!0,className:"mt-[var(--header-height)]"}),(0,t.jsxs)("main",{className:`
          flex-1 bg-retro-dark
          ${!o?"mt-[var(--header-height)]":""}
          ${l?"tool-canvas overflow-hidden":""}
          ${n}
        `,children:[(0,t.jsx)("h1",{className:"sr-only",children:e}),r]}),a&&(0,t.jsx)(i.Footer,{})]})}function u({children:e,sidebar:r,sidebarPosition:o="left",sidebarWidth:a="280px",leftSidebar:s,leftSidebarWidth:i="220px",rightSidebar:l,rightSidebarWidth:n="80px",leftSidebarCollapsible:c=!0,rightSidebarCollapsible:d=!0,className:h=""}){let u=s??("left"===o?r:void 0),x=l??("right"===o?r:void 0),m=s?i:a,p=l?n:a;return u||x?(0,t.jsxs)("div",{className:"h-full flex flex-col lg:flex-row",children:[u&&(0,t.jsx)("aside",{className:`
            w-full lg:w-auto lg:flex-shrink-0
            ${c?"border-b lg:border-b-0":""}
            lg:border-r border-retro-grid/50
            bg-retro-navy/50
            overflow-y-auto
            ${c?"max-h-[30vh] lg:max-h-none":""}
          `,style:{"--sidebar-width":m},children:(0,t.jsx)("div",{className:"lg:w-[var(--sidebar-width)] h-full",children:u})}),(0,t.jsx)("div",{className:`
          flex-1 overflow-auto
          flex items-center justify-center
          ${h}
        `,children:e}),x&&(0,t.jsx)("aside",{className:`
            w-full lg:w-auto lg:flex-shrink-0
            ${d?"border-t lg:border-t-0":""}
            lg:border-l border-retro-grid/50
            bg-retro-navy/50
            overflow-y-auto
            ${d?"max-h-[30vh] lg:max-h-none":""}
          `,style:{"--sidebar-width":p},children:(0,t.jsx)("div",{className:"lg:w-[var(--sidebar-width)] h-full",children:x})})]}):(0,t.jsx)("div",{className:`h-full overflow-auto ${h}`,children:e})}e.i(3813);var x=e.i(60441),m=e.i(42187),p=e.i(87355),f=e.i(45835),g=e.i(43237),b=e.i(99401),v=e.i(16244),k=e.i(46628),j=e.i(78071),C=e.i(35052),y=e.i(55361),S=e.i(48026),w=e.i(64721),N=e.i(53444),L=e.i(1164),M=e.i(75052),I=e.i(28827),A=e.i(80364),W=e.i(26089);e.i(7259);var D=e.i(66811),z=e.i(54750),B=e.i(3573),R=e.i(69771),E=e.i(80184),O=e.i(83621);e.i(79086);var T=e.i(82906),F=e.i(38152),H=e.i(44254);function V(){let e=(0,o.useRouter)(),s=(0,o.useSearchParams)().get("id"),{getById:i,save:l,deleteSet:n}=(0,D.useCharacterLibrary)(),c=(0,H.useToast)(),[d,V]=(0,r.useState)(!0),[P,$]=(0,r.useState)(null),[U,G]=(0,r.useState)(!1),[_,K]=(0,r.useState)(null),Z=(0,O.useCharacterEditor)(_),[Y,J]=(0,r.useState)((0,T.getActiveColors)()),[q,Q]=(0,r.useState)(20),[X,ee]=(0,r.useState)(null),[et,er]=(0,r.useState)(!1),[eo,ea]=(0,r.useState)(!1),[es,ei]=(0,r.useState)(!1),[el,en]=(0,r.useState)(!1),[ec,ed]=(0,r.useState)(!1),[eh,eu]=(0,r.useState)(!1),[ex,em]=(0,r.useState)(""),[ep,ef]=(0,r.useState)(!1),[eg,eb]=(0,r.useState)(!1),[ev,ek]=(0,r.useState)(!1),[ej,eC]=(0,r.useState)(!1),[ey,eS]=(0,r.useState)(!1),[ew,eN]=(0,r.useState)(!1),[eL,eM]=(0,r.useState)(!1),[eI,eA]=(0,r.useState)(!1),[eW,eD]=(0,r.useState)(!1),[ez,eB]=(0,r.useState)(!1),[eR,eE]=(0,r.useState)(!1),[eO,eT]=(0,r.useState)(!1),{contextMenu:eF,showContextMenu:eH,hideContextMenu:eV}=(0,M.useContextMenu)(),eP=(0,z.useAutoSave)({characterSetId:s,characters:Z.characters,config:Z.config,selectedIndex:Z.selectedIndex,isDirty:Z.isDirty,enabled:!!_}),e$=(0,R.useSnapshots)({characterSetId:s,enabled:!!_}),eU=(0,E.useChangeLog)({maxEntries:100,enabled:!!_}),eG=(0,r.useCallback)(async e=>{let t=await e$.saveNewSnapshot(e,Z.characters,Z.config);return t&&c.success("Snapshot saved"),t},[e$,Z.characters,Z.config,c]),e_=(0,r.useCallback)(e=>{_&&(Z.reset({..._,characters:e}),c.info("Snapshot restored"))},[_,Z,c]);(0,r.useEffect)(()=>{!async function(){if(!s){$("No character set ID provided"),V(!1);return}try{let e=await i(s);e?(K(e),Z.reset(e)):$("Character set not found")}catch(e){$(e instanceof Error?e.message:"Failed to load character set")}finally{V(!1)}}()},[s]);let eK=(0,r.useCallback)(async()=>{if(_)try{G(!0);let e={metadata:{..._.metadata,updatedAt:Date.now()},config:Z.config,characters:Z.characters};await l(e),Z.markSaved(),K(e),eP.clearAutoSave(),c.success("Saved successfully")}catch(e){console.error("Failed to save:",e),c.error("Failed to save changes")}finally{G(!1)}},[_,Z,l,eP,c]),eZ=(0,r.useCallback)(()=>{Z.isDirty?confirm("You have unsaved changes. Are you sure you want to leave?")&&(eP.clearAutoSave(),e.push("/tools/character-rom-editor")):e.push("/tools/character-rom-editor")},[Z.isDirty,e,eP]),eY=(0,r.useCallback)(()=>{s&&e.push(`/tools/character-rom-editor/export?id=${s}`)},[s,e]),eJ=(0,r.useCallback)(()=>{ed(!0)},[]),eq=(0,r.useCallback)(()=>{_&&(Z.reset(_),c.info("Changes discarded")),ed(!1)},[_,Z,c]),eQ=(0,r.useCallback)((e,t,r)=>{Z.resizeCharacters(e,t,r)},[Z]),eX=(0,r.useCallback)(()=>{let e=eP.recover();if(e&&_)try{let t=(0,F.base64ToBinary)(e.binaryData),r=(0,F.parseCharacterRom)(t,e.config);Z.reset({..._,characters:r,config:e.config}),Z.setSelectedIndex(e.selectedIndex)}catch(e){console.error("Failed to recover:",e),eP.discard()}},[eP,_,Z]),e0=(0,r.useCallback)(async()=>{if(_&&ex.trim())try{ef(!0);let t={metadata:{..._.metadata,id:crypto.randomUUID(),name:ex.trim(),createdAt:Date.now(),updatedAt:Date.now(),isBuiltIn:!1},config:Z.config,characters:Z.characters};await l(t),eP.clearAutoSave(),c.success(`Saved as "${ex.trim()}"`),e.push(`/tools/character-rom-editor/edit?id=${t.metadata.id}`)}catch(e){console.error("Failed to save as:",e),c.error("Failed to save copy")}finally{ef(!1),eu(!1),em("")}},[_,ex,Z,l,eP,e,c]),e2=(0,r.useCallback)(async()=>{if(s)try{en(!0),await n(s),c.success("Character set deleted"),e.push("/tools/character-rom-editor")}catch(e){console.error("Failed to delete:",e),c.error("Failed to delete character set")}finally{en(!1),ei(!1)}},[s,n,e,c]),e1=(0,r.useCallback)(async e=>{if(_)try{let t={..._,metadata:{..._.metadata,...e,updatedAt:Date.now()}};await l(t),K(t),c.success("Info updated")}catch(e){console.error("Failed to update metadata:",e),c.error("Failed to update info")}},[_,l,c]),e4=(0,r.useCallback)(()=>{em(_?.metadata.name?`${_.metadata.name} (copy)`:""),eu(!0)},[_?.metadata.name]),e5=Z.characters.length,e3=(0,r.useCallback)(()=>{Z.selectedIndex>0&&Z.setSelectedIndex(Z.selectedIndex-1)},[Z]),e6=(0,r.useCallback)(()=>{Z.selectedIndex<e5-1&&Z.setSelectedIndex(Z.selectedIndex+1)},[Z,e5]),e8=(0,r.useCallback)(()=>{let e=Math.max(0,Z.selectedIndex-16);Z.setSelectedIndex(e)},[Z]),e7=(0,r.useCallback)(()=>{let e=Math.min(e5-1,Z.selectedIndex+16);Z.setSelectedIndex(e)},[Z,e5]),e9=(0,r.useCallback)(()=>{Z.setSelectedIndex(0)},[Z]),te=(0,r.useCallback)(()=>{Z.setSelectedIndex(e5-1)},[Z,e5]),tt=(0,r.useMemo)(()=>(0,B.createEditorShortcuts)({undo:Z.undo,redo:Z.redo,save:eK,rotateLeft:()=>Z.rotateSelected("left"),rotateRight:()=>Z.rotateSelected("right"),shiftUp:()=>Z.shiftSelected("up"),shiftDown:()=>Z.shiftSelected("down"),shiftLeft:()=>Z.shiftSelected("left"),shiftRight:()=>Z.shiftSelected("right"),invert:Z.invertSelected,flipHorizontal:Z.flipSelectedHorizontal,flipVertical:Z.flipSelectedVertical,selectAll:Z.selectAll,deleteSelected:Z.deleteSelected,addCharacter:Z.addCharacter,showHelp:()=>er(!0),navigatePrev:e3,navigateNext:e6,navigatePageUp:e8,navigatePageDown:e7,navigateFirst:e9,navigateLast:te,goToCharacter:()=>eM(!0),showAsciiMap:()=>eA(!0),showTextPreview:()=>eD(!0),showSnapshots:()=>eB(!0),exportSet:eY,importSet:()=>ek(!0),shareSet:()=>eT(!0),saveAs:e4,editMetadata:()=>ea(!0),resetChanges:eJ,showChangeLog:()=>eE(!0),reorderCharacters:()=>eS(!0)}),[Z,eK,eY,eJ,e4,e3,e6,e8,e7,e9,te]);(0,B.useKeyboardShortcuts)(tt,{enabled:!et});let tr=(0,r.useMemo)(()=>{if(!eF)return[];let e=eF.index,t=Z.batchSelection.size>0,r=t?Z.batchSelection.size+1:1;return[{label:"Edit",onClick:()=>Z.setSelectedIndex(e)},{label:"Copy From...",shortcut:"C",onClick:()=>eC(!0)},{label:"",onClick:()=>{},divider:!0},{label:"Invert",shortcut:"I",onClick:()=>Z.invertSelected()},{label:"Clear",onClick:()=>Z.clearSelected()},{label:"Fill",onClick:()=>Z.fillSelected()},{label:"",onClick:()=>{},divider:!0},{label:`Delete${t?` (${r})`:""}`,shortcut:"Del",onClick:()=>{Z.deleteSelected(),c.success(t?`${r} characters deleted`:"Character deleted")},danger:!0}]},[eF,Z,c]),to=[{id:"add-char",label:"Add Char",tooltip:"Add a new character to the set",shortcut:"Ctrl+N",icon:(0,t.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 17l3.5-10h3L17 17M8.5 13h7"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 4v4m-2-2h4"})]}),onClick:Z.addCharacter,priority:2},{id:"save",label:U?"Saving...":"Save Set",tooltip:"Save character set to browser storage",shortcut:"Ctrl+S",icon:(0,t.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10l4 4v12a2 2 0 01-2 2H7a2 2 0 01-2-2V5z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 3v5h8V3"}),(0,t.jsx)("rect",{x:"14",y:"3",width:"2",height:"5",rx:"0.5",fill:"currentColor",stroke:"none"}),(0,t.jsx)("rect",{x:"8",y:"12",width:"8",height:"6",rx:"1",strokeWidth:2})]}),onClick:eK,disabled:U||!Z.isDirty,active:Z.isDirty,priority:3},{id:"save-as",label:"Save Set As",tooltip:"Save as a new character set with a different name",shortcut:"Ctrl+Alt+S",icon:(0,t.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10l4 4v12a2 2 0 01-2 2H7a2 2 0 01-2-2V5z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 3v5h6V3"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M18 8v4m-2-2h4"}),(0,t.jsx)("rect",{x:"8",y:"12",width:"8",height:"6",rx:"1",strokeWidth:2})]}),onClick:e4,priority:1},{id:"delete",label:"Delete Set",tooltip:"Delete this character set from browser storage",icon:(0,t.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 3h4"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 6v14a2 2 0 002 2h8a2 2 0 002-2V6"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 10v8M14 10v8"})]}),onClick:()=>ei(!0),disabled:_?.metadata.isBuiltIn,priority:1},{type:"separator",id:"sep-1"},{id:"undo",label:"Undo",tooltip:"Undo last change",shortcut:"Ctrl+Z",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),onClick:Z.undo,disabled:!Z.canUndo,priority:3},{id:"redo",label:"Redo",tooltip:"Redo last undone change",shortcut:"Ctrl+Y",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6"})}),onClick:Z.redo,disabled:!Z.canRedo,priority:3},{id:"reset",label:"Reset Set",tooltip:"Discard all unsaved changes",shortcut:"Ctrl+Shift+R",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),onClick:eJ,disabled:!Z.isDirty,priority:2},{type:"separator",id:"sep-2"},{id:"edit-metadata",label:"Edit Info",tooltip:"Edit character set name and description",shortcut:"F2",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),onClick:()=>ea(!0),priority:3},{id:"resize",label:"Resize Set",tooltip:"Change character dimensions (width × height)",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),onClick:()=>eb(!0),priority:0},{id:"import",label:"Import Chars",tooltip:"Import characters from ROM file or image",shortcut:"Ctrl+I",icon:(0,t.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 20l2.5-7h3L16 20M9.25 16h5.5"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v8m0 0l-3-3m3 3l3-3"})]}),onClick:()=>ek(!0),priority:1},{id:"reorder",label:"Reorder",tooltip:"Drag and drop to reorder characters",shortcut:"O",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),onClick:()=>eS(!0),priority:0},{type:"separator",id:"sep-3"},{id:"export",label:"Export Set",tooltip:"Export character set as ROM binary file",shortcut:"E",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5v14a2 2 0 002 2h10a2 2 0 002-2V5M12 21V9m0 0l4 4m-4-4l-4 4"})}),onClick:eY,priority:1},{id:"share",label:"Share",tooltip:"Generate a shareable link to this character set",shortcut:"Ctrl+Shift+E",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),onClick:()=>eT(!0),priority:0},{type:"separator",id:"sep-4"},{id:"snapshots",label:`Snapshots (${e$.snapshots.length})`,tooltip:"Save and restore named versions of your work",shortcut:"Ctrl+Shift+S",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),onClick:()=>eB(!0),priority:1},{id:"changelog",label:`Log (${eU.count})`,tooltip:"View history of changes made this session",shortcut:"L",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),onClick:()=>eE(!0),priority:0},{type:"separator",id:"sep-5"},{id:"goto",label:"Go to",tooltip:"Jump to a specific character by index",shortcut:"G",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),onClick:()=>eM(!0),priority:0},{id:"ascii-map",label:"ASCII Map",tooltip:"View all characters in a grid with ASCII codes",shortcut:"M",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),onClick:()=>eA(!0),priority:0},{id:"text-preview",label:"Preview",tooltip:"Preview text rendered with this character set",shortcut:"T",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})}),onClick:()=>eD(!0),priority:0},{type:"separator",id:"sep-6"},{id:"help",label:"Help",tooltip:"View all keyboard shortcuts and help",shortcut:"?",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),onClick:()=>er(!0),priority:3}];if(d)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-retro-dark",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-2 border-retro-cyan border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Loading character set..."})]})});if(P)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-retro-dark",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 text-center",children:[(0,t.jsx)("svg",{className:"w-16 h-16 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,t.jsx)("h2",{className:"text-lg font-medium text-red-400",children:P}),(0,t.jsx)(a.default,{href:"/tools/character-rom-editor",className:"text-sm text-retro-cyan hover:text-retro-pink transition-colors",children:"Back to Library"})]})});let ta=Z.characters[Z.selectedIndex]||null,ts=Z.batchSelection.size>0;return(0,t.jsxs)(h,{title:_?.metadata.name||"Character Editor",toolbar:to,children:[(0,t.jsx)(p.EditorHeader,{characterSetName:_?.metadata.name||"Untitled",isDirty:Z.isDirty,characterIndex:Z.selectedIndex,totalCharacters:Z.characters.length,batchMode:ts,zoom:q,onZoomChange:Q,colors:Y,onColorsChange:J,onBack:eZ}),(0,t.jsx)(u,{leftSidebar:(0,t.jsx)(m.EditorSidebar,{characters:Z.characters,config:Z.config,selectedIndex:Z.selectedIndex,batchSelection:Z.batchSelection,onSelect:Z.toggleBatchSelection,onAddCharacter:Z.addCharacter,onDeleteSelected:Z.deleteSelected,onSelectAll:Z.selectAll,onSelectNone:()=>Z.toggleBatchSelection(Z.selectedIndex,!1),onContextMenu:eH,foregroundColor:Y.foreground,backgroundColor:Y.background}),leftSidebarWidth:"240px",rightSidebar:(0,t.jsx)(b.TransformToolbar,{character:ta,characterWidth:Z.config.width,characterHeight:Z.config.height,onShift:e=>Z.shiftSelected(e),onRotate:e=>Z.rotateSelected(e),onFlipHorizontal:Z.flipSelectedHorizontal,onFlipVertical:Z.flipSelectedVertical,onInvert:Z.invertSelected,onClear:Z.clearSelected,onFill:Z.fillSelected,onCenter:Z.centerSelected,onScale:()=>eN(!0),onDelete:Z.deleteSelected,onCopy:()=>eC(!0),disabled:!ta,className:"h-full"}),rightSidebarWidth:"120px",rightSidebarCollapsible:!1,children:(0,t.jsx)(x.EditorCanvas,{character:ta,config:Z.config,onPixelToggle:Z.toggleSelectedPixel,onPixelSet:Z.setSelectedPixel,getPixelState:Z.getSelectedPixelState,batchMode:ts,foregroundColor:Y.foreground,backgroundColor:Y.background,gridColor:Y.gridColor,zoom:q,minZoom:8,maxZoom:100,onZoomChange:Q,onPixelHover:(e,t)=>ee({x:t,y:e}),onPixelLeave:()=>ee(null)})}),(0,t.jsx)(f.EditorFooter,{hoverCoords:X}),eP.hasRecoveryData&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),(0,t.jsxs)("div",{className:"relative w-full max-w-md bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-white mb-2",children:"Recover Unsaved Changes?"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mb-4",children:"We found unsaved changes from a previous session. Would you like to recover them?"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 mb-6",children:["Last saved: ",eP.recoveryData&&new Date(eP.recoveryData.timestamp).toLocaleString()]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:eP.discard,className:"flex-1 px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Discard"}),(0,t.jsx)("button",{onClick:eX,className:"flex-1 px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors",children:"Recover"})]})]})]}),(0,t.jsx)(g.KeyboardShortcutsHelp,{isOpen:et,onClose:()=>er(!1),shortcuts:tt}),_&&(0,t.jsx)(v.MetadataEditModal,{isOpen:eo,onClose:()=>ea(!1),metadata:_.metadata,onSave:e1}),(0,t.jsx)(k.ResizeModal,{isOpen:eg,onClose:()=>eb(!1),currentWidth:Z.config.width,currentHeight:Z.config.height,onResize:eQ}),(0,t.jsx)(j.ImportCharactersModal,{isOpen:ev,onClose:()=>ek(!1),currentConfig:Z.config,onImport:Z.addCharacters}),(0,t.jsx)(C.CopyCharacterModal,{isOpen:ej,onClose:()=>eC(!1),characters:Z.characters,currentIndex:Z.selectedIndex,onCopy:e=>{[Z.selectedIndex,...Array.from(Z.batchSelection)].forEach(t=>{Z.copyCharacter(e,t)})}}),(0,t.jsx)(y.ReorderModal,{isOpen:ey,onClose:()=>eS(!1),characters:Z.characters,onReorder:Z.setCharacters}),(0,t.jsx)(S.ScaleModal,{isOpen:ew,onClose:()=>eN(!1),onScale:(e,t,r)=>{Z.scaleSelected(e,t,r),eN(!1)},characters:Z.characters,selectedIndices:Z.selectedIndices,config:Z.config,foregroundColor:Y.foreground,backgroundColor:Y.background}),(0,t.jsx)(w.GoToCharacterModal,{isOpen:eL,onClose:()=>eM(!1),totalCharacters:e5,currentIndex:Z.selectedIndex,onGoTo:e=>Z.setSelectedIndex(e)}),(0,t.jsx)(N.AsciiMapModal,{isOpen:eI,onClose:()=>eA(!1),characters:Z.characters,selectedIndex:Z.selectedIndex,onSelect:e=>Z.setSelectedIndex(e),foregroundColor:Y.foreground,backgroundColor:Y.background}),(0,t.jsx)(L.TextPreviewModal,{isOpen:eW,onClose:()=>eD(!1),characters:Z.characters,config:Z.config,colors:Y}),(0,t.jsx)(I.SnapshotsModal,{isOpen:ez,onClose:()=>eB(!1),snapshots:e$.snapshots,loading:e$.loading,isAtCapacity:e$.isAtCapacity,maxSnapshots:e$.maxSnapshots,currentCharacters:Z.characters,currentConfig:Z.config,foregroundColor:Y.foreground,backgroundColor:Y.background,onSave:eG,onRestore:e$.restore,onDelete:e$.remove,onRename:e$.rename,onRestoreApply:e_}),(0,t.jsx)(A.ChangeLogModal,{isOpen:eR,onClose:()=>eE(!1),entries:eU.entries,onClear:eU.clear,onExport:eU.exportAsText}),_&&(0,t.jsx)(W.ShareModal,{isOpen:eO,onClose:()=>eT(!1),name:_.metadata.name,description:_.metadata.description,characters:Z.characters,config:Z.config}),eF&&(0,t.jsx)(M.CharacterContextMenu,{x:eF.x,y:eF.y,items:tr,onClose:eV}),eh&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>eu(!1)}),(0,t.jsxs)("div",{className:"relative w-full max-w-md bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-white mb-4",children:"Save As"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"New name"}),(0,t.jsx)("input",{type:"text",value:ex,onChange:e=>em(e.target.value),placeholder:"Character set name",className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white placeholder-gray-500 focus:outline-none focus:border-retro-cyan",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&ex.trim()?e0():"Escape"===e.key&&eu(!1)}})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>eu(!1),className:"flex-1 px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:e0,disabled:!ex.trim()||ep,className:"flex-1 px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:ep?"Saving...":"Save"})]})]})]}),es&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>ei(!1)}),(0,t.jsxs)("div",{className:"relative w-full max-w-md bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-white mb-2",children:"Delete Character Set?"}),(0,t.jsxs)("p",{className:"text-sm text-gray-400 mb-4",children:['Are you sure you want to delete "',_?.metadata.name,'"? This action cannot be undone.']}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>ei(!1),className:"flex-1 px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:e2,disabled:el,className:"flex-1 px-4 py-2 text-sm bg-red-500/20 border border-red-500 rounded text-red-400 hover:bg-red-500/30 transition-colors disabled:opacity-50",children:el?"Deleting...":"Delete"})]})]})]}),ec&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>ed(!1)}),(0,t.jsxs)("div",{className:"relative w-full max-w-md bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-white mb-2",children:"Reset to Last Saved?"}),(0,t.jsxs)("p",{className:"text-sm text-gray-400 mb-4",children:['This will discard all unsaved changes and restore "',_?.metadata.name,'" to its last saved state. This action cannot be undone.']}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>ed(!1),className:"flex-1 px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:eq,className:"flex-1 px-4 py-2 text-sm bg-orange-500/20 border border-orange-500 rounded text-orange-400 hover:bg-orange-500/30 transition-colors",children:"Reset"})]})]})]})]})}e.s(["EditView",()=>V],53454)},42281,e=>{e.v(t=>Promise.all(["static/chunks/786e6f48876ae0dc.js"].map(t=>e.l(t))).then(()=>t(71801)))},48503,e=>{e.v(t=>Promise.all(["static/chunks/01095d914547b2b6.js"].map(t=>e.l(t))).then(()=>t(15833)))},70653,e=>{e.v(t=>Promise.all(["static/chunks/90fdd386fff6c4e1.js"].map(t=>e.l(t))).then(()=>t(24154)))},95111,e=>{e.v(t=>Promise.all(["static/chunks/cca5a266ceb00b0d.js"].map(t=>e.l(t))).then(()=>t(38201)))}]);