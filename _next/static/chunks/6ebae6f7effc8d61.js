(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},58234,e=>{"use strict";var t=e.i(43476),r=e.i(22016),a=e.i(28540),n=e.i(85149);function l(){let e=new Date().getFullYear();return(0,t.jsx)("footer",{className:"bg-retro-navy border-t border-retro-grid safe-bottom safe-x",children:(0,t.jsx)(a.Container,{children:(0,t.jsxs)("div",{className:"py-8 sm:py-12",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8 mb-8 sm:mb-12",children:[(0,t.jsxs)("div",{className:"sm:col-span-2 lg:col-span-1",children:[(0,t.jsx)(r.default,{href:"/",className:"inline-block touch-target",children:(0,t.jsx)("span",{className:"font-display text-base sm:text-lg text-retro-pink",children:n.SITE_CONFIG.name})}),(0,t.jsx)("p",{className:"mt-3 sm:mt-4 text-sm text-gray-400 max-w-xs",children:n.SITE_CONFIG.description})]}),n.NAV_ITEMS.filter(e=>e.children).map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-ui text-xs sm:text-sm uppercase tracking-wider text-retro-cyan mb-3 sm:mb-4",children:e.label}),(0,t.jsx)("ul",{className:"space-y-1 sm:space-y-2",children:e.children?.map(e=>(0,t.jsx)("li",{children:(0,t.jsx)(r.default,{href:e.href,className:"inline-flex items-center min-h-[36px] sm:min-h-[32px] text-sm text-gray-400 hover:text-retro-pink transition-colors duration-200",children:e.label})},e.href))})]},e.label))]}),(0,t.jsxs)("div",{className:"pt-6 sm:pt-8 border-t border-retro-grid/50 flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,t.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500 text-center sm:text-left",children:["Â© ",e," ",n.SITE_CONFIG.name,". All rights reserved."]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("a",{href:n.SOCIAL_LINKS.github,target:"_blank",rel:"noopener noreferrer",className:"touch-target flex items-center justify-center text-gray-400 hover:text-retro-cyan transition-colors duration-200 rounded-md hover:bg-retro-purple/30","aria-label":"GitHub",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"})})}),(0,t.jsx)("a",{href:n.SOCIAL_LINKS.patreon,target:"_blank",rel:"noopener noreferrer",className:"touch-target flex items-center justify-center text-gray-400 hover:text-retro-pink transition-colors duration-200 rounded-md hover:bg-retro-purple/30","aria-label":"Patreon",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M15.386.524c-4.764 0-8.64 3.876-8.64 8.64 0 4.75 3.876 8.613 8.64 8.613 4.75 0 8.614-3.864 8.614-8.613C24 4.4 20.136.524 15.386.524M.003 23.537h4.22V.524H.003"})})})]})]})]})})})}e.s(["Footer",()=>l])},16015,(e,t,r)=>{},98547,(e,t,r)=>{var a=e.i(47167);e.r(16015);var n=e.r(71645),l=n&&"object"==typeof n&&"default"in n?n:{default:n},s=void 0!==a.default&&a.default.env&&!0,i=function(e){return"[object String]"===Object.prototype.toString.call(e)},o=function(){function e(e){var t=void 0===e?{}:e,r=t.name,a=void 0===r?"stylesheet":r,n=t.optimizeForSpeed,l=void 0===n?s:n;c(i(a),"`name` must be a string"),this._name=a,this._deletedRulePlaceholder="#"+a+"-deleted-rule____{}",c("boolean"==typeof l,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=l,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var o="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=o?o.getAttribute("content"):null}var t,r=e.prototype;return r.setOptimizeForSpeed=function(e){c("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),c(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},r.isOptimizeForSpeed=function(){return this._optimizeForSpeed},r.inject=function(){var e=this;if(c(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(s||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},r.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},r.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},r.insertRule=function(e,t){if(c(i(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var r=this.getSheet();"number"!=typeof t&&(t=r.cssRules.length);try{r.insertRule(e,t)}catch(t){return s||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var a=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,a))}return this._rulesCount++},r.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var r="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(a){s||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}}else{var a=this._tags[e];c(a,"old rule at index `"+e+"` not found"),a.textContent=t}return e},r.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];c(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},r.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},r.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,r){return r?t=t.concat(Array.prototype.map.call(e.getSheetForTag(r).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},r.makeStyleTag=function(e,t,r){t&&c(i(t),"makeStyleTag accepts only strings as second parameter");var a=document.createElement("style");this._nonce&&a.setAttribute("nonce",this._nonce),a.type="text/css",a.setAttribute("data-"+e,""),t&&a.appendChild(document.createTextNode(t));var n=document.head||document.getElementsByTagName("head")[0];return r?n.insertBefore(a,r):n.appendChild(a),a},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(e.prototype,t),e}();function c(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},u={};function h(e,t){if(!t)return"jsx-"+e;var r=String(t),a=e+r;return u[a]||(u[a]="jsx-"+d(e+"-"+r)),u[a]}function m(e,t){"undefined"==typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var r=e+t;return u[r]||(u[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),u[r]}var f=function(){function e(e){var t=void 0===e?{}:e,r=t.styleSheet,a=void 0===r?null:r,n=t.optimizeForSpeed,l=void 0!==n&&n;this._sheet=a||new o({name:"styled-jsx",optimizeForSpeed:l}),this._sheet.inject(),a&&"boolean"==typeof l&&(this._sheet.setOptimizeForSpeed(l),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var r=this.getIdAndRules(e),a=r.styleId,n=r.rules;if(a in this._instancesCounts){this._instancesCounts[a]+=1;return}var l=n.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[a]=l,this._instancesCounts[a]=1},t.remove=function(e){var t=this,r=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(r in this._instancesCounts,"styleId: `"+r+"` not found"),this._instancesCounts[r]-=1,this._instancesCounts[r]<1){var a=this._fromServer&&this._fromServer[r];a?(a.parentNode.removeChild(a),delete this._fromServer[r]):(this._indices[r].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[r]),delete this._instancesCounts[r]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],r=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return r[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,r;return t=this.cssRules(),void 0===(r=e)&&(r={}),t.map(function(e){var t=e[0],a=e[1];return l.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:r.nonce?r.nonce:void 0,dangerouslySetInnerHTML:{__html:a}})})},t.getIdAndRules=function(e){var t=e.children,r=e.dynamic,a=e.id;if(r){var n=h(a,r);return{styleId:n,rules:Array.isArray(t)?t.map(function(e){return m(n,e)}):[m(n,t)]}}return{styleId:h(a),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),x=n.createContext(null);function p(){return new f}function g(){return n.useContext(x)}x.displayName="StyleSheetContext";var b=l.default.useInsertionEffect||l.default.useLayoutEffect,X="undefined"!=typeof window?p():void 0;function y(e){var t=X||g();return t&&("undefined"==typeof window?t.add(e):b(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}y.dynamic=function(e){return e.map(function(e){return h(e[0],e[1])}).join(" ")},r.StyleRegistry=function(e){var t=e.registry,r=e.children,a=n.useContext(x),s=n.useState(function(){return a||t||p()})[0];return l.default.createElement(x.Provider,{value:s},r)},r.createStyleRegistry=p,r.style=y,r.useStyleRegistry=g},37902,(e,t,r)=>{t.exports=e.r(98547).style},89043,49738,32267,29493,e=>{"use strict";var t=e.i(43476),r=e.i(71645);function a({pixels:e,scale:a=1,showGrid:n=!1,gridColor:l="#333333",gridThickness:s=1,foregroundColor:i="#ffffff",backgroundColor:o="#000000",onPixelClick:c,onPixelDrag:d,onDragEnd:u,className:h="",interactive:m=!0,mixedPixels:f,mixedColor:x="#666666"}){let p=(0,r.useRef)(null),[g,b]=(0,r.useState)(!1),X=(0,r.useRef)(null),y=e.length,v=e[0]?.length||0,w=n?s:0,j=v*a+(n?(v+1)*s:0),C=y*a+(n?(y+1)*s:0);(0,r.useEffect)(()=>{let t=p.current;if(!t)return;let r=t.getContext("2d");if(r){r.fillStyle=n?l:o,r.fillRect(0,0,j,C);for(let t=0;t<y;t++)for(let l=0;l<v;l++){let c=n?l*(a+s)+s:l*a,d=n?t*(a+s)+s:t*a,u=`${t},${l}`,h=f?.has(u),m=e[t]?.[l]||!1;if(h){let e=Math.floor(a/2);r.fillStyle=i,r.fillRect(c,d,e,e),r.fillRect(c+e,d+e,a-e,a-e),r.fillStyle=o,r.fillRect(c+e,d,a-e,e),r.fillRect(c,d+e,e,a-e)}else r.fillStyle=m?i:o,r.fillRect(c,d,a,a)}}},[e,a,n,l,s,i,o,j,C,v,y,f,x]);let k=(0,r.useCallback)(e=>{let t,r,l=p.current;if(!l)return null;let i=l.getBoundingClientRect();if("touches"in e){if(0===e.touches.length)return null;t=e.touches[0].clientX,r=e.touches[0].clientY}else t=e.clientX,r=e.clientY;let o=t-i.left,c=r-i.top,d=l.width/i.width,u=l.height/i.height,h=a+(n?s:0),m=Math.floor((o*d-w)/h),f=Math.floor((c*u-w)/h);return f>=0&&f<y&&m>=0&&m<v?{row:f,col:m}:null},[a,n,s,w,y,v]),N=(0,r.useCallback)(e=>{if(!m)return;let t=k(e);t&&c&&(c(t.row,t.col),X.current=t,b(!0))},[m,k,c]),S=(0,r.useCallback)(e=>{if(!m||!g||!d)return;let t=k(e);t&&(!X.current||X.current.row!==t.row||X.current.col!==t.col)&&(d(t.row,t.col),X.current=t)},[m,g,k,d]),M=(0,r.useCallback)(()=>{g&&(b(!1),X.current=null,u?.())},[g,u]),E=(0,r.useCallback)(()=>{g&&(b(!1),X.current=null,u?.())},[g,u]),R=(0,r.useCallback)(e=>{if(!m)return;e.preventDefault();let t=k(e);t&&c&&(c(t.row,t.col),X.current=t,b(!0))},[m,k,c]),L=(0,r.useCallback)(e=>{if(!m||!g||!d)return;e.preventDefault();let t=k(e);t&&(!X.current||X.current.row!==t.row||X.current.col!==t.col)&&(d(t.row,t.col),X.current=t)},[m,g,k,d]),A=(0,r.useCallback)(()=>{g&&(b(!1),X.current=null,u?.())},[g,u]);return(0,t.jsx)("canvas",{ref:p,width:j,height:C,className:`${m?"cursor-crosshair":""} ${h}`,style:{imageRendering:"pixelated",touchAction:"none"},onMouseDown:N,onMouseMove:S,onMouseUp:M,onMouseLeave:E,onTouchStart:R,onTouchMove:L,onTouchEnd:A})}function n({character:e,mode:n="small",scale:l=20,smallScale:s=2,selected:i=!1,batchSelected:o=!1,onClick:c,onPixelClick:d,onPixelDrag:u,onDragEnd:h,foregroundColor:m="#ffffff",backgroundColor:f="#000000",gridColor:x="#333333",gridThickness:p=1,interactive:g=!0,className:b="",mixedPixels:X,index:y,showIndex:v=!1}){let w="large"===n,j=w?l:s,C=["relative inline-block",!w&&g?"cursor-pointer":"",!w&&g?"hover:opacity-80 transition-opacity":"",(0,r.useMemo)(()=>i?"ring-2 ring-retro-cyan ring-offset-2 ring-offset-retro-dark":o?"ring-2 ring-retro-pink/50 ring-offset-1 ring-offset-retro-dark":"",[i,o]),b].filter(Boolean).join(" ");return(0,t.jsxs)("div",{className:C,onClick:e=>{c&&!w&&(e.stopPropagation(),c())},onKeyDown:e=>{c&&!w&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),c())},role:!w&&g?"button":void 0,tabIndex:!w&&g?0:void 0,"aria-pressed":i||o,"aria-label":void 0!==y?`Character ${y}`:"Character",children:[(0,t.jsx)(a,{pixels:e.pixels,scale:j,showGrid:w,gridColor:x,gridThickness:w?p:0,foregroundColor:m,backgroundColor:f,onPixelClick:w?d:void 0,onPixelDrag:w?u:void 0,onDragEnd:w?h:void 0,interactive:w&&g,mixedPixels:X}),v&&void 0!==y&&(0,t.jsx)("div",{className:"absolute -top-1 -right-1 bg-retro-navy/90 text-[8px] text-gray-400 px-1 rounded font-mono",children:y})]})}function l({width:e,height:r,mode:a="small",scale:n=20,smallScale:l=2,onClick:s,className:i=""}){let o="large"===a,c=o?n:l;return(0,t.jsx)("div",{className:`relative inline-flex items-center justify-center bg-retro-navy/50 border border-dashed border-retro-grid/50 cursor-pointer hover:border-retro-cyan/50 transition-colors ${i}`,style:{width:e*c+(o?(e+1)*1:0),height:r*c+(o?(r+1)*1:0)},onClick:s,role:"button",tabIndex:0,onKeyDown:e=>{s&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),s())},"aria-label":"Add new character",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})}function s({characters:e,config:a,selectedIndex:s,batchSelection:i,onSelect:o,showAddButton:c=!1,onAdd:d,foregroundColor:u="#ffffff",backgroundColor:h="#000000",showIndices:m=!1,minColumns:f=8,maxColumns:x=32,gap:p=4,className:g="",smallScale:b=2}){let X=(0,r.useRef)(null),{size:y}=function(e){let t=(0,r.useRef)(null),[a,n]=(0,r.useState)({width:0,height:0}),l=(0,r.useCallback)(e=>{for(let t of e){let{width:e,height:r}=t.contentRect;n({width:e,height:r})}},[void 0]);return(0,r.useEffect)(()=>{let e=t.current;if(!e)return;let r=new ResizeObserver(l);r.observe(e);let a=e.getBoundingClientRect();return n({width:a.width,height:a.height}),()=>{r.disconnect()}},[l]),{ref:t,size:a}}(),v=a.width*b,w=(0,r.useMemo)(()=>{if(!y.width)return f;let e=v+p+8;return Math.max(f,Math.min(x,Math.floor((y.width-p)/e)))},[y.width,v,p,f,x]);return(0,t.jsx)("div",{ref:X,className:`overflow-auto p-2 ${g}`,role:"listbox","aria-label":"Character selection grid",children:(0,t.jsxs)("div",{className:"grid",style:{gridTemplateColumns:`repeat(${w}, auto)`,gap:`${p}px`},children:[e.map((e,r)=>(0,t.jsx)("div",{onClick:e=>o?.(r,e.shiftKey,e.metaKey||e.ctrlKey),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),o?.(r,e.shiftKey,e.metaKey||e.ctrlKey))},role:"option","aria-selected":s===r||i?.has(r),tabIndex:0,className:"focus:outline-none focus-visible:ring-1 focus-visible:ring-retro-cyan rounded",children:(0,t.jsx)(n,{character:e,mode:"small",smallScale:b,selected:s===r,batchSelected:i?.has(r)&&s!==r,foregroundColor:u,backgroundColor:h,interactive:!1,index:r,showIndex:m})},r)),c&&(0,t.jsx)(l,{width:a.width,height:a.height,mode:"small",smallScale:b,onClick:d})]})})}function i({characters:e,config:n,maxCharacters:l=32,maxWidth:s=128,maxHeight:i=64,scale:o=1,foregroundColor:c="#ffffff",backgroundColor:d="#000000",className:u="",forceColumns:h}){let{displayChars:m,columns:f,rows:x}=(0,r.useMemo)(()=>{let t=n.width*o,r=n.height*o;if(h){let t=Math.min(l,e.length),r=Math.ceil(t/h),a=Math.min(h*r,t);return{displayChars:e.slice(0,a),columns:h,rows:r}}let a=Math.floor(s/t),c=Math.floor(i/r),d=[64,32,16,8,4].find(e=>e<=a)||Math.min(a,4);d=Math.max(d,1);let u=Math.min(l,e.length),m=Math.ceil(u/d);if(m>c){let t=Math.ceil(u/(d=a)),r=Math.min(d*Math.min(t,c),u);return{displayChars:e.slice(0,r),columns:d,rows:Math.min(t,c)}}return{displayChars:e.slice(0,u),columns:d,rows:m}},[e,n,l,s,i,h,o]),p=(0,r.useMemo)(()=>{let{width:e,height:t}=n,r=f*e,a=Array.from({length:x*t},()=>Array(r).fill(!1));return m.forEach((r,n)=>{let l=n%f*e,s=Math.floor(n/f)*t;for(let n=0;n<t;n++)for(let t=0;t<e;t++)r.pixels[n]?.[t]&&(a[s+n][l+t]=!0)}),a},[m,n,f,x]),g=e.length-m.length;return(0,t.jsxs)("div",{className:`relative inline-block ${u}`,children:[(0,t.jsx)(a,{pixels:p,scale:o,showGrid:!1,foregroundColor:c,backgroundColor:d,interactive:!1}),g>0&&(0,t.jsxs)("div",{className:"absolute bottom-0 right-0 bg-retro-dark/90 text-[9px] text-gray-400 px-1 rounded-tl font-mono",children:["+",g]})]})}e.s(["PixelGrid",()=>a],89043),e.s(["CharacterDisplay",()=>n,"EmptyCharacterDisplay",()=>l],49738),e.i(37902),e.s(["InteractiveCharacterGrid",()=>s],32267),e.s(["CharacterPreview",()=>i],29493)},72547,79724,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(22016);function n(e,t=!0){let a=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!t)return;let r=t=>{a.current&&!a.current.contains(t.target)&&e()},n=t=>{"Escape"===t.key&&e()};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),document.addEventListener("keydown",n),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r),document.removeEventListener("keydown",n)}},[e,t]),a}function l({items:e,trigger:l,align:s="right",className:i="",label:o="More options"}){let[c,d]=(0,r.useState)(!1),u=n((0,r.useCallback)(()=>{d(!1)},[]),c),h=e=>{e.disabled||(e.onClick?.(),d(!1))};return 0===e.length?null:(0,t.jsxs)("div",{ref:u,className:`relative ${i}`,children:[(0,t.jsx)("button",{onClick:()=>{d(!c)},className:"touch-target flex items-center justify-center p-2 text-gray-400 hover:text-retro-cyan transition-colors rounded-md hover:bg-retro-purple/30","aria-label":o,"aria-expanded":c,"aria-haspopup":"menu",children:l||(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),c&&(0,t.jsx)("div",{className:`absolute top-full mt-2 z-50 min-w-[180px] bg-retro-navy/95 backdrop-blur-md border border-retro-grid/50 rounded-lg py-1 shadow-xl shadow-black/50 ${"right"===s?"right-0":"left-0"}`,role:"menu","aria-orientation":"vertical",children:e.map(e=>{let r=`
              w-full flex items-center gap-3 px-4 py-3 text-sm text-left
              transition-colors touch-target
              ${e.disabled?"text-gray-500 cursor-not-allowed":"danger"===e.variant?"text-red-400 hover:bg-red-500/20 hover:text-red-300":"text-gray-200 hover:bg-retro-purple/40 hover:text-retro-cyan"}
            `;return e.href&&!e.disabled?(0,t.jsxs)(a.default,{href:e.href,className:r,role:"menuitem",onClick:()=>d(!1),children:[e.icon&&(0,t.jsx)("span",{className:"w-5 h-5 flex-shrink-0",children:e.icon}),(0,t.jsx)("span",{children:e.label})]},e.id):(0,t.jsxs)("button",{className:r,role:"menuitem",disabled:e.disabled,onClick:()=>h(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),h(e))},children:[e.icon&&(0,t.jsx)("span",{className:"w-5 h-5 flex-shrink-0",children:e.icon}),(0,t.jsx)("span",{children:e.label})]},e.id)})})]})}e.s(["useOutsideClick",()=>n],79724),e.s(["OverflowMenu",()=>l],72547)},3813,33712,38152,20371,82906,92921,44824,79086,38794,4941,93949,25544,60441,42187,87355,45835,3573,43237,99401,87188,16244,46628,38910,56859,66811,83621,54750,7259,78071,35052,55361,48026,63427,e=>{"use strict";let t;e.i(89043);var r,a,n,l,s,i,o,c,d,u,h,m,f,x,p,g,b,X,y,v=e.i(49738),w=e.i(32267),j=e.i(29493),C=e.i(43476),k=e.i(71645),N=e.i(72547);function S(e){return Math.ceil(e/8)}function M(e){return S(e.width)*e.height}function E(e,t){let r=[];for(let a=0;a<t;a++)r.push(Array(e).fill(!1));return{pixels:r}}function R(e){return{pixels:e.pixels.map(e=>[...e])}}function L(){return{width:8,height:8,padding:"right",bitDirection:"ltr"}}function A(){return crypto.randomUUID()}function D(e,t){let{width:r,height:a,padding:n,bitDirection:l}=t,s=S(r),i=new Uint8Array(a*s);for(let t=0;t<a;t++){let a=8*s,o=a-r,c=Array(a).fill(!1);if("left"===n)for(let a=0;a<r;a++)c[o+a]=e.pixels[t]?.[a]||!1;else for(let a=0;a<r;a++)c[a]=e.pixels[t]?.[a]||!1;for(let e=0;e<s;e++){let r=0;for(let t=0;t<8;t++)c[8*e+t]&&(r|=1<<("ltr"===l?7-t:t));i[t*s+e]=r}}return i}function I(e,t){let r=e instanceof Uint8Array?e:new Uint8Array(e),a=M(t),n=Math.floor(r.length/a),l=[];for(let e=0;e<n;e++){let n=r.slice(e*a,(e+1)*a);l.push(function(e,t){let{width:r,height:a,padding:n,bitDirection:l}=t,s=S(r),i=[];for(let t=0;t<a;t++){let a=[],o=t*s,c=[];for(let t=0;t<s;t++){let r=e[o+t]||0;for(let e=0;e<8;e++){let t=(r&1<<("ltr"===l?7-e:e))!=0;c.push(t)}}let d=8*s,u=d-r;if("left"===n)for(let e=u;e<d;e++)a.push(c[e]);else for(let e=0;e<r;e++)a.push(c[e]);i.push(a)}return{pixels:i}}(n,t))}return l}function B(e,t){let r=M(t),a=new Uint8Array(e.length*r);for(let n=0;n<e.length;n++){let l=D(e[n],t);a.set(l,n*r)}return a}function z(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function _(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}function P(e){let t=B(e.characters,e.config);return{metadata:e.metadata,config:e.config,binaryData:z(t)}}function T(e){let t=I(_(e.binaryData),e.config);return{metadata:e.metadata,config:e.config,characters:t}}function $(e,t,r){return new Blob([B(e,{...t,...r}).buffer],{type:"application/octet-stream"})}function O(e,t){let r=URL.createObjectURL(e),a=document.createElement("a");a.href=r,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}e.s(["bytesPerCharacter",()=>M,"bytesPerLine",()=>S,"cloneCharacter",()=>R,"createDefaultConfig",()=>L,"createEmptyCharacter",()=>E,"generateId",()=>A],33712),e.s(["base64ToBinary",()=>_,"binaryToBase64",()=>z,"characterToBytes",()=>D,"createDownloadBlob",()=>$,"deserializeCharacterSet",()=>T,"downloadBlob",()=>O,"parseCharacterRom",()=>I,"serializeCharacterRom",()=>B,"serializeCharacterSet",()=>P],38152);let F="character-sets",W="retrostack-character-sets",K=new class{db=null;initialized=!1;initPromise=null;async initialize(){if(!this.initialized){if(this.initPromise)return this.initPromise;this.initPromise=this._initialize(),await this.initPromise,this.initialized=!0}}async _initialize(){return!function(){try{return!!window.indexedDB}catch{return!1}}()?void console.log("IndexedDB not available, using localStorage fallback"):new Promise(e=>{let t=indexedDB.open("retrostack-character-editor",3);t.onerror=()=>{console.error("Failed to open IndexedDB, using localStorage fallback"),e()},t.onsuccess=()=>{this.db=t.result,e()},t.onupgradeneeded=e=>{let t=e.target.result,r=e.target.transaction,a=e.oldVersion;if(t.objectStoreNames.contains(F)){if(a<2){let e=r.objectStore(F);e.indexNames.contains("by-manufacturer")||e.createIndex("by-manufacturer","metadata.manufacturer",{unique:!1}),e.indexNames.contains("by-system")||e.createIndex("by-system","metadata.system",{unique:!1}),e.openCursor().onsuccess=e=>{let t=e.target.result;if(t){let e=t.value;e.metadata&&void 0===e.metadata.manufacturer&&(e.metadata.manufacturer=""),e.metadata&&void 0===e.metadata.system&&(e.metadata.system=""),t.update(e),t.continue()}}}a<3&&(r.objectStore(F).openCursor().onsuccess=e=>{let t=e.target.result;if(t){let e=t.value;e.metadata&&void 0===e.metadata.isPinned&&(e.metadata.isPinned=!1),t.update(e),t.continue()}})}else{let e=t.createObjectStore(F,{keyPath:"metadata.id"});e.createIndex("by-name","metadata.name",{unique:!1}),e.createIndex("by-updated","metadata.updatedAt",{unique:!1}),e.createIndex("by-size","sizeKey",{unique:!1}),e.createIndex("by-manufacturer","metadata.manufacturer",{unique:!1}),e.createIndex("by-system","metadata.system",{unique:!1})}}})}useFallback(){return null===this.db}fallbackGetAll(){try{let e=localStorage.getItem(W);if(!e)return[];return JSON.parse(e).map(e=>({...e,metadata:{...e.metadata,manufacturer:e.metadata.manufacturer??"",system:e.metadata.system??"",isPinned:e.metadata.isPinned??!1}}))}catch{return[]}}fallbackSaveAll(e){try{localStorage.setItem(W,JSON.stringify(e))}catch(e){throw console.error("Failed to save to localStorage:",e),Error("Storage quota exceeded")}}async getAll(){return(await this.initialize(),this.useFallback())?this.fallbackGetAll():new Promise((e,t)=>{let r=this.db.transaction([F],"readonly").objectStore(F).getAll();r.onsuccess=()=>{let t=r.result;t.sort((e,t)=>{let r=+!!e.metadata.isPinned,a=+!!t.metadata.isPinned;return r!==a?a-r:t.metadata.updatedAt-e.metadata.updatedAt}),e(t)},r.onerror=()=>{t(Error("Failed to get character sets"))}})}async getById(e){return(await this.initialize(),this.useFallback())?this.fallbackGetAll().find(t=>t.metadata.id===e)||null:new Promise((t,r)=>{let a=this.db.transaction([F],"readonly").objectStore(F).get(e);a.onsuccess=()=>{t(a.result||null)},a.onerror=()=>{r(Error("Failed to get character set"))}})}async save(e){await this.initialize();let t={...e,sizeKey:`${e.config.width}x${e.config.height}`};if(this.useFallback()){let t=this.fallbackGetAll(),r=t.findIndex(t=>t.metadata.id===e.metadata.id);return r>=0?t[r]=e:t.push(e),this.fallbackSaveAll(t),e.metadata.id}return new Promise((r,a)=>{let n=this.db.transaction([F],"readwrite").objectStore(F).put(t);n.onsuccess=()=>{r(e.metadata.id)},n.onerror=()=>{a(Error("Failed to save character set"))}})}async saveAs(e,t){let r=A(),a=Date.now(),n={...e,metadata:{...e.metadata,id:r,name:t,createdAt:a,updatedAt:a,isBuiltIn:!1,source:"yourself"}};return await this.save(n),r}async togglePinned(e){await this.initialize();let t=await this.getById(e);if(!t)throw Error("Character set not found");let r=!t.metadata.isPinned,a={...t,metadata:{...t.metadata,isPinned:r}};return await this.save(a),r}async delete(e){if(await this.initialize(),this.useFallback()){let t=this.fallbackGetAll().filter(t=>t.metadata.id!==e);this.fallbackSaveAll(t);return}return new Promise((t,r)=>{let a=this.db.transaction([F],"readwrite").objectStore(F).delete(e);a.onsuccess=()=>{t()},a.onerror=()=>{r(Error("Failed to delete character set"))}})}async search(e){let t=await this.getAll(),r=e.toLowerCase();return t.filter(e=>e.metadata.name.toLowerCase().includes(r)||e.metadata.description.toLowerCase().includes(r)||e.metadata.source.toLowerCase().includes(r)||e.metadata.manufacturer.toLowerCase().includes(r)||e.metadata.system.toLowerCase().includes(r))}async filterBySize(e,t){return(await this.getAll()).filter(r=>(null===e||r.config.width===e)&&(null===t||r.config.height===t))}async filterByManufacturers(e){if(0===e.length)return this.getAll();let t=await this.getAll(),r=e.map(e=>e.toLowerCase());return t.filter(e=>r.includes(e.metadata.manufacturer.toLowerCase()))}async filterBySystems(e){if(0===e.length)return this.getAll();let t=await this.getAll(),r=e.map(e=>e.toLowerCase());return t.filter(e=>r.includes(e.metadata.system.toLowerCase()))}async getAvailableManufacturers(){let e=await this.getAll(),t=new Set;for(let r of e)r.metadata.manufacturer&&t.add(r.metadata.manufacturer);return Array.from(t).sort()}async getAvailableSystems(){let e=await this.getAll(),t=new Set;for(let r of e)r.metadata.system&&t.add(r.metadata.system);return Array.from(t).sort()}async getAvailableSizes(){let e=await this.getAll(),t=new Map;for(let r of e){let e=`${r.config.width}x${r.config.height}`;t.has(e)||t.set(e,{width:r.config.width,height:r.config.height})}return Array.from(t.values()).sort((e,t)=>e.width!==t.width?e.width-t.width:e.height-t.height)}async nameExists(e,t){return(await this.getAll()).some(r=>r.metadata.name.toLowerCase()===e.toLowerCase()&&r.metadata.id!==t)}async count(){return(await this.getAll()).length}async isEmpty(){return 0===(await this.getAll()).length}async clear(){return(await this.initialize(),this.useFallback())?void localStorage.removeItem(W):new Promise((e,t)=>{let r=this.db.transaction([F],"readwrite").objectStore(F).clear();r.onsuccess=()=>{e()},r.onerror=()=>{t(Error("Failed to clear storage"))}})}};function H(e,t){let r=e.pixels.length,a=e.pixels[0]?.length||0,n=[];for(let l=0;l<r;l++){let s=[];for(let n=0;n<a;n++){let i,o;"right"===t?(i=a-1-n,o=l):(i=n,o=r-1-l),i>=0&&i<r&&o>=0&&o<a?s.push(e.pixels[i]?.[o]||!1):s.push(!1)}n.push(s)}return{pixels:n}}function U(e,t,r=!0){let a=e.pixels.length,n=e.pixels[0]?.length||0,l=[];for(let s=0;s<a;s++){let i=[];for(let l=0;l<n;l++){let o=s,c=l;switch(t){case"up":if((o=s+1)>=a&&(o=r?0:a-1,!r)){i.push(!1);continue}break;case"down":if((o=s-1)<0&&(o=r?a-1:0,!r)){i.push(!1);continue}break;case"left":if((c=l+1)>=n&&(c=r?0:n-1,!r)){i.push(!1);continue}break;case"right":if((c=l-1)<0&&(c=r?n-1:0,!r)){i.push(!1);continue}}i.push(e.pixels[o]?.[c]||!1)}l.push(i)}return{pixels:l}}function G(e,t,r,a){let n=e.pixels.length,l=e.pixels[0]?.length||0,s=0,i=0;a.endsWith("l")?s=0:a.endsWith("c")?s=Math.floor((t-l)/2):a.endsWith("r")&&(s=t-l),a.startsWith("t")?i=0:a.startsWith("m")?i=Math.floor((r-n)/2):a.startsWith("b")&&(i=r-n);let o=[];for(let a=0;a<r;a++){let r=[];for(let o=0;o<t;o++){let t=a-i,c=o-s;t>=0&&t<n&&c>=0&&c<l?r.push(e.pixels[t][c]):r.push(!1)}o.push(r)}return{pixels:o}}function V(e){return{pixels:e.pixels.map(e=>e.map(e=>!e))}}function Y(e){return{pixels:e.pixels.map(e=>[...e].reverse())}}function q(e){return{pixels:[...e.pixels].reverse().map(e=>[...e])}}function J(e,t,r){return{pixels:e.pixels.map((e,a)=>a===t?e.map((e,t)=>t===r?!e:e):[...e])}}function Z(e,t,r,a){return{pixels:e.pixels.map((e,n)=>n===t?e.map((e,t)=>t===r?a:e):[...e])}}function Q(e,t,r){return e.map((e,a)=>t.has(a)?r(e):e)}function ee(e,t,r,a){let n=Array.from(t).map(t=>e[t]);if(0===n.length)return"same-off";let l=n[0]?.pixels[r]?.[a]||!1;for(let e=1;e<n.length;e++)if((n[e]?.pixels[r]?.[a]||!1)!==l)return"mixed";return l?"same-on":"same-off"}function et(e,t,r,a){let n="same-on"!==ee(e,t,r,a);return e.map((e,l)=>t.has(l)?Z(e,r,a,n):e)}function er(e){let t=e.pixels.length,r=e.pixels[0]?.length||0,a=function(e){let t=e.pixels.length,r=e.pixels[0]?.length||0,a=t,n=-1,l=r,s=-1;for(let i=0;i<t;i++)for(let t=0;t<r;t++)e.pixels[i][t]&&(a=Math.min(a,i),n=Math.max(n,i),l=Math.min(l,t),s=Math.max(s,t));return -1===n?null:{minRow:a,maxRow:n,minCol:l,maxCol:s}}(e);if(!a)return e;let n=a.maxCol-a.minCol+1,l=Math.floor((t-(a.maxRow-a.minRow+1))/2),s=Math.floor((r-n)/2)-a.minCol,i=l-a.minRow;if(0===s&&0===i)return e;let o=[];for(let a=0;a<t;a++){let n=[];for(let l=0;l<r;l++){let o=a-i,c=l-s;o>=0&&o<t&&c>=0&&c<r?n.push(e.pixels[o][c]):n.push(!1)}o.push(n)}return{pixels:o}}function ea(e,t,r,a){return 1===t?e:"nearest"===a?function(e,t,r){let a=e.pixels.length,n=e.pixels[0]?.length||0,l=Math.round(n*t),s=Math.round(a*t),i=[];for(let r=0;r<s;r++){let s=[];for(let i=0;i<l;i++){let l=Math.min(Math.floor(r/t),a-1),o=Math.min(Math.floor(i/t),n-1);s.push(e.pixels[l]?.[o]||!1)}i.push(s)}let o=n-l,c=a-s,d=0,u=0;r.endsWith("l")?d=0:r.endsWith("c")?d=Math.floor(o/2):r.endsWith("r")&&(d=o),r.startsWith("t")?u=0:r.startsWith("m")?u=Math.floor(c/2):r.startsWith("b")&&(u=c);let h=[];for(let e=0;e<a;e++){let t=[];for(let r=0;r<n;r++){let a=e-u,n=r-d;a>=0&&a<s&&n>=0&&n<l?t.push(i[a][n]):t.push(!1)}h.push(t)}return{pixels:h}}(e,t,r):function(e,t,r,a=.5){let n=e.pixels.length,l=e.pixels[0]?.length||0,s=Math.round(l*t),i=Math.round(n*t),o=[];for(let r=0;r<i;r++){let n=[];for(let l=0;l<s;l++){let s=r/t,i=(r+1)/t,o=l/t,c=(l+1)/t,d=function(e,t,r,a,n){let l=e.length,s=e[0]?.length||0,i=0,o=0,c=Math.max(0,Math.floor(t)),d=Math.min(l-1,Math.floor(r)),u=Math.max(0,Math.floor(a)),h=Math.min(s-1,Math.floor(n));for(let l=c;l<=d;l++)for(let s=u;s<=h;s++){let c=Math.max(l,t),d=Math.max(s,a),u=(Math.min(l+1,r)-c)*(Math.min(s+1,n)-d);i+=u,e[l][s]&&(o+=u)}return 0===i?0:o/i}(e.pixels,s,i,o,c);n.push(d>=a)}o.push(n)}let c=l-s,d=n-i,u=0,h=0;r.endsWith("l")?u=0:r.endsWith("c")?u=Math.floor(c/2):r.endsWith("r")&&(u=c),r.startsWith("t")?h=0:r.startsWith("m")?h=Math.floor(d/2):r.startsWith("b")&&(h=d);let m=[];for(let e=0;e<n;e++){let t=[];for(let r=0;r<l;r++){let a=e-h,n=r-u;a>=0&&a<i&&n>=0&&n<s?t.push(o[a][n]):t.push(!1)}m.push(t)}return{pixels:m}}(e,t,r)}e.s(["batchTogglePixel",()=>et,"batchTransform",()=>Q,"centerCharacter",()=>er,"flipHorizontal",()=>Y,"flipVertical",()=>q,"getPixelState",()=>ee,"invertCharacter",()=>V,"resizeCharacter",()=>G,"rotateCharacter",()=>H,"scaleCharacter",()=>ea,"setPixel",()=>Z,"shiftCharacter",()=>U,"togglePixel",()=>J],20371);let en=[{id:"classic",name:"White Phosphor",foreground:"#ffffff",background:"#000000",gridColor:"#333333"},{id:"green",name:"Green Phosphor",foreground:"#33ff33",background:"#001100",gridColor:"#004400"},{id:"amber",name:"Amber Phosphor",foreground:"#ffb000",background:"#1a0a00",gridColor:"#4d2e00"},{id:"c64-blue",name:"C64 Blue",foreground:"#6c5eb5",background:"#40318d",gridColor:"#2e2266"},{id:"c64-cyan",name:"C64 Light Blue",foreground:"#70a4b2",background:"#352879",gridColor:"#493f99"},{id:"apple-green",name:"Apple II Green",foreground:"#14f53c",background:"#000000",gridColor:"#0a4d15"},{id:"zx-spectrum",name:"ZX Spectrum",foreground:"#ffffff",background:"#0000d7",gridColor:"#0000aa"},{id:"ibm-cga",name:"IBM CGA Cyan",foreground:"#55ffff",background:"#000000",gridColor:"#005555"},{id:"vt100",name:"VT100",foreground:"#00ff00",background:"#000000",gridColor:"#003300"},{id:"custom",name:"Custom...",foreground:"",background:"",gridColor:""}],el="character-editor-color-preset",es="character-editor-custom-colors";function ei(e){return en.find(t=>t.id===e)}function eo(e){try{localStorage.setItem(el,e)}catch{}}function ec(){try{return localStorage.getItem(el)||"classic"}catch{return"classic"}}function ed(e){try{localStorage.setItem(es,JSON.stringify(e))}catch{}}function eu(){try{let e=localStorage.getItem(es);if(e)return JSON.parse(e)}catch{}return{foreground:"#ffffff",background:"#000000",gridColor:"#333333"}}function eh(){let e=ec();if("custom"===e)return eu();let t=ei(e);return t?{foreground:t.foreground,background:t.background,gridColor:t.gridColor}:{foreground:"#ffffff",background:"#000000",gridColor:"#333333"}}function em(){let e=[];e.push(["........","........","........","........","........","........","........","........"]),e.push(["...XX...","...XX...","...XX...","...XX...","...XX...","........","...XX...","........"]),e.push([".XX..XX.",".XX..XX.",".XX..XX.","........","........","........","........","........"]),e.push([".XX..XX.","XXXXXXXX",".XX..XX.",".XX..XX.","XXXXXXXX",".XX..XX.","........","........"]),e.push(["...XX...",".XXXXXX.","XX......",".XXXXX..","....XX..","XXXXXX..","...XX...","........"]),e.push(["XX....XX","XX...XX.","....XX..","...XX...","..XX....",".XX...XX","XX....XX","........"]),e.push(["..XXX...",".XX.XX..","..XXX...",".XXX.XX.","XX..XX..","XX..XX..",".XXX.XX.","........"]),e.push(["...XX...","...XX...","..XX....","........","........","........","........","........"]),e.push(["....XX..","...XX...","..XX....","..XX....","..XX....","...XX...","....XX..","........"]),e.push(["..XX....","...XX...","....XX..","....XX..","....XX..","...XX...","..XX....","........"]),e.push(["........","..X..X..","...XX...",".XXXXXX.","...XX...","..X..X..","........","........"]),e.push(["........","...XX...","...XX...",".XXXXXX.","...XX...","...XX...","........","........"]),e.push(["........","........","........","........","........","...XX...","...XX...","..XX...."]),e.push(["........","........","........",".XXXXXX.","........","........","........","........"]),e.push(["........","........","........","........","........","...XX...","...XX...","........"]),e.push(["......XX",".....XX.","....XX..","...XX...","..XX....",".XX.....","XX......","........"]),e.push([".XXXXX..","XX...XX.","XX..XXX.","XX.X.XX.","XXX..XX.","XX...XX.",".XXXXX..","........"]),e.push(["...XX...","..XXX...","...XX...","...XX...","...XX...","...XX...",".XXXXXX.","........"]),e.push([".XXXXX..","XX...XX.",".....XX.","...XXX..","..XX....",".XX.....","XXXXXXX.","........"]),e.push([".XXXXX..","XX...XX.",".....XX.","..XXXX..",".....XX.","XX...XX.",".XXXXX..","........"]),e.push(["....XXX.","...XXXX.","..XX.XX.",".XX..XX.","XXXXXXX.",".....XX.",".....XX.","........"]),e.push(["XXXXXXX.","XX......","XXXXXX..",".....XX.",".....XX.","XX...XX.",".XXXXX..","........"]),e.push(["..XXXX..",".XX.....","XX......","XXXXXX..","XX...XX.","XX...XX.",".XXXXX..","........"]),e.push(["XXXXXXX.",".....XX.","....XX..","...XX...","..XX....","..XX....","..XX....","........"]),e.push([".XXXXX..","XX...XX.","XX...XX.",".XXXXX..","XX...XX.","XX...XX.",".XXXXX..","........"]),e.push([".XXXXX..","XX...XX.","XX...XX.",".XXXXXX.",".....XX.","....XX..",".XXXX...","........"]),e.push(["........","...XX...","...XX...","........","...XX...","...XX...","........","........"]),e.push(["........","...XX...","...XX...","........","...XX...","...XX...","..XX....","........"]),e.push([".....XX.","....XX..","...XX...","..XX....","...XX...","....XX..",".....XX.","........"]),e.push(["........","........",".XXXXXX.","........",".XXXXXX.","........","........","........"]),e.push([".XX.....","..XX....","...XX...","....XX..","...XX...","..XX....",".XX.....","........"]),e.push([".XXXXX..","XX...XX.",".....XX.","...XXX..","...XX...","........","...XX...","........"]),e.push([".XXXXX..","XX...XX.","XX.XXXX.","XX.XXXX.","XX.XXX..","XX......",".XXXXX..","........"]),e.push(["..XXX...",".XX.XX..","XX...XX.","XXXXXXX.","XX...XX.","XX...XX.","XX...XX.","........"]),e.push(["XXXXXX..","XX...XX.","XX...XX.","XXXXXX..","XX...XX.","XX...XX.","XXXXXX..","........"]),e.push([".XXXXX..","XX...XX.","XX......","XX......","XX......","XX...XX.",".XXXXX..","........"]),e.push(["XXXXX...","XX..XX..","XX...XX.","XX...XX.","XX...XX.","XX..XX..","XXXXX...","........"]),e.push(["XXXXXXX.","XX......","XX......","XXXXX...","XX......","XX......","XXXXXXX.","........"]),e.push(["XXXXXXX.","XX......","XX......","XXXXX...","XX......","XX......","XX......","........"]),e.push([".XXXXX..","XX...XX.","XX......","XX..XXX.","XX...XX.","XX...XX.",".XXXXX..","........"]),e.push(["XX...XX.","XX...XX.","XX...XX.","XXXXXXX.","XX...XX.","XX...XX.","XX...XX.","........"]),e.push([".XXXXXX.","...XX...","...XX...","...XX...","...XX...","...XX...",".XXXXXX.","........"]),e.push(["...XXXX.",".....XX.",".....XX.",".....XX.","XX...XX.","XX...XX.",".XXXXX..","........"]),e.push(["XX...XX.","XX..XX..","XX.XX...","XXXX....","XX.XX...","XX..XX..","XX...XX.","........"]),e.push(["XX......","XX......","XX......","XX......","XX......","XX......","XXXXXXX.","........"]),e.push(["XX...XX.","XXX.XXX.","XXXXXXX.","XX.X.XX.","XX...XX.","XX...XX.","XX...XX.","........"]),e.push(["XX...XX.","XXX..XX.","XXXX.XX.","XX.XXXX.","XX..XXX.","XX...XX.","XX...XX.","........"]),e.push([".XXXXX..","XX...XX.","XX...XX.","XX...XX.","XX...XX.","XX...XX.",".XXXXX..","........"]),e.push(["XXXXXX..","XX...XX.","XX...XX.","XXXXXX..","XX......","XX......","XX......","........"]),e.push([".XXXXX..","XX...XX.","XX...XX.","XX...XX.","XX.X.XX.","XX..XX..",".XXX.XX.","........"]),e.push(["XXXXXX..","XX...XX.","XX...XX.","XXXXXX..","XX.XX...","XX..XX..","XX...XX.","........"]),e.push([".XXXXX..","XX...XX.","XX......",".XXXXX..",".....XX.","XX...XX.",".XXXXX..","........"]),e.push(["XXXXXXX.","...XX...","...XX...","...XX...","...XX...","...XX...","...XX...","........"]),e.push(["XX...XX.","XX...XX.","XX...XX.","XX...XX.","XX...XX.","XX...XX.",".XXXXX..","........"]),e.push(["XX...XX.","XX...XX.","XX...XX.","XX...XX.",".XX.XX..","..XXX...","...X....","........"]),e.push(["XX...XX.","XX...XX.","XX...XX.","XX.X.XX.","XXXXXXX.","XXX.XXX.","XX...XX.","........"]),e.push(["XX...XX.",".XX.XX..","..XXX...","...X....","..XXX...",".XX.XX..","XX...XX.","........"]),e.push(["XX...XX.",".XX.XX..","..XXX...","...XX...","...XX...","...XX...","...XX...","........"]),e.push(["XXXXXXX.",".....XX.","....XX..","...XX...","..XX....",".XX.....","XXXXXXX.","........"]),e.push(["..XXXX..","..XX....","..XX....","..XX....","..XX....","..XX....","..XXXX..","........"]),e.push(["XX......",".XX.....","..XX....","...XX...","....XX..",".....XX.","......XX","........"]),e.push(["..XXXX..","....XX..","....XX..","....XX..","....XX..","....XX..","..XXXX..","........"]),e.push(["...X....","..XXX...",".XX.XX..","XX...XX.","........","........","........","........"]),e.push(["........","........","........","........","........","........","XXXXXXXX","........"]);let t=new Uint8Array(8*e.length);for(let r=0;r<e.length;r++){let a=function(e){let t=new Uint8Array(8);for(let r=0;r<8&&r<e.length;r++){let a=0;for(let t=0;t<8;t++){let n=e[r]?.[t]||".";("X"===n||"#"===n||"*"===n)&&(a|=1<<7-t)}t[r]=a}return t}(e[r]);t.set(a,8*r)}return t}e.s(["COLOR_PRESETS",0,en,"getActiveColors",()=>eh,"getCustomColors",()=>eu,"getPresetById",()=>ei,"getSavedPresetId",()=>ec,"saveCustomColors",()=>ed,"saveSelectedPreset",()=>eo],82906);let ef=[{system:"C64",manufacturer:"Commodore",characterRom:{width:8,height:8,characterCount:256}},{system:"VIC-20",manufacturer:"Commodore",characterRom:{width:8,height:8,characterCount:256}},{system:"PET",manufacturer:"Commodore",characterRom:{width:8,height:8,characterCount:256}},{system:"C128",manufacturer:"Commodore"},{system:"Plus/4",manufacturer:"Commodore"},{system:"C16",manufacturer:"Commodore"},{system:"Amiga",manufacturer:"Commodore"},{system:"Apple II",manufacturer:"Apple",characterRom:{width:8,height:8,characterCount:256}},{system:"Apple IIe",manufacturer:"Apple"},{system:"Apple IIc",manufacturer:"Apple"},{system:"Apple IIgs",manufacturer:"Apple"},{system:"Apple III",manufacturer:"Apple"},{system:"ZX80",manufacturer:"Sinclair",characterRom:{width:8,height:8,characterCount:64}},{system:"ZX81",manufacturer:"Sinclair",characterRom:{width:8,height:8,characterCount:64}},{system:"ZX Spectrum",manufacturer:"Sinclair",characterRom:{width:8,height:8,characterCount:96}},{system:"QL",manufacturer:"Sinclair"},{system:"Atari 400/800",manufacturer:"Atari",characterRom:{width:8,height:8,characterCount:128}},{system:"Atari ST",manufacturer:"Atari"},{system:"Atari 2600",manufacturer:"Atari"},{system:"Atari 7800",manufacturer:"Atari"},{system:"Atari Lynx",manufacturer:"Atari"},{system:"PC CGA",manufacturer:"IBM",characterRom:{width:8,height:8,characterCount:256}},{system:"PC EGA",manufacturer:"IBM",characterRom:{width:8,height:14,characterCount:256}},{system:"PC VGA",manufacturer:"IBM",characterRom:{width:8,height:16,characterCount:256}},{system:"PC MDA",manufacturer:"IBM"},{system:"PC Hercules",manufacturer:"IBM"},{system:"NES/Famicom",manufacturer:"Nintendo",characterRom:{width:8,height:8,characterCount:512}},{system:"SNES",manufacturer:"Nintendo"},{system:"Game Boy",manufacturer:"Nintendo"},{system:"Game Boy Color",manufacturer:"Nintendo"},{system:"Game Boy Advance",manufacturer:"Nintendo"},{system:"Master System",manufacturer:"Sega"},{system:"Genesis/Mega Drive",manufacturer:"Sega"},{system:"Game Gear",manufacturer:"Sega"},{system:"Saturn",manufacturer:"Sega"},{system:"CPC 464",manufacturer:"Amstrad",characterRom:{width:8,height:8,characterCount:256}},{system:"CPC 6128",manufacturer:"Amstrad",characterRom:{width:8,height:8,characterCount:256}},{system:"CPC 664",manufacturer:"Amstrad"},{system:"PCW",manufacturer:"Amstrad"},{system:"TI-99/4A",manufacturer:"Texas Instruments",characterRom:{width:8,height:8,characterCount:256}},{system:"TRS-80 Model I",manufacturer:"Tandy",characterRom:{width:8,height:8,characterCount:128}},{system:"TRS-80 Model III",manufacturer:"Tandy"},{system:"TRS-80 Color Computer",manufacturer:"Tandy"},{system:"TRS-80 Model 4",manufacturer:"Tandy"},{system:"MSX",manufacturer:"MSX",characterRom:{width:8,height:8,characterCount:256}},{system:"MSX2",manufacturer:"MSX"},{system:"MSX2+",manufacturer:"MSX"},{system:"MSX turbo R",manufacturer:"MSX"},{system:"BBC Micro",manufacturer:"Acorn",characterRom:{width:8,height:8,characterCount:256}},{system:"Electron",manufacturer:"Acorn"},{system:"Archimedes",manufacturer:"Acorn"},{system:"ColecoVision",manufacturer:"Coleco"},{system:"Adam",manufacturer:"Coleco"},{system:"Intellivision",manufacturer:"Mattel"},{system:"PC Engine/TurboGrafx-16",manufacturer:"NEC"},{system:"PC-8801",manufacturer:"NEC"},{system:"PC-9801",manufacturer:"NEC"},{system:"MZ-80",manufacturer:"Sharp"},{system:"X1",manufacturer:"Sharp"},{system:"X68000",manufacturer:"Sharp"}],ex=(()=>{let e=new Map;for(let t of ef)e.has(t.manufacturer)||e.set(t.manufacturer,[]),e.get(t.manufacturer).push(t.system);return Array.from(e.entries()).map(([e,t])=>({manufacturer:e,systems:t}))})(),ep=ef.filter(e=>void 0!==e.characterRom),eg=ep.map(e=>({system:e.system,manufacturer:e.manufacturer,width:e.characterRom.width,height:e.characterRom.height})),eb=ep.map(e=>({system:e.system,manufacturer:e.manufacturer,count:e.characterRom.characterCount}));function eX(e,t){return ep.filter(r=>r.characterRom.width===e&&r.characterRom.height===t).map(e=>e.system)}function ey(e){return ep.filter(t=>t.characterRom.characterCount===e).map(e=>e.system)}let ev=[{name:"8x8 (Standard)",width:8,height:8,systems:eX(8,8)},{name:"8x16 (Extended)",width:8,height:16,systems:eX(8,16)},{name:"8x14 (VGA Text)",width:8,height:14,systems:eX(8,14)},{name:"8x10 (Apple II Lores)",width:8,height:10,systems:["Apple II"]},{name:"5x7 (LED Matrix)",width:5,height:7,systems:["LED Displays","Dot Matrix"]},{name:"6x8 (C64 Hires)",width:6,height:8,systems:["C64"]},{name:"4x8 (VIC-20 Multicolor)",width:4,height:8,systems:["VIC-20"]}],ew=[{name:"64 (Quarter ROM)",count:64,systems:ey(64)},{name:"96 (ZX Spectrum)",count:96,systems:ey(96)},{name:"128 (Half ROM)",count:128,systems:ey(128)},{name:"256 (Full Set)",count:256,systems:ey(256)},{name:"512 (Extended)",count:512,systems:ey(512)}];function ej(e){let t=ex.find(t=>t.manufacturer.toLowerCase()===e.toLowerCase());return t?.systems||[]}let eC={0:"NUL",1:"SOH",2:"STX",3:"ETX",4:"EOT",5:"ENQ",6:"ACK",7:"BEL",8:"BS",9:"HT",10:"LF",11:"VT",12:"FF",13:"CR",14:"SO",15:"SI",16:"DLE",17:"DC1",18:"DC2",19:"DC3",20:"DC4",21:"NAK",22:"SYN",23:"ETB",24:"CAN",25:"EM",26:"SUB",27:"ESC",28:"FS",29:"GS",30:"RS",31:"US",127:"DEL"};function ek(e){return e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(1)} KB`:`${(e/1048576).toFixed(1)} MB`}function eN(e){return`${e.width}x${e.height}`}function eS(e){let t=e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");return`${t||"charset"}.bin`}function eM(e){let t=e.name.toLowerCase().substring(e.name.lastIndexOf("."));return[".bin",".rom",".chr",".fnt",".dat"].includes(t)||!t||t===e.name.toLowerCase()}function eE(e,t){return Math.floor(e/(Math.ceil(t.width/8)*t.height))}function eR(e){return{arrayName:e.replace(/[^a-zA-Z0-9_]/g,"_").replace(/^[0-9]/,"_$&").toUpperCase()||"CHARSET",includeGuards:!0,includeComments:!0,bytesPerLine:8}}function eL(e){return{labelName:e.replace(/[^a-zA-Z0-9_]/g,"_").replace(/^[0-9]/,"_$&").toLowerCase()||"charset",directive:".byte",useHex:!0,includeComments:!0,bytesPerLine:8}}function eA(){return{columns:16,scale:4,showGrid:!0,gridColor:"#333333",foregroundColor:"#ffffff",backgroundColor:"#000000",transparent:!1}}function eD(e,t,r){let a=[],n=`${r.arrayName}_H`,l=M(t);r.includeComments&&(a.push("/**"),a.push(` * ${r.arrayName} - Character ROM Data`),a.push(" * Generated by RetroStack Character ROM Editor"),a.push(" * "),a.push(` * Character dimensions: ${t.width}x${t.height}`),a.push(` * Total characters: ${e.length}`),a.push(` * Bytes per character: ${l}`),a.push(" */"),a.push("")),r.includeGuards&&(a.push(`#ifndef ${n}`),a.push(`#define ${n}`),a.push(""));let s=e.length*l;a.push(`const unsigned char ${r.arrayName}[${s}] = {`);for(let n=0;n<e.length;n++){let l=D(e[n],t),s=[];for(let e=0;e<l.length;e++)s.push(`0x${l[e].toString(16).padStart(2,"0").toUpperCase()}`);for(let t=0;t<s.length;t+=r.bytesPerLine){let l=s.slice(t,t+r.bytesPerLine),i=n===e.length-1&&t+r.bytesPerLine>=s.length,o=`  ${l.join(", ")}${i?"":","}`;r.includeComments&&0===t?a.push(`${o}  /* Char ${n} */`):a.push(o)}}return a.push("};"),a.push(""),r.includeGuards&&(a.push(`#endif /* ${n} */`),a.push("")),a.join("\n")}function eI(e,t,r){let a=[],n=M(t);r.includeComments&&(a.push("; "+"=".repeat(60)),a.push(`; ${r.labelName} - Character ROM Data`),a.push("; Generated by RetroStack Character ROM Editor"),a.push("; "),a.push(`; Character dimensions: ${t.width}x${t.height}`),a.push(`; Total characters: ${e.length}`),a.push(`; Bytes per character: ${n}`),a.push("; "+"=".repeat(60)),a.push("")),a.push(`${r.labelName}:`);for(let n=0;n<e.length;n++){let l=D(e[n],t),s=[];for(let e=0;e<l.length;e++)r.useHex?s.push(`$${l[e].toString(16).padStart(2,"0").toUpperCase()}`):s.push(l[e].toString());for(let e=0;e<s.length;e+=r.bytesPerLine){let t=s.slice(e,e+r.bytesPerLine),l=`    ${r.directive} ${t.join(", ")}`;r.includeComments&&0===e?a.push(`${l}  ; Char ${n}`):a.push(l)}}return a.push(""),a.join("\n")}async function eB(e,t,r){let{columns:a,scale:n,showGrid:l,gridColor:s,foregroundColor:i,backgroundColor:o,transparent:c}=r,d=Math.ceil(e.length/a),u=t.width,h=t.height,m=+!!l,f=a*u*n+(l?(a+1)*m:0),x=d*h*n+(l?(d+1)*m:0),p=document.createElement("canvas");p.width=f,p.height=x;let g=p.getContext("2d");if(!g)throw Error("Could not create canvas context");if(c?g.clearRect(0,0,f,x):(g.fillStyle=o,g.fillRect(0,0,f,x)),l){g.fillStyle=s;for(let e=0;e<=a;e++){let t=e*(u*n+m);g.fillRect(t,0,m,x)}for(let e=0;e<=d;e++){let t=e*(h*n+m);g.fillRect(0,t,f,m)}}for(let t=0;t<e.length;t++){let r=e[t],s=t%a,d=Math.floor(t/a),f=l?s*(u*n+m)+m:s*u*n,x=l?d*(h*n+m)+m:d*h*n;for(let e=0;e<h;e++)for(let t=0;t<u;t++)r.pixels[e]?.[t]?(g.fillStyle=i,g.fillRect(f+t*n,x+e*n,n,n)):c||(g.fillStyle=o,g.fillRect(f+t*n,x+e*n,n,n))}return new Promise((e,t)=>{p.toBlob(r=>{r?e(r):t(Error("Failed to create PNG blob"))},"image/png")})}function ez(e,t,r=16){if(0===e.length)return"";let a=[],n=0;for(;a.length<r&&n<e.length;){let l=D(e[n],t);for(let e=0;e<l.length&&a.length<r;e++)a.push(l[e]);n++}return a.map(e=>e.toString(16).padStart(2,"0").toUpperCase()).join(" ")}function e_(e,t,r=0){let a=D(e,t),n=S(t.width),l=a.slice(r*n,(r+1)*n),s="";for(let e of l)s+=e.toString(2).padStart(8,"0");let i=8*n-t.width,o="";return o="left"===t.padding?"P".repeat(i)+"D".repeat(t.width):"D".repeat(t.width)+"P".repeat(i),{bits:s,hex:Array.from(l).map(e=>e.toString(16).padStart(2,"0").toUpperCase()).join(" "),padding:o}}function eP({characterSet:e,onEdit:t,onExport:r,onDelete:a,onDuplicate:n,onRename:l,onTogglePinned:s}){let{metadata:i,config:o}=e,c=(0,k.useMemo)(()=>{try{return T(e).characters}catch{return[]}},[e]),d=c.length,u=(0,k.useMemo)(()=>{let e=[];return s&&e.push({id:"pin",label:i.isPinned?"Unpin":"Pin to top",onClick:s}),t&&e.push({id:"edit",label:"Edit",onClick:t}),l&&!i.isBuiltIn&&e.push({id:"rename",label:"Rename",onClick:l}),r&&e.push({id:"export",label:"Export",onClick:r}),n&&e.push({id:"duplicate",label:"Duplicate",onClick:n}),a&&!i.isBuiltIn&&e.push({id:"delete",label:"Delete",onClick:a,variant:"danger"}),e},[t,l,r,n,a,s,i.isBuiltIn,i.isPinned]);return(0,C.jsxs)("div",{className:`card-retro p-4 flex flex-col gap-3 hover-glow-cyan transition-all h-full relative has-[[aria-expanded=true]]:z-50 ${i.isPinned?"ring-1 ring-retro-yellow/50":""}`,children:[(0,C.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,C.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,C.jsxs)("h3",{className:"text-sm font-semibold text-retro-cyan truncate flex items-center gap-1.5",children:[i.isPinned&&(0,C.jsx)("svg",{className:"w-3.5 h-3.5 text-retro-yellow flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{d:"M16 12V4h1V2H7v2h1v8l-2 2v2h5.2v6h1.6v-6H18v-2l-2-2z"})}),i.name]}),(i.manufacturer||i.system)&&(0,C.jsxs)("p",{className:"text-[10px] text-gray-500 mt-0.5",children:[i.manufacturer,i.manufacturer&&i.system?" ":"",i.system]}),i.description&&(0,C.jsx)("p",{className:"text-xs text-gray-400 line-clamp-2 mt-0.5",children:i.description})]}),(0,C.jsx)("div",{className:"flex-shrink-0",children:u.length>0&&(0,C.jsx)(N.OverflowMenu,{items:u,align:"right",label:"Character set actions"})})]}),(0,C.jsx)("div",{className:"flex justify-center py-2 bg-black/30 rounded",children:(0,C.jsx)(j.CharacterPreview,{characters:c,config:o,maxCharacters:512,maxWidth:256,maxHeight:4096})}),(0,C.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-retro-grid/30 text-[10px] mt-auto",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("span",{className:"px-1.5 py-0.5 bg-retro-purple/30 text-retro-pink rounded",children:eN(o)}),(0,C.jsxs)("span",{className:"text-gray-500",children:[d," char",1!==d?"s":""]}),i.isBuiltIn&&(0,C.jsx)("span",{className:"px-1.5 py-0.5 bg-retro-navy text-gray-400 rounded",children:"Built-in"})]}),t&&(0,C.jsx)("button",{onClick:t,className:"px-2 py-1 text-xs bg-retro-cyan/20 text-retro-cyan rounded hover:bg-retro-cyan/30 transition-colors",children:"Edit"})]})]})}function eT({characterSet:e,selected:t=!1,onClick:r}){let{metadata:a,config:n}=e,l=(0,k.useMemo)(()=>{try{return T(e).characters}catch{return[]}},[e]);return(0,C.jsx)("button",{onClick:r,className:`
        w-full p-3 rounded border text-left transition-all
        ${t?"border-retro-cyan bg-retro-cyan/10":"border-retro-grid/30 bg-retro-navy/30 hover:border-retro-grid/50"}
      `,children:(0,C.jsxs)("div",{className:"flex items-center gap-3",children:[(0,C.jsx)("div",{className:"flex-shrink-0 bg-black/30 p-1 rounded",children:(0,C.jsx)(j.CharacterPreview,{characters:l,config:n,maxCharacters:8,maxWidth:48,maxHeight:24})}),(0,C.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,C.jsx)("div",{className:"text-sm font-medium text-gray-200 truncate",children:a.name}),(0,C.jsxs)("div",{className:"text-[10px] text-gray-500",children:[eN(n)," - ",l.length," chars"]})]}),t&&(0,C.jsx)("svg",{className:"w-4 h-4 text-retro-cyan flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})})]})})}function e$({onImport:e,onCreate:t}){return(0,C.jsxs)("div",{className:"card-retro p-6 flex flex-col items-center justify-center gap-4 border-dashed",children:[(0,C.jsx)("div",{className:"w-12 h-12 rounded-full bg-retro-purple/20 flex items-center justify-center",children:(0,C.jsx)("svg",{className:"w-6 h-6 text-retro-pink",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,C.jsxs)("div",{className:"text-center",children:[(0,C.jsx)("p",{className:"text-sm text-gray-300",children:"Add a character set"}),(0,C.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Import a ROM file or create from scratch"})]}),(0,C.jsxs)("div",{className:"flex gap-2",children:[t&&(0,C.jsx)("button",{onClick:t,className:"px-3 py-1.5 text-xs bg-retro-pink/20 text-retro-pink rounded hover:bg-retro-pink/30 transition-colors",children:"Add"}),e&&(0,C.jsx)("button",{onClick:e,className:"px-3 py-1.5 text-xs bg-retro-cyan/20 text-retro-cyan rounded hover:bg-retro-cyan/30 transition-colors",children:"Import"})]})]})}function eO({characterSets:e,loading:t=!1,onEdit:r,onExport:a,onDelete:n,onDuplicate:l,onRename:s,onTogglePinned:i,onImport:o,onCreate:c,className:d=""}){return t?(0,C.jsx)("div",{className:`grid-fluid gap-4 ${d}`,children:Array.from({length:4}).map((e,t)=>(0,C.jsx)(eF,{},t))}):0===e.length?(0,C.jsx)("div",{className:`flex flex-col items-center justify-center py-12 ${d}`,children:(0,C.jsx)(e$,{onImport:o,onCreate:c})}):(0,C.jsx)("div",{className:`grid-fluid gap-4 ${d}`,children:e.map(e=>(0,C.jsx)(eP,{characterSet:e,onEdit:r?()=>r(e.metadata.id):void 0,onExport:a?()=>a(e.metadata.id):void 0,onDelete:n?()=>n(e.metadata.id):void 0,onDuplicate:l?()=>l(e.metadata.id):void 0,onRename:s?()=>s(e.metadata.id):void 0,onTogglePinned:i?()=>i(e.metadata.id):void 0},e.metadata.id))})}function eF(){return(0,C.jsxs)("div",{className:"card-retro p-4 animate-pulse",children:[(0,C.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-3",children:[(0,C.jsxs)("div",{className:"flex-1",children:[(0,C.jsx)("div",{className:"h-4 bg-retro-grid/30 rounded w-3/4"}),(0,C.jsx)("div",{className:"h-3 bg-retro-grid/20 rounded w-full mt-2"})]}),(0,C.jsx)("div",{className:"w-6 h-6 bg-retro-grid/20 rounded"})]}),(0,C.jsx)("div",{className:"h-16 bg-black/30 rounded mb-3"}),(0,C.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,C.jsx)("div",{className:"h-4 w-12 bg-retro-grid/20 rounded"}),(0,C.jsx)("div",{className:"h-4 w-16 bg-retro-grid/20 rounded"})]}),(0,C.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-retro-grid/30",children:[(0,C.jsx)("div",{className:"h-3 w-20 bg-retro-grid/20 rounded"}),(0,C.jsxs)("div",{className:"flex gap-1",children:[(0,C.jsx)("div",{className:"h-6 w-12 bg-retro-grid/20 rounded"}),(0,C.jsx)("div",{className:"h-6 w-14 bg-retro-grid/20 rounded"})]})]})]})}function eW({onClearFilters:e}){return(0,C.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,C.jsx)("div",{className:"w-16 h-16 rounded-full bg-retro-navy/50 flex items-center justify-center mb-4",children:(0,C.jsx)("svg",{className:"w-8 h-8 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,C.jsx)("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"No results found"}),(0,C.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Try adjusting your search or filters"}),e&&(0,C.jsx)("button",{onClick:e,className:"px-4 py-2 text-sm bg-retro-cyan/20 text-retro-cyan rounded hover:bg-retro-cyan/30 transition-colors",children:"Clear all filters"})]})}function eK({error:e,onRetry:t}){return(0,C.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,C.jsx)("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mb-4",children:(0,C.jsx)("svg",{className:"w-8 h-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,C.jsx)("h3",{className:"text-lg font-medium text-red-400 mb-2",children:"Failed to load library"}),(0,C.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:e}),t&&(0,C.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm bg-retro-cyan/20 text-retro-cyan rounded hover:bg-retro-cyan/30 transition-colors",children:"Try again"})]})}e.s(["calculateCharacterCount",()=>eE,"formatFileSize",()=>ek,"formatSize",()=>eN,"getSuggestedFilename",()=>eS,"isValidBinaryFile",()=>eM],92921),e.s(["EXPORT_FORMATS",0,[{id:"binary",name:"Binary ROM",description:"Raw binary data for direct ROM programming",extension:".bin",mimeType:"application/octet-stream"},{id:"c-header",name:"C/C++ Header",description:"Byte array for embedded development",extension:".h",mimeType:"text/x-c"},{id:"assembly",name:"Assembly Include",description:"Data bytes for 6502/Z80 assembly",extension:".asm",mimeType:"text/plain"},{id:"png",name:"PNG Image",description:"Character sheet image",extension:".png",mimeType:"image/png"}],"exportToAssembly",()=>eI,"exportToCHeader",()=>eD,"exportToPng",()=>eB,"getBitLayoutVisualization",()=>e_,"getDefaultAssemblyOptions",()=>eL,"getDefaultCHeaderOptions",()=>eR,"getDefaultPngOptions",()=>eA,"getHexPreview",()=>ez],44824),e.s([],79086),e.s(["LibraryCard",()=>eP,"LibraryCardCompact",()=>eT,"LibraryCardEmpty",()=>e$],38794),e.s(["LibraryGrid",()=>eO,"LibraryGridEmptyResults",()=>eW,"LibraryGridError",()=>eK],4941);var eH=e.i(79724);function eU({label:e,options:t,selected:r,onChange:a,placeholder:n="All",className:l="",showAllOption:s=!0,allOptionLabel:i="All"}){let[o,c]=(0,k.useState)(!1),d=(0,eH.useOutsideClick)(()=>c(!1),o),u=(0,k.useCallback)(e=>{r.includes(e)?a(r.filter(t=>t!==e)):a([...r,e])},[r,a]),h=(0,k.useCallback)(()=>{a([])},[a]),m=(0,k.useCallback)((e,t)=>{t.stopPropagation(),a(r.filter(t=>t!==e))},[r,a]),f=e=>{let r=t.find(t=>t.value===e);return r?.label??String(e)},x=r.length>0;return(0,C.jsxs)("div",{className:`relative ${l}`,ref:d,children:[(0,C.jsxs)("button",{type:"button",onClick:()=>c(!o),className:`
          flex items-center justify-between gap-2 w-full px-3 py-1.5
          bg-retro-dark border rounded text-sm text-left
          transition-colors
          ${o?"border-retro-cyan":"border-retro-grid/50 hover:border-retro-grid"}
          ${x?"text-white":"text-gray-400"}
        `,"aria-expanded":o,"aria-haspopup":"listbox",children:[(0,C.jsx)("span",{className:"truncate",children:x?`${e} (${r.length})`:n}),(0,C.jsx)("svg",{className:`w-4 h-4 flex-shrink-0 transition-transform ${o?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&(0,C.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:r.map(e=>(0,C.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-retro-cyan/20 text-retro-cyan rounded text-xs",children:[f(e),(0,C.jsx)("button",{type:"button",onClick:t=>m(e,t),className:"hover:text-white transition-colors","aria-label":`Remove ${f(e)}`,children:(0,C.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},String(e)))}),o&&(0,C.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl overflow-hidden",children:(0,C.jsxs)("div",{className:"max-h-60 overflow-y-auto py-1",children:[s&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("button",{type:"button",onClick:h,className:`
                    w-full flex items-center gap-2 px-3 py-2 text-sm text-left
                    transition-colors
                    ${!x?"bg-retro-cyan/10 text-retro-cyan":"text-gray-300 hover:bg-retro-purple/20"}
                  `,children:[(0,C.jsx)("span",{className:"w-4 h-4 flex items-center justify-center",children:!x&&(0,C.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})})}),i]}),(0,C.jsx)("div",{className:"h-px bg-retro-grid/30 mx-2 my-1"})]}),t.map(e=>{let t=r.includes(e.value);return(0,C.jsxs)("button",{type:"button",onClick:()=>u(e.value),className:`
                    w-full flex items-center gap-2 px-3 py-2 text-sm text-left
                    transition-colors
                    ${t?"bg-retro-cyan/10 text-retro-cyan":"text-gray-300 hover:bg-retro-purple/20"}
                  `,role:"option","aria-selected":t,children:[(0,C.jsx)("span",{className:`
                      w-4 h-4 flex items-center justify-center rounded border
                      ${t?"bg-retro-cyan border-retro-cyan":"border-gray-500"}
                    `,children:t&&(0,C.jsx)("svg",{className:"w-3 h-3 text-retro-dark",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.label]},String(e.value))}),0===t.length&&(0,C.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No options available"})]})})]})}function eG({searchQuery:e,onSearchChange:t,availableSizes:r,widthFilters:a,heightFilters:n,onSizeFilterChange:l,availableManufacturers:s=[],availableSystems:i=[],manufacturerFilters:o=[],systemFilters:c=[],onManufacturerFilterChange:d,onSystemFilterChange:u,totalCount:h,filteredCount:m}){let f=(0,k.useMemo)(()=>Array.from(new Set([...ex.map(e=>e.manufacturer),...s])).sort(),[s]),x=(0,k.useMemo)(()=>{if(0===o.length)return i.sort();let e=new Set;return o.forEach(t=>{ej(t).forEach(t=>e.add(t))}),i.forEach(t=>e.add(t)),Array.from(e).sort()},[o,i]),p=(0,k.useMemo)(()=>Array.from(new Set(r.map(e=>e.width))).sort((e,t)=>e-t),[r]),g=(0,k.useMemo)(()=>Array.from(new Set(r.map(e=>e.height))).sort((e,t)=>e-t),[r]),b=(0,k.useCallback)(()=>{t(""),l([],[]),d?.([]),u?.([])},[t,l,d,u]),X=e.length>0||a.length>0||n.length>0||o.length>0||c.length>0;return(0,C.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,C.jsxs)("div",{className:"relative",children:[(0,C.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Search character sets...",className:"w-full px-4 py-2 pl-10 bg-retro-navy/50 border border-retro-grid/50 rounded-lg text-sm text-gray-200 placeholder-gray-500 focus:outline-none focus:border-retro-cyan/50 transition-colors","aria-label":"Search character sets"}),(0,C.jsx)("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e&&(0,C.jsx)("button",{type:"button",onClick:()=>t(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300","aria-label":"Clear search",children:(0,C.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,C.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[(0,C.jsx)(eU,{label:"Width",options:p.map(e=>({value:e,label:`${e}px`})),selected:a,onChange:e=>l(e,n),placeholder:"Width",allOptionLabel:"Any width"}),(0,C.jsx)(eU,{label:"Height",options:g.map(e=>({value:e,label:`${e}px`})),selected:n,onChange:e=>l(a,e),placeholder:"Height",allOptionLabel:"Any height"}),d&&(0,C.jsx)(eU,{label:"Manufacturer",options:f.map(e=>({value:e,label:e})),selected:o,onChange:d,placeholder:"Manufacturer",allOptionLabel:"Any manufacturer"}),u&&(0,C.jsx)(eU,{label:"System",options:x.map(e=>({value:e,label:e})),selected:c,onChange:u,placeholder:"System",allOptionLabel:"Any system"})]}),(0,C.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,C.jsx)("span",{children:X?`Showing ${m} of ${h} character sets`:`${h} character set${1!==h?"s":""}`}),X&&(0,C.jsx)("button",{onClick:b,className:"text-retro-cyan hover:text-retro-pink transition-colors",children:"Clear filters"})]})]})}function eV({onFileSelect:e,selectedFile:t,loading:r=!1,error:a=null,className:n=""}){let[l,s]=(0,k.useState)(!1),[i,o]=(0,k.useState)(null),c=(0,k.useRef)(null),d=a||i,u=(0,k.useCallback)(async t=>{if(o(null),!eM(t))return void o("Invalid file type. Please select a binary ROM file (.bin, .rom, .chr, .fnt, .dat)");if(t.size>1048576)return void o("File too large. Maximum size is 1MB.");try{let r=await t.arrayBuffer();e(t,r)}catch{o("Failed to read file. Please try again.")}},[e]),h=(0,k.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),s(!1);let t=e.dataTransfer.files;t.length>0&&u(t[0])},[u]),m=(0,k.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),s(!0)},[]),f=(0,k.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),s(!1)},[]),x=(0,k.useCallback)(()=>{c.current?.click()},[]),p=(0,k.useCallback)(e=>{let t=e.target.files;t&&t.length>0&&u(t[0])},[u]),g=(0,k.useCallback)(e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),x())},[x]);return(0,C.jsxs)("div",{className:n,children:[(0,C.jsx)("input",{ref:c,type:"file",accept:".bin,.rom,.chr,.fnt,.dat",onChange:p,className:"hidden","aria-hidden":"true"}),(0,C.jsx)("div",{onClick:x,onDrop:h,onDragOver:m,onDragLeave:f,onKeyDown:g,role:"button",tabIndex:0,"aria-label":"Drop a ROM file or click to browse",className:`
          relative flex flex-col items-center justify-center
          p-8 sm:p-12
          border-2 border-dashed rounded-lg
          cursor-pointer
          transition-all
          ${l?"border-retro-cyan bg-retro-cyan/10":t?"border-retro-pink/50 bg-retro-pink/5":"border-retro-grid/50 hover:border-retro-cyan/50 bg-retro-navy/30"}
          ${d?"border-red-500/50 bg-red-500/5":""}
          ${r?"pointer-events-none opacity-50":""}
        `,children:r?(0,C.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,C.jsx)("div",{className:"w-12 h-12 border-2 border-retro-cyan border-t-transparent rounded-full animate-spin"}),(0,C.jsx)("span",{className:"text-sm text-gray-400",children:"Reading file..."})]}):t?(0,C.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,C.jsx)("div",{className:"w-16 h-16 rounded-lg bg-retro-pink/20 flex items-center justify-center",children:(0,C.jsx)("svg",{className:"w-8 h-8 text-retro-pink",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,C.jsxs)("div",{className:"text-center",children:[(0,C.jsx)("p",{className:"text-sm font-medium text-gray-200 truncate max-w-[200px]",children:t.name}),(0,C.jsx)("p",{className:"text-xs text-gray-500",children:ek(t.size)})]}),(0,C.jsx)("button",{type:"button",className:"text-xs text-retro-cyan hover:text-retro-pink transition-colors",children:"Choose a different file"})]}):(0,C.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,C.jsx)("div",{className:"w-16 h-16 rounded-full bg-retro-purple/20 flex items-center justify-center",children:(0,C.jsx)("svg",{className:"w-8 h-8 text-retro-pink",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,C.jsxs)("div",{className:"text-center",children:[(0,C.jsx)("p",{className:"text-sm text-gray-300",children:"Drag and drop a ROM file here"}),(0,C.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"or click to browse"})]}),(0,C.jsx)("div",{className:"text-[10px] text-gray-500",children:"Accepts: .bin, .rom, .chr, .fnt, .dat"})]})}),d&&(0,C.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-sm text-red-400",children:[(0,C.jsx)("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,C.jsx)("span",{children:d})]})]})}function eY({character:e,config:t,onPixelToggle:r,onPixelSet:a,onDragEnd:n,getPixelState:l,batchMode:s=!1,foregroundColor:i="#ffffff",backgroundColor:o="#000000",gridColor:c="#333333",gridThickness:d=1,zoom:u=20,className:h=""}){let m=(0,k.useRef)(null),[f,x]=(0,k.useState)(!1),[p,g]=(0,k.useState)(null),b=(0,k.useMemo)(()=>{if(!s||!l||!e)return;let r=new Set;for(let e=0;e<t.height;e++)for(let a=0;a<t.width;a++)"mixed"===l(e,a)&&r.add(`${e},${a}`);return r.size>0?r:void 0},[s,l,e,t.height,t.width]),X=(0,k.useCallback)((t,a)=>{f||(r?.(t,a),g(!e?.pixels[t]?.[a]),x(!0))},[f,r,e]),y=(0,k.useCallback)((e,t)=>{f&&null!==p&&a&&a(e,t,p)},[f,p,a]),w=(0,k.useCallback)(()=>{f&&(x(!1),g(null),n?.())},[f,n]);return e?(0,C.jsx)("div",{ref:m,className:`flex items-center justify-center h-full overflow-hidden bg-black/20 ${h}`,tabIndex:0,children:(0,C.jsx)("div",{className:"inline-block",onMouseLeave:w,onMouseUp:w,children:(0,C.jsx)(v.CharacterDisplay,{character:e,mode:"large",scale:u,foregroundColor:i,backgroundColor:o,gridColor:c,gridThickness:d,onPixelClick:X,onPixelDrag:y,onDragEnd:w,interactive:!0,mixedPixels:b})})}):(0,C.jsx)("div",{className:`flex items-center justify-center h-full ${h}`,children:(0,C.jsxs)("div",{className:"text-center text-gray-500",children:[(0,C.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6z"})}),(0,C.jsx)("p",{children:"No character selected"})]})})}function eq({characters:e,config:t,selectedIndex:r,batchSelection:a,onSelect:n,foregroundColor:l="#ffffff",backgroundColor:s="#000000",selectionColor:i="#00ffff",batchSelectionColor:o="#ff69b4",maxWidth:c=200,pixelScale:d=1,gap:u=1,collapsible:h=!0,defaultCollapsed:m=!1,className:f=""}){let x=(0,k.useRef)(null),p=(0,k.useRef)(null),[g,b]=(0,k.useState)(m),[X,y]=(0,k.useState)(null),v=t.width*d,w=t.height*d,j=v+u,N=w+u,S=Math.max(1,Math.floor(c/j)),M=Math.ceil(e.length/S),E=S*j-u,R=M*N-u;(0,k.useEffect)(()=>{let t=x.current;if(!t||g)return;let n=t.getContext("2d");n&&(t.width=E,t.height=R,n.fillStyle=s,n.fillRect(0,0,E,R),e.forEach((e,t)=>{let c=t%S*j,u=Math.floor(t/S)*N;n.fillStyle=s,n.fillRect(c,u,v,w),n.fillStyle=l,e.pixels.forEach((e,t)=>{e.forEach((e,r)=>{e&&n.fillRect(c+r*d,u+t*d,d,d)})}),a?.has(t)&&t!==r&&(n.strokeStyle=o,n.lineWidth=1,n.globalAlpha=.7,n.strokeRect(c+.5,u+.5,v-1,w-1),n.globalAlpha=1),t===r?(n.strokeStyle=i,n.lineWidth=2,n.strokeRect(c+1,u+1,v-2,w-2)):t!==X||a?.has(t)||(n.strokeStyle=i,n.lineWidth=1,n.globalAlpha=.5,n.strokeRect(c+.5,u+.5,v-1,w-1),n.globalAlpha=1)}))},[e,t,r,a,X,l,s,i,o,d,u,S,E,R,v,w,j,N,g]);let L=(0,k.useCallback)(t=>{if(!n)return;let r=x.current;if(!r)return;let a=r.getBoundingClientRect(),l=t.clientX-a.left,s=t.clientY-a.top,i=r.width/a.width,o=Math.floor(s*(r.height/a.height)/N)*S+Math.floor(l*i/j);o>=0&&o<e.length&&n(o)},[n,j,N,S,e.length]),A=(0,k.useCallback)(t=>{let r=x.current;if(!r)return;let a=r.getBoundingClientRect(),n=t.clientX-a.left,l=t.clientY-a.top,s=r.width/a.width,i=Math.floor(l*(r.height/a.height)/N)*S+Math.floor(n*s/j);i>=0&&i<e.length?y(i):y(null)},[j,N,S,e.length]),D=(0,k.useCallback)(()=>{y(null)},[]),I=(0,k.useCallback)(()=>{b(e=>!e)},[]);return(0,C.jsxs)("div",{className:`${f}`,ref:p,children:[h&&(0,C.jsxs)("button",{onClick:I,className:"w-full flex items-center justify-between p-2 text-sm text-gray-300 hover:text-retro-cyan transition-colors",children:[(0,C.jsx)("span",{className:"font-medium",children:"Overview"}),(0,C.jsx)("svg",{className:`w-4 h-4 transition-transform ${g?"":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!g&&(0,C.jsx)("div",{className:"p-2 bg-black/30 rounded overflow-auto",style:{maxHeight:"150px"},children:(0,C.jsx)("canvas",{ref:x,onClick:L,onMouseMove:A,onMouseLeave:D,className:"cursor-pointer",style:{width:E,height:R,imageRendering:"pixelated"}})})]})}function eJ({characters:e,config:t,selectedIndex:r,batchSelection:a,onSelect:n,onAddCharacter:l,onDeleteSelected:s,onSelectAll:i,onSelectNone:o,showAddButton:c=!0,foregroundColor:d="#ffffff",backgroundColor:u="#000000",className:h=""}){let m=a.size+1,f=m>1,[x,p]=(0,k.useState)(!1),g=(0,k.useCallback)(t=>{let a=e.length;if(0!==a)switch(t.key){case"ArrowUp":case"ArrowLeft":t.preventDefault(),n(r>0?r-1:a-1,t.shiftKey,t.metaKey||t.ctrlKey);break;case"ArrowDown":case"ArrowRight":t.preventDefault(),n(r<a-1?r+1:0,t.shiftKey,t.metaKey||t.ctrlKey);break;case"Delete":case"Backspace":t.preventDefault(),s?.();break;case"a":case"A":(t.ctrlKey||t.metaKey)&&t.preventDefault()}},[e.length,r,n,s]);return(0,C.jsxs)("div",{className:`flex flex-col h-full overflow-hidden ${h}`,onKeyDown:g,children:[(0,C.jsxs)("div",{className:"flex-shrink-0 p-3 border-b border-retro-grid/30",children:[(0,C.jsx)("div",{className:"flex items-center justify-between",children:(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Characters"}),(0,C.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.length,")"]})]})}),f&&(0,C.jsxs)("div",{className:"mt-1 text-xs text-retro-pink",children:[m," characters selected"]})]}),(0,C.jsxs)("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:[(0,C.jsx)("div",{className:"border-b border-retro-grid/30",children:(0,C.jsx)(eq,{characters:e,config:t,selectedIndex:r,batchSelection:a,onSelect:e=>n(e,!1),foregroundColor:d,backgroundColor:u,maxWidth:200,pixelScale:1,collapsible:!0,defaultCollapsed:!1})}),(0,C.jsxs)("div",{className:"border-b border-retro-grid/30",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("span",{className:"font-medium text-sm text-gray-300",children:"Characters"}),i&&(0,C.jsx)("button",{onClick:e=>{e.stopPropagation(),i()},className:"text-[10px] text-gray-500 hover:text-retro-cyan transition-colors",children:"All"}),o&&f&&(0,C.jsx)("button",{onClick:e=>{e.stopPropagation(),o()},className:"text-[10px] text-gray-500 hover:text-retro-pink transition-colors",children:"None"})]}),(0,C.jsx)("button",{onClick:()=>p(!x),className:"p-1 text-gray-400 hover:text-retro-cyan transition-colors","aria-label":x?"Expand characters":"Collapse characters",children:(0,C.jsx)("svg",{className:`w-4 h-4 transition-transform ${x?"":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),!x&&(0,C.jsx)("div",{className:"p-2",children:(0,C.jsx)(w.InteractiveCharacterGrid,{characters:e,config:t,selectedIndex:r,batchSelection:a,onSelect:n,showAddButton:c&&!!l,onAdd:l,foregroundColor:d,backgroundColor:u,showIndices:!1,smallScale:2,minColumns:8,maxColumns:10,gap:4,className:"max-h-[400px] overflow-y-auto"})})]})]})]})}function eZ({colors:e,onColorsChange:t,className:r=""}){let[a,n]=(0,k.useState)(!1),[l,s]=(0,k.useState)(()=>ec()),[i,o]=(0,k.useState)(()=>eu()),[c,d]=(0,k.useState)(!1),u=(0,eH.useOutsideClick)(()=>{n(!1),d(!1)},a),h=(0,k.useCallback)(e=>{"custom"===e.id?d(!0):(s(e.id),eo(e.id),t({foreground:e.foreground,background:e.background,gridColor:e.gridColor}),n(!1))},[t]),m=(0,k.useCallback)((e,r)=>{let a={...i,[e]:r};o(a),ed(a),s("custom"),eo("custom"),t(a)},[i,t]),f=ei(l),x=f?.name||"Custom";return(0,C.jsxs)("div",{className:`relative ${r}`,ref:u,children:[(0,C.jsxs)("button",{onClick:()=>n(!a),className:"flex items-center gap-2 px-3 py-1.5 bg-retro-navy/50 border border-retro-grid/50 rounded text-sm text-gray-300 hover:border-retro-grid transition-colors","aria-expanded":a,"aria-haspopup":"listbox",children:[(0,C.jsxs)("div",{className:"flex gap-0.5",children:[(0,C.jsx)("div",{className:"w-3 h-3 rounded-sm border border-white/20",style:{backgroundColor:e.foreground}}),(0,C.jsx)("div",{className:"w-3 h-3 rounded-sm border border-white/20",style:{backgroundColor:e.background}})]}),(0,C.jsx)("span",{className:"hidden sm:inline",children:x}),(0,C.jsx)("svg",{className:`w-3 h-3 transition-transform ${a?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&(0,C.jsx)("div",{className:"absolute right-0 mt-1 w-64 bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl z-50 overflow-hidden",children:c?(0,C.jsxs)("div",{className:"p-3 space-y-3",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsx)("span",{className:"text-sm text-gray-300",children:"Custom Colors"}),(0,C.jsx)("button",{onClick:()=>d(!1),className:"text-xs text-gray-500 hover:text-gray-300",children:"Back"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Foreground"}),(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("input",{type:"color",value:i.foreground,onChange:e=>m("foreground",e.target.value),className:"w-8 h-8 rounded cursor-pointer border-0 bg-transparent"}),(0,C.jsx)("input",{type:"text",value:i.foreground,onChange:e=>m("foreground",e.target.value),className:"flex-1 px-2 py-1 bg-retro-dark border border-retro-grid/50 rounded text-xs text-gray-300 font-mono"})]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Background"}),(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("input",{type:"color",value:i.background,onChange:e=>m("background",e.target.value),className:"w-8 h-8 rounded cursor-pointer border-0 bg-transparent"}),(0,C.jsx)("input",{type:"text",value:i.background,onChange:e=>m("background",e.target.value),className:"flex-1 px-2 py-1 bg-retro-dark border border-retro-grid/50 rounded text-xs text-gray-300 font-mono"})]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Grid Lines"}),(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("input",{type:"color",value:i.gridColor,onChange:e=>m("gridColor",e.target.value),className:"w-8 h-8 rounded cursor-pointer border-0 bg-transparent"}),(0,C.jsx)("input",{type:"text",value:i.gridColor,onChange:e=>m("gridColor",e.target.value),className:"flex-1 px-2 py-1 bg-retro-dark border border-retro-grid/50 rounded text-xs text-gray-300 font-mono"})]})]})]}):(0,C.jsx)("div",{className:"py-1 max-h-80 overflow-y-auto",children:en.map(e=>(0,C.jsxs)("button",{onClick:()=>h(e),className:`
                    w-full flex items-center gap-3 px-3 py-2 text-left text-sm
                    transition-colors
                    ${l===e.id?"bg-retro-cyan/10 text-retro-cyan":"text-gray-300 hover:bg-retro-purple/20"}
                  `,role:"option","aria-selected":l===e.id,children:["custom"!==e.id?(0,C.jsxs)("div",{className:"flex gap-0.5 flex-shrink-0",children:[(0,C.jsx)("div",{className:"w-4 h-4 rounded-sm border border-white/20",style:{backgroundColor:e.foreground}}),(0,C.jsx)("div",{className:"w-4 h-4 rounded-sm border border-white/20",style:{backgroundColor:e.background}})]}):(0,C.jsx)("div",{className:"w-[34px] h-4 flex items-center justify-center",children:(0,C.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})}),(0,C.jsx)("span",{className:"flex-1",children:e.name}),l===e.id&&(0,C.jsx)("svg",{className:"w-4 h-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})})]},e.id))})})]})}function eQ({characterSetName:e,isDirty:t,characterIndex:r,totalCharacters:a,batchMode:n=!1,zoom:l,minZoom:s=8,maxZoom:i=40,zoomStep:o=4,onZoomChange:c,colors:d,onColorsChange:u,onBack:h,className:m=""}){let f=r>=32&&r<=126,x=eC[r]||null;return(0,C.jsxs)("div",{className:`flex items-center gap-4 px-4 py-2 bg-retro-navy/50 border-b border-retro-grid/50 ${m}`,children:[(0,C.jsxs)("button",{onClick:h,className:"flex items-center gap-1 text-xs text-gray-400 hover:text-retro-cyan transition-colors whitespace-nowrap",children:[(0,C.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,C.jsx)("span",{className:"hidden sm:inline",children:"Back"})]}),(0,C.jsx)("div",{className:"w-px h-4 bg-retro-grid/50"}),(0,C.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-300 min-w-0",children:[(0,C.jsx)("span",{className:"truncate max-w-[150px] sm:max-w-[200px]",title:e,children:e}),t&&(0,C.jsx)("span",{className:"text-retro-pink flex-shrink-0",children:"*"})]}),(0,C.jsx)("div",{className:"w-px h-4 bg-retro-grid/50 hidden sm:block"}),(0,C.jsxs)("div",{className:"hidden sm:flex items-center gap-2 text-sm text-gray-400",children:[(0,C.jsxs)("span",{className:"whitespace-nowrap",children:["Char ",(0,C.jsx)("span",{className:"text-retro-cyan",children:r}),(0,C.jsxs)("span",{className:"text-gray-500",children:["/",a]})]}),f&&(0,C.jsxs)("span",{className:"px-1.5 py-0.5 bg-retro-purple/30 text-retro-cyan rounded text-xs font-mono",title:"Printable ASCII Character",children:["'",String.fromCharCode(r),"'"]}),x&&(0,C.jsxs)("span",{className:"px-1.5 py-0.5 text-xs bg-retro-pink/20 text-retro-pink rounded",title:"ASCII Control Character",children:[" ","(",x,")"]}),n&&(0,C.jsx)("span",{className:"px-1.5 py-0.5 text-xs bg-retro-pink/20 text-retro-pink rounded",children:"Batch"})]}),(0,C.jsx)("div",{className:"flex-1"}),(0,C.jsxs)("div",{className:"flex items-center gap-1",children:[(0,C.jsx)("button",{onClick:()=>{l>s&&c(Math.max(l-o,s))},disabled:l<=s,className:"p-1 text-gray-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Zoom out (-)",children:(0,C.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,C.jsxs)("span",{className:"text-xs text-gray-500 w-10 text-center",children:[l,"x"]}),(0,C.jsx)("button",{onClick:()=>{l<i&&c(Math.min(l+o,i))},disabled:l>=i,className:"p-1 text-gray-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Zoom in (+)",children:(0,C.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),(0,C.jsx)("div",{className:"w-px h-4 bg-retro-grid/50"}),(0,C.jsx)(eZ,{colors:d,onColorsChange:u})]})}function e0({className:e=""}){return(0,C.jsx)("div",{className:`flex items-center justify-center gap-4 px-4 py-1.5 bg-retro-navy/50 border-t border-retro-grid/50 ${e}`,children:(0,C.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-x-4 gap-y-1 text-[10px] text-gray-500",children:[{keys:"Arrow keys",action:"Navigate"},{keys:"Click",action:"Select"},{keys:"Shift+Click",action:"Multi-select"},{keys:"Del",action:"Delete"},{keys:"Ctrl+S",action:"Save"},{keys:"Ctrl+Z/Y",action:"Undo/Redo"},{keys:"?",action:"Help"}].map(({keys:e,action:t},r)=>(0,C.jsxs)("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[(0,C.jsx)("span",{className:"text-gray-400",children:e}),(0,C.jsxs)("span",{className:"hidden sm:inline",children:[": ",t]})]},r))})})}function e1(e,t={}){let{enabled:r=!0,target:a=null}=t,n=(0,k.useRef)(e);(0,k.useEffect)(()=>{n.current=e},[e]);let l=(0,k.useCallback)(e=>{let t=e.target?.tagName?.toLowerCase();if("input"!==t&&"textarea"!==t&&"select"!==t||e.ctrlKey||e.metaKey)for(let t of n.current){let r=e.key.toLowerCase()===t.key.toLowerCase(),a=!!t.ctrl===(e.ctrlKey||e.metaKey),n=!!t.shift===e.shiftKey,l=!!t.alt===e.altKey;if(r&&a&&n&&l){e.preventDefault(),t.action();return}}},[]);(0,k.useEffect)(()=>{if(!r)return;let e=a||window;return e.addEventListener("keydown",l),()=>{e.removeEventListener("keydown",l)}},[r,a,l])}function e2(e){let t=[],r="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);e.ctrl&&t.push(r?"â":"Ctrl"),e.alt&&t.push(r?"â¥":"Alt"),e.shift&&t.push(r?"â§":"Shift");let a=e.key;return t.push(a=" "===a?"Space":"ArrowUp"===a?"â":"ArrowDown"===a?"â":"ArrowLeft"===a?"â":"ArrowRight"===a?"â":"Escape"===a?"Esc":"Delete"===a?"Del":"Backspace"===a?"â«":a.toUpperCase()),t.join(r?"":"+")}function e4(e){return[{key:"z",ctrl:!0,action:e.undo,description:"Undo",context:"Editor"},{key:"z",ctrl:!0,shift:!0,action:e.redo,description:"Redo",context:"Editor"},{key:"y",ctrl:!0,action:e.redo,description:"Redo",context:"Editor"},{key:"s",ctrl:!0,action:e.save,description:"Save",context:"Editor"},{key:"r",action:e.rotateRight,description:"Rotate right",context:"Editor"},{key:"r",shift:!0,action:e.rotateLeft,description:"Rotate left",context:"Editor"},{key:"w",action:e.shiftUp,description:"Shift up",context:"Editor"},{key:"s",action:e.shiftDown,description:"Shift down",context:"Editor"},{key:"a",action:e.shiftLeft,description:"Shift left",context:"Editor"},{key:"d",action:e.shiftRight,description:"Shift right",context:"Editor"},{key:"i",action:e.invert,description:"Invert colors",context:"Editor"},{key:"h",action:e.flipHorizontal,description:"Flip horizontal",context:"Editor"},{key:"v",action:e.flipVertical,description:"Flip vertical",context:"Editor"},{key:"a",ctrl:!0,action:e.selectAll,description:"Select all",context:"Sidebar"},{key:"Delete",action:e.deleteSelected,description:"Delete selected",context:"Sidebar"},{key:"Backspace",action:e.deleteSelected,description:"Delete selected",context:"Sidebar"},{key:"n",ctrl:!0,action:e.addCharacter,description:"Add new character",context:"Editor"},{key:"?",action:e.showHelp,description:"Show keyboard shortcuts",context:"Global"}]}function e5({isOpen:e,onClose:t,shortcuts:r}){if((0,k.useEffect)(()=>{if(!e)return;let r=e=>{"Escape"===e.key&&(e.preventDefault(),t())};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e,t]),(0,k.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),!e)return null;let a=r.reduce((e,t)=>{let r=t.context||"General";return e[r]||(e[r]=[]),e[r].push(t),e},{}),n=["Editor","Sidebar","Global"],l=Object.keys(a).sort((e,t)=>{let r=n.indexOf(e),a=n.indexOf(t);return -1===r&&-1===a?e.localeCompare(t):-1===r?1:-1===a?-1:r-a});return(0,C.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,C.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,C.jsxs)("div",{className:"relative w-full max-w-lg bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl overflow-hidden",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-retro-grid/30",children:[(0,C.jsx)("h2",{className:"text-lg font-medium text-white",children:"Keyboard Shortcuts"}),(0,C.jsx)("button",{onClick:t,className:"p-1 text-gray-400 hover:text-white transition-colors","aria-label":"Close",children:(0,C.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,C.jsx)("div",{className:"p-4 max-h-[60vh] overflow-y-auto space-y-6",children:l.map(e=>(0,C.jsxs)("div",{children:[(0,C.jsx)("h3",{className:"text-sm font-medium text-retro-cyan mb-2",children:e}),(0,C.jsx)("div",{className:"space-y-1",children:a[e].map((t,r)=>(0,C.jsxs)("div",{className:"flex items-center justify-between py-1.5 px-2 rounded hover:bg-retro-purple/10",children:[(0,C.jsx)("span",{className:"text-sm text-gray-300",children:t.description}),(0,C.jsx)("kbd",{className:"px-2 py-0.5 text-xs font-mono bg-retro-dark border border-retro-grid/50 rounded text-gray-400",children:e2(t)})]},`${e}-${r}`))})]},e))}),(0,C.jsx)("div",{className:"px-4 py-3 border-t border-retro-grid/30 text-center",children:(0,C.jsxs)("span",{className:"text-xs text-gray-500",children:["Press ",(0,C.jsx)("kbd",{className:"px-1 py-0.5 bg-retro-dark border border-retro-grid/50 rounded text-gray-400",children:"Esc"})," or ",(0,C.jsx)("kbd",{className:"px-1 py-0.5 bg-retro-dark border border-retro-grid/50 rounded text-gray-400",children:"?"})," to close"]})})]})]})}function e3({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}function e8({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}function e6({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}function e7({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}function e9({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}function te({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{transform:"scaleX(-1)"},children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}function tt({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h8M8 12h8m-8 5h8M4 3v18m16-18v18"})})}function tr({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8v8M12 8v8m5-8v8M3 4h18M3 20h18"})})}function ta({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}function tn({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("rect",{x:"4",y:"4",width:"16",height:"16",rx:"1",strokeWidth:2})})}function tl({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,viewBox:"0 0 24 24",children:(0,C.jsx)("rect",{x:"4",y:"4",width:"16",height:"16",rx:"1",fill:"currentColor"})})}function ts({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}function ti({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}function to({className:e="w-4 h-4"}){return(0,C.jsxs)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,C.jsx)("circle",{cx:"12",cy:"12",r:"3",strokeWidth:2}),(0,C.jsx)("path",{strokeLinecap:"round",strokeWidth:2,d:"M12 2v4m0 12v4M2 12h4m12 0h4"})]})}function tc({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4l4 4m0-4H4v4m16-4l-4 4m4 0V4h-4m-12 16l4-4m-4 0v4h4m12 0l-4-4m4 0v4h-4"})})}function td({onClick:e,disabled:t,title:r,children:a,className:n=""}){return(0,C.jsx)("button",{onClick:e,disabled:t,title:r,className:`
        p-2 rounded transition-colors
        ${t?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-retro-cyan hover:bg-retro-purple/30"}
        ${n}
      `,children:a})}function tu(){return(0,C.jsx)("div",{className:"w-full h-px bg-retro-grid/30 my-2"})}function th({children:e}){return(0,C.jsx)("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider text-center mb-1",children:e})}function tm({onShift:e,onRotate:t,onFlipHorizontal:r,onFlipVertical:a,onInvert:n,onClear:l,onFill:s,onCenter:i,onScale:o,onDelete:c,onCopy:d,disabled:u=!1,className:h=""}){let m=(0,k.useCallback)(()=>e("up"),[e]),f=(0,k.useCallback)(()=>e("down"),[e]),x=(0,k.useCallback)(()=>e("left"),[e]),p=(0,k.useCallback)(()=>e("right"),[e]),g=(0,k.useCallback)(()=>t("left"),[t]),b=(0,k.useCallback)(()=>t("right"),[t]);return(0,C.jsxs)("div",{className:`
        flex flex-col items-center p-2 bg-retro-navy/50 border-l border-retro-grid/30 overflow-hidden
        ${h}
      `,children:[(0,C.jsx)(th,{children:"Shift"}),(0,C.jsxs)("div",{className:"flex flex-col items-center gap-0.5",children:[(0,C.jsx)(td,{onClick:m,disabled:u,title:"Shift Up (W)",children:(0,C.jsx)(e3,{})}),(0,C.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,C.jsx)(td,{onClick:x,disabled:u,title:"Shift Left (A)",children:(0,C.jsx)(e6,{})}),(0,C.jsx)(td,{onClick:i||(()=>{}),disabled:u||!i,title:"Center Content",children:(0,C.jsx)(to,{})}),(0,C.jsx)(td,{onClick:p,disabled:u,title:"Shift Right (D)",children:(0,C.jsx)(e7,{})})]}),(0,C.jsx)(td,{onClick:f,disabled:u,title:"Shift Down (S)",children:(0,C.jsx)(e8,{})})]}),(0,C.jsx)(tu,{}),(0,C.jsx)(th,{children:"Rotate"}),(0,C.jsxs)("div",{className:"flex items-center gap-1",children:[(0,C.jsx)(td,{onClick:g,disabled:u,title:"Rotate Left (Shift+R)",children:(0,C.jsx)(e9,{})}),(0,C.jsx)(td,{onClick:b,disabled:u,title:"Rotate Right (R)",children:(0,C.jsx)(te,{})})]}),(0,C.jsx)(tu,{}),(0,C.jsx)(th,{children:"Flip"}),(0,C.jsxs)("div",{className:"flex items-center gap-1",children:[(0,C.jsx)(td,{onClick:r,disabled:u,title:"Flip Horizontal (H)",children:(0,C.jsx)(tt,{})}),(0,C.jsx)(td,{onClick:a,disabled:u,title:"Flip Vertical (V)",children:(0,C.jsx)(tr,{})})]}),(0,C.jsx)(tu,{}),(0,C.jsx)(th,{children:"Effects"}),(0,C.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,C.jsx)(td,{onClick:n,disabled:u,title:"Invert Colors (I)",children:(0,C.jsx)(ta,{})}),(0,C.jsxs)("div",{className:"flex items-center gap-1",children:[(0,C.jsx)(td,{onClick:l,disabled:u,title:"Clear",children:(0,C.jsx)(tn,{})}),(0,C.jsx)(td,{onClick:s,disabled:u,title:"Fill",children:(0,C.jsx)(tl,{})})]})]}),o&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(tu,{}),(0,C.jsx)(th,{children:"Scale"}),(0,C.jsx)(td,{onClick:o,disabled:u,title:"Scale Character",children:(0,C.jsx)(tc,{})})]}),(d||c)&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(tu,{}),(0,C.jsx)(th,{children:"Char"}),(0,C.jsxs)("div",{className:"flex items-center gap-1",children:[d&&(0,C.jsx)(td,{onClick:d,disabled:u,title:"Copy from character set (C)",children:(0,C.jsx)(ti,{})}),c&&(0,C.jsx)(td,{onClick:c,disabled:u,title:"Delete character (Del)",className:"hover:text-red-400",children:(0,C.jsx)(ts,{})})]})]})]})}function tf({manufacturer:e,system:t,onManufacturerChange:r,onSystemChange:a,disabled:n=!1,className:l=""}){let[s,i]=(0,k.useState)(!1),[o,c]=(0,k.useState)(!1),[d,u]=(0,k.useState)(""),[h,m]=(0,k.useState)(""),f=(0,k.useMemo)(()=>ex.map(e=>e.manufacturer),[]),x=(0,k.useMemo)(()=>e?ej(e):[],[e]),p=e&&!f.includes(e),g=t&&!x.includes(t),b=(0,k.useCallback)(e=>{let t=e.target.value;"__custom__"===t?(i(!0),u("")):(r(t),a(""),i(!1))},[r,a]),X=(0,k.useCallback)(()=>{d.trim()&&(r(d.trim()),a(""),i(!1),u(""))},[d,r,a]),y=(0,k.useCallback)(()=>{i(!1),u("")},[]),v=(0,k.useCallback)(e=>{let t=e.target.value;"__custom__"===t?(c(!0),m("")):(a(t),c(!1))},[a]),w=(0,k.useCallback)(()=>{h.trim()&&(a(h.trim()),c(!1),m(""))},[h,a]),j=(0,k.useCallback)(()=>{c(!1),m("")},[]),N=(0,k.useCallback)((e,t)=>{"Enter"===e.key?(e.preventDefault(),t()):"Escape"===e.key&&(e.preventDefault(),s&&y(),o&&j())},[s,o,y,j]),S=`
    w-full px-3 py-2 bg-retro-navy/50 border border-retro-grid/50 rounded-lg
    text-sm text-gray-200 focus:outline-none focus:border-retro-cyan/50
    transition-colors disabled:opacity-50 disabled:cursor-not-allowed
  `,M=`
    flex-1 px-3 py-2 bg-retro-navy/50 border border-retro-grid/50 rounded-lg
    text-sm text-gray-200 placeholder-gray-500 focus:outline-none focus:border-retro-cyan/50
    transition-colors
  `,E=`
    px-3 py-2 text-sm rounded-lg transition-colors
  `;return(0,C.jsxs)("div",{className:`space-y-4 ${l}`,children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Manufacturer"}),s?(0,C.jsxs)("div",{className:"flex gap-2",children:[(0,C.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),onKeyDown:e=>N(e,X),placeholder:"Enter manufacturer name...",className:M,autoFocus:!0,disabled:n}),(0,C.jsx)("button",{onClick:X,disabled:n||!d.trim(),className:`${E} bg-retro-cyan/20 text-retro-cyan hover:bg-retro-cyan/30 disabled:opacity-50`,children:"Add"}),(0,C.jsx)("button",{onClick:y,disabled:n,className:`${E} bg-retro-grid/20 text-gray-400 hover:bg-retro-grid/30`,children:"Cancel"})]}):(0,C.jsxs)("select",{value:p?"":e,onChange:b,disabled:n,className:S,children:[(0,C.jsx)("option",{value:"",children:"Select manufacturer..."}),f.map(e=>(0,C.jsx)("option",{value:e,children:e},e)),(0,C.jsx)("option",{value:"__custom__",children:"Other (custom)..."}),p&&(0,C.jsxs)("option",{value:e,disabled:!0,children:[e," (custom)"]})]}),p&&!s&&(0,C.jsxs)("div",{className:"mt-1.5 flex items-center gap-2",children:[(0,C.jsxs)("span",{className:"text-xs text-gray-500",children:["Custom: ",(0,C.jsx)("span",{className:"text-retro-cyan",children:e})]}),(0,C.jsx)("button",{onClick:()=>{r(""),a("")},className:"text-xs text-gray-500 hover:text-retro-pink",disabled:n,children:"Clear"})]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"System"}),o?(0,C.jsxs)("div",{className:"flex gap-2",children:[(0,C.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),onKeyDown:e=>N(e,w),placeholder:"Enter system name...",className:M,autoFocus:!0,disabled:n}),(0,C.jsx)("button",{onClick:w,disabled:n||!h.trim(),className:`${E} bg-retro-cyan/20 text-retro-cyan hover:bg-retro-cyan/30 disabled:opacity-50`,children:"Add"}),(0,C.jsx)("button",{onClick:j,disabled:n,className:`${E} bg-retro-grid/20 text-gray-400 hover:bg-retro-grid/30`,children:"Cancel"})]}):(0,C.jsxs)("select",{value:g?"":t,onChange:v,disabled:n||!e,className:S,children:[(0,C.jsx)("option",{value:"",children:e?"Select system...":"Select a manufacturer first..."}),x.map(e=>(0,C.jsx)("option",{value:e,children:e},e)),e&&(0,C.jsx)("option",{value:"__custom__",children:"Other (custom)..."}),g&&(0,C.jsxs)("option",{value:t,disabled:!0,children:[t," (custom)"]})]}),g&&!o&&(0,C.jsxs)("div",{className:"mt-1.5 flex items-center gap-2",children:[(0,C.jsxs)("span",{className:"text-xs text-gray-500",children:["Custom: ",(0,C.jsx)("span",{className:"text-retro-cyan",children:t})]}),(0,C.jsx)("button",{onClick:()=>a(""),className:"text-xs text-gray-500 hover:text-retro-pink",disabled:n,children:"Clear"})]})]})]})}function tx({isOpen:e,onClose:t,metadata:r,onSave:a}){let[n,l]=(0,k.useState)(r.name),[s,i]=(0,k.useState)(r.description),[o,c]=(0,k.useState)(r.source),[d,u]=(0,k.useState)(r.manufacturer),[h,m]=(0,k.useState)(r.system),[f,x]=(0,k.useState)(r.isPinned??!1),[p,g]=(0,k.useState)(!1);(0,k.useEffect)(()=>{e&&(l(r.name),i(r.description),c(r.source),u(r.manufacturer),m(r.system),x(r.isPinned??!1))},[e,r]);let b=async()=>{if(n.trim()){g(!0);try{await a({name:n.trim(),description:s.trim(),source:o.trim()||"yourself",manufacturer:d,system:h,isPinned:f}),t()}finally{g(!1)}}};return e?(0,C.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,C.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,C.jsxs)("div",{className:"relative w-full max-w-md bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-retro-grid/30",children:[(0,C.jsx)("h2",{className:"text-lg font-medium text-white",children:"Edit Metadata"}),(0,C.jsx)("button",{onClick:t,className:"p-1 text-gray-400 hover:text-white transition-colors",children:(0,C.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,C.jsxs)("div",{className:"p-4 space-y-4",children:[(0,C.jsxs)("div",{children:[(0,C.jsxs)("label",{className:"block text-sm text-gray-300 mb-1",children:["Name ",(0,C.jsx)("span",{className:"text-retro-pink",children:"*"})]}),(0,C.jsx)("input",{type:"text",value:n,onChange:e=>l(e.target.value),placeholder:"Character set name",className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white placeholder-gray-500 focus:outline-none focus:border-retro-cyan",autoFocus:!0})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Description"}),(0,C.jsx)("textarea",{value:s,onChange:e=>i(e.target.value),placeholder:"Optional description",rows:2,className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white placeholder-gray-500 focus:outline-none focus:border-retro-cyan resize-none"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Manufacturer & System"}),(0,C.jsx)(tf,{manufacturer:d,system:h,onManufacturerChange:u,onSystemChange:m})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Source / Attribution"}),(0,C.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"yourself",className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white placeholder-gray-500 focus:outline-none focus:border-retro-cyan"})]}),(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm text-gray-300",children:"Pin to top"}),(0,C.jsx)("p",{className:"text-xs text-gray-500",children:"Pinned items appear first in search results"})]}),(0,C.jsx)("button",{type:"button",onClick:()=>x(!f),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-retro-cyan focus:ring-offset-2 focus:ring-offset-retro-dark ${f?"bg-retro-pink border-retro-pink":"bg-retro-purple/50 border-retro-purple"}`,role:"switch","aria-checked":f,children:(0,C.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full shadow ring-0 transition duration-200 ease-in-out ${f?"translate-x-5 bg-white":"translate-x-0 bg-gray-400"}`})})]})]}),(0,C.jsxs)("div",{className:"flex gap-3 p-4 border-t border-retro-grid/30",children:[(0,C.jsx)("button",{onClick:t,className:"flex-1 px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,C.jsx)("button",{onClick:b,disabled:!n.trim()||p,className:"flex-1 px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Saving...":"Save"})]})]})]}):null}e.s(["LibraryFilters",()=>eG],93949),e.s(["ImportDropZone",()=>eV],25544),e.s(["EditorCanvas",()=>eY],60441),e.s(["EditorSidebar",()=>eJ],42187),e.s(["EditorHeader",()=>eQ],87355),e.s(["EditorFooter",()=>e0],45835),e.s(["createEditorShortcuts",()=>e4,"formatShortcut",()=>e2,"useKeyboardShortcuts",()=>e1],3573),e.s(["KeyboardShortcutsHelp",()=>e5],43237),e.s(["TransformToolbar",()=>tm],99401),e.s(["ManufacturerSystemSelect",()=>tf],87188),e.s(["MetadataEditModal",()=>tx],16244);let tp=["tl","tc","tr","ml","mc","mr","bl","bc","br"];function tg({isOpen:e,onClose:t,currentWidth:r,currentHeight:a,onResize:n}){let[l,s]=(0,k.useState)(r),[i,o]=(0,k.useState)(a),[c,d]=(0,k.useState)("tl"),u=(0,k.useCallback)(()=>{l>0&&i>0&&(n(l,i,c),t())},[l,i,c,n,t]),h=(0,k.useCallback)(e=>{"Escape"===e.key?t():"Enter"===e.key&&u()},[t,u]);if(!e)return null;let m=l!==r||i!==a;return(0,C.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onKeyDown:h,children:[(0,C.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,C.jsxs)("div",{className:"relative w-full max-w-sm bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl p-6",children:[(0,C.jsx)("h2",{className:"text-lg font-medium text-white mb-4",children:"Resize Characters"}),(0,C.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Width"}),(0,C.jsx)("input",{type:"number",min:1,max:32,value:l,onChange:e=>s(Math.max(1,Math.min(32,parseInt(e.target.value)||1))),className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan",autoFocus:!0})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Height"}),(0,C.jsx)("input",{type:"number",min:1,max:32,value:i,onChange:e=>o(Math.max(1,Math.min(32,parseInt(e.target.value)||1))),className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan"})]})]}),(0,C.jsxs)("div",{className:"mb-6",children:[(0,C.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Anchor Position"}),(0,C.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Select where to anchor existing content when resizing"}),(0,C.jsx)("div",{className:"grid grid-cols-3 gap-1 w-32 mx-auto",children:tp.map(e=>{let t=c===e;return(0,C.jsx)("button",{type:"button",onClick:()=>d(e),className:`
                    w-10 h-10 rounded border-2 transition-all
                    flex items-center justify-center
                    ${t?"border-retro-cyan bg-retro-cyan/20":"border-retro-grid/50 bg-retro-dark hover:border-retro-grid"}
                  `,title:{tl:"Top Left",tc:"Top Center",tr:"Top Right",ml:"Middle Left",mc:"Middle Center",mr:"Middle Right",bl:"Bottom Left",bc:"Bottom Center",br:"Bottom Right"}[e],children:(0,C.jsx)("div",{className:`
                      w-3 h-3 rounded-sm transition-colors
                      ${t?"bg-retro-cyan":"bg-gray-600"}
                    `})},e)})})]}),(0,C.jsx)("p",{className:"text-xs text-gray-500 mb-4 text-center h-4",children:m?l>r||i>a?"New pixels will be added with background color":l<r||i<a?"Some pixels will be cropped":"No changes":"No changes"}),(0,C.jsxs)("div",{className:"flex gap-3",children:[(0,C.jsx)("button",{onClick:t,className:"flex-1 px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,C.jsx)("button",{onClick:u,disabled:!m||l<1||i<1,className:"flex-1 px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply"})]})]})]})}function tb({currentWidth:e,currentHeight:t,onSelect:r,className:a=""}){let[n,l]=(0,k.useState)(!1),s=(0,k.useRef)(null);(0,k.useEffect)(()=>{function e(e){s.current&&!s.current.contains(e.target)&&l(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let i=function(){let e={};for(let t of eg)e[t.manufacturer]||(e[t.manufacturer]=[]),e[t.manufacturer].push(t);return e}(),o=(r,a)=>e===r&&t===a;return(0,C.jsxs)("div",{className:`relative ${a}`,ref:s,children:[(0,C.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[[{label:"8x8",width:8,height:8},{label:"8x16",width:8,height:16},{label:"5x7",width:5,height:7}].map(e=>(0,C.jsx)("button",{type:"button",onClick:()=>r(e.width,e.height),className:`
              px-2 py-1 text-xs rounded border transition-colors
              ${o(e.width,e.height)?"border-retro-pink bg-retro-pink/10 text-retro-pink":"border-retro-grid/50 text-gray-400 hover:border-retro-grid"}
            `,children:e.label},e.label)),(0,C.jsxs)("button",{type:"button",onClick:()=>l(!n),className:"px-2 py-1 text-xs rounded border border-retro-grid/50 text-gray-400 hover:border-retro-grid flex items-center gap-1",children:["More",(0,C.jsx)("svg",{className:`w-3 h-3 transition-transform ${n?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),n&&(0,C.jsxs)("div",{className:"absolute z-10 left-0 top-full mt-1 w-64 max-h-80 overflow-y-auto bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl",children:[(0,C.jsxs)("div",{className:"p-2 border-b border-retro-grid/30",children:[(0,C.jsx)("div",{className:"text-[10px] text-gray-500 uppercase mb-1",children:"Standard Formats"}),(0,C.jsx)("div",{className:"flex flex-wrap gap-1",children:ev.map(e=>(0,C.jsxs)("button",{onClick:()=>{r(e.width,e.height),l(!1)},className:`
                    px-2 py-1 text-xs rounded transition-colors
                    ${o(e.width,e.height)?"bg-retro-pink/20 text-retro-pink":"text-gray-400 hover:bg-retro-grid/20"}
                  `,title:e.systems.join(", "),children:[e.width,"x",e.height]},e.name))})]}),Object.entries(i).filter(([,e])=>e.length>0).map(([e,t])=>(0,C.jsxs)("div",{className:"p-2 border-b border-retro-grid/30 last:border-0",children:[(0,C.jsx)("div",{className:"text-[10px] text-gray-500 uppercase mb-1",children:e}),(0,C.jsx)("div",{className:"flex flex-wrap gap-1",children:t.map(e=>(0,C.jsx)("button",{onClick:()=>{r(e.width,e.height),l(!1)},className:`
                        px-2 py-1 text-xs rounded transition-colors
                        ${o(e.width,e.height)?"bg-retro-cyan/20 text-retro-cyan":"text-gray-400 hover:bg-retro-grid/20"}
                      `,children:e.system},`${e.system}-${e.width}x${e.height}`))})]},e))]})]})}function tX({currentCount:e,onSelect:t,className:r=""}){let[a,n]=(0,k.useState)(!1),l=(0,k.useRef)(null);(0,k.useEffect)(()=>{function e(e){l.current&&!l.current.contains(e.target)&&n(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let s=function(){let e={};for(let t of eb)e[t.manufacturer]||(e[t.manufacturer]=[]),e[t.manufacturer].push(t);return e}();return(0,C.jsxs)("div",{className:`relative ${r}`,ref:l,children:[(0,C.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[[{label:"64",count:64},{label:"128",count:128},{label:"256",count:256},{label:"512",count:512}].map(r=>(0,C.jsx)("button",{type:"button",onClick:()=>t(r.count),className:`
              px-2 py-1 text-xs rounded border transition-colors
              ${e===r.count?"border-retro-cyan bg-retro-cyan/10 text-retro-cyan":"border-retro-grid/50 text-gray-400 hover:border-retro-grid"}
            `,children:r.label},r.label)),(0,C.jsxs)("button",{type:"button",onClick:()=>n(!a),className:"px-2 py-1 text-xs rounded border border-retro-grid/50 text-gray-400 hover:border-retro-grid flex items-center gap-1",children:["More",(0,C.jsx)("svg",{className:`w-3 h-3 transition-transform ${a?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),a&&(0,C.jsxs)("div",{className:"absolute z-10 left-0 top-full mt-1 w-64 max-h-80 overflow-y-auto bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl",children:[(0,C.jsxs)("div",{className:"p-2 border-b border-retro-grid/30",children:[(0,C.jsx)("div",{className:"text-[10px] text-gray-500 uppercase mb-1",children:"Standard Counts"}),(0,C.jsx)("div",{className:"flex flex-wrap gap-1",children:ew.map(r=>(0,C.jsx)("button",{onClick:()=>{t(r.count),n(!1)},className:`
                    px-2 py-1 text-xs rounded transition-colors
                    ${e===r.count?"bg-retro-cyan/20 text-retro-cyan":"text-gray-400 hover:bg-retro-grid/20"}
                  `,title:r.systems.join(", "),children:r.count},r.name))})]}),Object.entries(s).filter(([,e])=>e.length>0).map(([r,a])=>(0,C.jsxs)("div",{className:"p-2 border-b border-retro-grid/30 last:border-0",children:[(0,C.jsx)("div",{className:"text-[10px] text-gray-500 uppercase mb-1",children:r}),(0,C.jsx)("div",{className:"flex flex-wrap gap-1",children:a.map(r=>(0,C.jsx)("button",{onClick:()=>{t(r.count),n(!1)},className:`
                        px-2 py-1 text-xs rounded transition-colors
                        ${e===r.count?"bg-retro-cyan/20 text-retro-cyan":"text-gray-400 hover:bg-retro-grid/20"}
                      `,title:`${r.count} characters`,children:r.system},`${r.system}-${r.count}`))})]},r))]})]})}function ty(){let[e,t]=(0,k.useState)([]),[r,a]=(0,k.useState)(!0),[n,l]=(0,k.useState)(null),[s,i]=(0,k.useState)([]),o=(0,k.useCallback)(async()=>{try{if(a(!0),l(null),await K.initialize(),await K.isEmpty()){let e,t,r,a;for(let n of[(e=Date.now(),{metadata:{id:"c64-uppercase",name:"C64 Uppercase",description:"Commodore 64 uppercase character set (representative sample)",source:"RetroStack",manufacturer:"Commodore",system:"C64",createdAt:e,updatedAt:e,isBuiltIn:!0},config:{width:8,height:8,padding:"right",bitDirection:"ltr"},binaryData:z(em())}),(t=Date.now(),{metadata:{id:"apple2-charset",name:"Apple II",description:"Apple II character set (representative sample)",source:"RetroStack",manufacturer:"Apple",system:"Apple II",createdAt:t,updatedAt:t,isBuiltIn:!0},config:{width:8,height:8,padding:"right",bitDirection:"ltr"},binaryData:z(em())}),(r=Date.now(),{metadata:{id:"zx-spectrum-charset",name:"ZX Spectrum",description:"ZX Spectrum character set (representative sample)",source:"RetroStack",manufacturer:"Sinclair",system:"ZX Spectrum",createdAt:r,updatedAt:r,isBuiltIn:!0},config:{width:8,height:8,padding:"right",bitDirection:"ltr"},binaryData:z(em())}),(a=Date.now(),{metadata:{id:"ibm-cga-charset",name:"IBM PC CGA",description:"IBM PC CGA 8x8 character set (representative sample)",source:"RetroStack",manufacturer:"IBM",system:"PC CGA",createdAt:a,updatedAt:a,isBuiltIn:!0},config:{width:8,height:8,padding:"right",bitDirection:"ltr"},binaryData:z(em())})])await K.save(n)}let e=await K.getAll();t(e);let r=await K.getAvailableSizes();i(r)}catch(e){l(e instanceof Error?e.message:"Failed to load library")}finally{a(!1)}},[]);(0,k.useEffect)(()=>{o()},[o]);let c=(0,k.useCallback)(async()=>{await o()},[o]),d=(0,k.useCallback)(async e=>{try{let t=await K.getById(e);if(!t)return null;return T(t)}catch(e){return console.error("Failed to get character set:",e),null}},[]),u=(0,k.useCallback)(async e=>{try{let t=P(e),r=await K.save(t);return await c(),r}catch(e){throw Error(e instanceof Error?e.message:"Failed to save character set")}},[c]),h=(0,k.useCallback)(async(e,t)=>{try{let r={...e,metadata:{...e.metadata,id:A(),name:t,createdAt:Date.now(),updatedAt:Date.now(),isBuiltIn:!1,source:"yourself"}},a=P(r),n=await K.save(a);return await c(),n}catch(e){throw Error(e instanceof Error?e.message:"Failed to save character set")}},[c]),m=(0,k.useCallback)(async(e,t)=>{try{let r=await K.getById(e);if(!r)throw Error("Character set not found");let a={...r,metadata:{...r.metadata,name:t,updatedAt:Date.now()}};await K.save(a),await c()}catch(e){throw Error(e instanceof Error?e.message:"Failed to rename character set")}},[c]),f=(0,k.useCallback)(async e=>{try{await K.delete(e),await c()}catch(e){throw Error(e instanceof Error?e.message:"Failed to delete character set")}},[c]),x=(0,k.useCallback)(async e=>{try{await K.togglePinned(e),await c()}catch(e){throw Error(e instanceof Error?e.message:"Failed to toggle pinned state")}},[c]),p=(0,k.useCallback)(async t=>t.trim()?K.search(t):e,[e]),g=(0,k.useCallback)(async(t,r)=>null===t&&null===r?e:K.filterBySize(t,r),[e]);return{characterSets:e,loading:r,error:n,refresh:c,getById:d,save:u,saveAs:h,rename:m,deleteSet:f,togglePinned:x,search:p,filterBySize:g,availableSizes:s,nameExists:(0,k.useCallback)(async(e,t)=>K.nameExists(e,t),[])}}function tv(e){return JSON.parse(JSON.stringify(e))}function tw(e){let{state:t,setState:r,resetState:a,undo:n,redo:l,canUndo:s,canRedo:i}=function(e,t=1/0){let[r,a]=(0,k.useState)([]),[n,l]=(0,k.useState)([]),[s,i]=(0,k.useState)(e),o=(0,k.useCallback)(e=>{a(e=>{let r=[...e,s];return r.length>t&&(r=r.slice(-t)),r}),l([]),i(e)},[s,t]),c=(0,k.useCallback)(e=>{a([]),l([]),i(e)},[]),d=(0,k.useCallback)(()=>{a(e=>{if(0===e.length)return e;let t=e[e.length-1],r=e.slice(0,-1);return l(e=>[s,...e]),i(t),r})},[s]),u=(0,k.useCallback)(()=>{l(e=>{if(0===e.length)return e;let t=e[0],r=e.slice(1);return a(e=>[...e,s]),i(t),r})},[s]),h=(0,k.useCallback)(()=>{a([]),l([])},[]);return{state:s,setState:o,resetState:c,undo:d,redo:u,canUndo:r.length>0,canRedo:n.length>0,historyLength:r.length+n.length,clearHistory:h}}(e?{characters:e.characters.map(R),config:{...e.config}}:{characters:[],config:{width:8,height:8,padding:"right",bitDirection:"ltr"}}),[o,c]=(0,k.useState)(0),[d,u]=(0,k.useState)(new Set),[h,m]=(0,k.useState)(!1),[,f]=(0,k.useState)(null),x=(0,k.useMemo)(()=>{let e=new Set(d);return e.add(o),e},[o,d]),p=(0,k.useCallback)(e=>{r(e(tv(t))),m(!0)},[t,r]),[g,b]=(0,k.useState)(null),X=(0,k.useCallback)((e,t,r=!1)=>{if(r)u(t=>{let r=new Set(t);if(e===o){if(r.size>0){let[e]=r;r.delete(e),r.add(o),c(e)}}else r.has(e)?r.delete(e):r.add(e);return r});else if(t){let t=g??o,r=Math.min(t,e),a=Math.max(t,e),n=new Set;for(let e=r;e<=a;e++)n.add(e);c(e),n.delete(e),u(n)}else c(e),b(e),u(new Set)},[o,g]),y=(0,k.useCallback)(()=>{u(new Set)},[]),v=(0,k.useCallback)(()=>{u(new Set(Array.from({length:t.characters.length},(e,t)=>t)))},[t.characters.length]),w=(0,k.useCallback)((e,t)=>{p(r=>{if(x.size>1)r.characters=et(r.characters,x,e,t);else{let a=r.characters[o];a&&(r.characters[o]=J(a,e,t))}return r})},[p,o,x]),j=(0,k.useCallback)((e,t,r)=>{p(a=>{for(let n of x){let l=a.characters[n];l&&(a.characters[n]=Z(l,e,t,r))}return a})},[p,x]),C=(0,k.useCallback)((e,r)=>ee(t.characters,x,e,r),[t.characters,x]),N=(0,k.useCallback)(e=>{p(t=>(t.characters=Q(t.characters,x,t=>H(t,e)),t))},[p,x]),S=(0,k.useCallback)((e,t=!0)=>{p(r=>(r.characters=Q(r.characters,x,r=>U(r,e,t)),r))},[p,x]),M=(0,k.useCallback)(()=>{p(e=>(e.characters=Q(e.characters,x,V),e))},[p,x]),L=(0,k.useCallback)(()=>{p(e=>(e.characters=Q(e.characters,x,Y),e))},[p,x]),A=(0,k.useCallback)(()=>{p(e=>(e.characters=Q(e.characters,x,q),e))},[p,x]),D=(0,k.useCallback)(()=>{p(e=>{let{width:t,height:r}=e.config;return e.characters=Q(e.characters,x,()=>E(t,r)),e})},[p,x]),I=(0,k.useCallback)(()=>{p(e=>{let{width:t,height:r}=e.config;return e.characters=Q(e.characters,x,()=>({pixels:Array.from({length:r},()=>Array(t).fill(!0))})),e})},[p,x]),B=(0,k.useCallback)(()=>{p(e=>(e.characters=Q(e.characters,x,er),e))},[p,x]),z=(0,k.useCallback)((e,t,r)=>{p(a=>(a.characters=Q(a.characters,x,a=>ea(a,e,t,r)),a))},[p,x]),_=(0,k.useCallback)(()=>{p(e=>{let{width:t,height:r}=e.config;return e.characters=[...e.characters,E(t,r)],e}),c(t.characters.length),u(new Set)},[p,t.characters.length]),P=(0,k.useCallback)(e=>{0!==e.length&&(p(t=>(t.characters=[...t.characters,...e.map(e=>R(e))],t)),c(t.characters.length),u(new Set))},[p,t.characters.length]),T=(0,k.useCallback)(()=>{t.characters.length<=1||(p(e=>(e.characters=e.characters.filter((e,t)=>!x.has(t)),e)),c(Math.min(o,t.characters.length-x.size-1)),u(new Set))},[p,x,t.characters.length,o]),$=(0,k.useCallback)((e,t)=>{p(r=>{let a=r.characters[e];return a&&t>=0&&t<r.characters.length&&(r.characters[t]=R(a)),r})},[p]),O=(0,k.useCallback)((e,t,r)=>{p(a=>(a.characters=a.characters.map(a=>G(a,e,t,r)),a.config={...a.config,width:e,height:t},a))},[p]),F=(0,k.useCallback)((e,t)=>{p(r=>(e>=0&&e<r.characters.length&&(r.characters[e]=R(t)),r))},[p]),W=(0,k.useCallback)(e=>{p(t=>(t.characters=e.map(R),t))},[p]),K=(0,k.useCallback)(()=>{m(!1),f(tv(t))},[t]),en=(0,k.useCallback)(e=>{a({characters:e.characters.map(R),config:{...e.config}}),c(0),b(null),u(new Set),m(!1),f(null)},[a]);return{characters:t.characters,config:t.config,selectedIndex:o,setSelectedIndex:c,batchSelection:d,toggleBatchSelection:X,clearBatchSelection:y,selectAll:v,toggleSelectedPixel:w,setSelectedPixel:j,getSelectedPixelState:C,rotateSelected:N,shiftSelected:S,invertSelected:M,flipSelectedHorizontal:L,flipSelectedVertical:A,clearSelected:D,fillSelected:I,centerSelected:B,scaleSelected:z,selectedIndices:x,addCharacter:_,addCharacters:P,deleteSelected:T,copyCharacter:$,resizeCharacters:O,updateCharacter:F,setCharacters:W,undo:n,redo:l,canUndo:s,canRedo:i,isDirty:h,markSaved:K,reset:en}}e.s(["ResizeModal",()=>tg],46628),e.s(["SizePresetDropdown",()=>tb],38910),e.s(["CharacterCountPresetDropdown",()=>tX],56859),e.s(["useCharacterLibrary",()=>ty],66811),e.s(["useCharacterEditor",()=>tw],83621);let tj="character-editor-autosave";function tC(e){let{characterSetId:t,characters:r,config:a,selectedIndex:n,isDirty:l,enabled:s=!0}=e,[i,o]=(0,k.useState)(null),c=(0,k.useRef)(0),d=(0,k.useRef)(null);(0,k.useEffect)(()=>{if(t)try{let e=localStorage.getItem(tj);if(e){let r=JSON.parse(e);r.characterSetId===t&&r.isDirty&&o(r)}}catch{}},[t]);let u=(0,k.useCallback)(()=>{if(t&&s&&0!==r.length)try{let e=z(B(r,a)),s={characterSetId:t,binaryData:e,config:a,selectedIndex:n,timestamp:Date.now(),isDirty:l};localStorage.setItem(tj,JSON.stringify(s)),c.current=Date.now()}catch(e){console.error("Auto-save failed:",e)}},[t,r,a,n,l,s]);(0,k.useEffect)(()=>{if(s&&l&&t)return d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{u()},Math.max(0,3e4-(Date.now()-c.current))),()=>{d.current&&clearTimeout(d.current)}},[s,l,t,u]),(0,k.useEffect)(()=>{if(!s||!l)return;let e=e=>{u(),e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[s,l,u]);let h=(0,k.useCallback)(()=>(o(null),i),[i]);return{hasRecoveryData:null!==i,recoveryData:i,recover:h,discard:(0,k.useCallback)(()=>{o(null);try{localStorage.removeItem(tj)}catch{}},[]),clearAutoSave:(0,k.useCallback)(()=>{try{localStorage.removeItem(tj)}catch{}},[]),saveNow:u}}e.s(["useAutoSave",()=>tC],54750),e.s([],7259);let tk=["tl","tc","tr","ml","mc","mr","bl","bc","br"];function tN({isOpen:e,onClose:t,currentConfig:r,onImport:a}){let{characterSets:n,loading:l}=ty(),[s,i]=(0,k.useState)("select-set"),[o,c]=(0,k.useState)(null),[d,u]=(0,k.useState)(""),[h,m]=(0,k.useState)(new Set),[f,x]=(0,k.useState)(null),[p,g]=(0,k.useState)("tl");(0,k.useEffect)(()=>{e||(i("select-set"),c(null),u(""),m(new Set),x(null),g("tl"))},[e]);let b=(0,k.useMemo)(()=>o&&n.find(e=>e.metadata.id===o)||null,[n,o]),X=(0,k.useMemo)(()=>{if(!b)return[];try{return T(b).characters}catch{return[]}},[b]),y=(0,k.useMemo)(()=>!!b&&(r.width!==b.config.width||r.height!==b.config.height),[b,r]),w=(0,k.useMemo)(()=>{if(!d.trim())return n;let e=d.toLowerCase();return n.filter(t=>t.metadata.name.toLowerCase().includes(e)||t.metadata.description.toLowerCase().includes(e))},[n,d]),j=(0,k.useCallback)(e=>{c(e.metadata.id)},[]),N=(0,k.useCallback)((e,t,r)=>{m(a=>{let n=new Set(a);if(t&&null!==f){let t=Math.min(f,e),r=Math.max(f,e);for(let e=t;e<=r;e++)n.add(e)}else r?n.has(e)?n.delete(e):n.add(e):(n.clear(),n.add(e));return n}),x(e)},[f]),S=(0,k.useCallback)(()=>{m(new Set(X.map((e,t)=>t)))},[X]),M=(0,k.useCallback)(()=>{m(new Set)},[]),E=(0,k.useCallback)(()=>{"resize"===s?i("select-chars"):"select-chars"===s&&(i("select-set"),m(new Set))},[s]),R=(0,k.useCallback)(()=>{"select-set"===s&&o?i("select-chars"):"select-chars"===s&&h.size>0&&(y?i("resize"):(a(Array.from(h).sort((e,t)=>e-t).map(e=>X[e])),t()))},[s,o,h,y,X,a,t]),L=(0,k.useCallback)(()=>{let e=Array.from(h).sort((e,t)=>e-t).map(e=>X[e]);y&&(e=e.map(e=>G(e,r.width,r.height,p))),a(e),t()},[h,X,y,r,p,a,t]),A=(0,k.useCallback)(e=>{"Escape"===e.key&&t()},[t]);return e?(0,C.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onKeyDown:A,children:[(0,C.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,C.jsxs)("div",{className:"relative w-full max-w-2xl max-h-[80vh] bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl flex flex-col overflow-hidden",children:[(0,C.jsxs)("div",{className:"flex-shrink-0 p-4 border-b border-retro-grid/30",children:[(0,C.jsx)("h2",{className:"text-lg font-medium text-white",children:"Import Characters"}),(0,C.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["select-set"===s&&"Select a character set to import from","select-chars"===s&&`Select characters to import (${h.size} selected)`,"resize"===s&&"Configure resize settings"]})]}),(0,C.jsxs)("div",{className:"flex-1 overflow-hidden p-4 flex flex-col min-h-0",children:["select-set"===s&&(0,C.jsxs)("div",{className:"flex flex-col flex-1 min-h-0 gap-4",children:[(0,C.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,C.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),placeholder:"Search...",className:"w-full px-3 py-2 pl-9 bg-retro-dark border border-retro-grid/50 rounded text-sm text-gray-200 placeholder-gray-500 focus:outline-none focus:border-retro-cyan/50",autoFocus:!0}),(0,C.jsx)("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,C.jsx)("div",{className:"space-y-2 flex-1 overflow-y-auto min-h-0",children:l?(0,C.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading..."}):0===w.length?(0,C.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No character sets found"}):w.map(e=>(0,C.jsx)(eT,{characterSet:e,selected:o===e.metadata.id,onClick:()=>j(e)},e.metadata.id))}),b&&(0,C.jsxs)("div",{className:"flex-shrink-0 text-xs text-gray-500 text-center pt-2 border-t border-retro-grid/30",children:["Source: ",eN(b.config)," (",X.length," chars)",y&&(0,C.jsxs)("span",{className:"text-yellow-500 ml-2",children:["(will be resized to ",eN(r),")"]})]})]}),"select-chars"===s&&b&&(0,C.jsxs)("div",{className:"flex flex-col flex-1 min-h-0 gap-4",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0",children:[(0,C.jsx)("div",{className:"text-xs text-gray-500",children:"Click to select, Shift+click for range, Ctrl+click to toggle"}),(0,C.jsxs)("div",{className:"flex gap-2",children:[(0,C.jsx)("button",{onClick:S,className:"text-xs text-retro-cyan hover:underline",children:"Select All"}),(0,C.jsx)("button",{onClick:M,className:"text-xs text-gray-400 hover:underline",children:"Clear"})]})]}),(0,C.jsx)("div",{className:"bg-black/30 rounded-lg p-3 flex-1 overflow-y-auto min-h-0",children:(0,C.jsx)("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${Math.max(3*b.config.width,24)+8}px, 1fr))`},children:X.map((e,t)=>{let r=h.has(t);return(0,C.jsx)("button",{onClick:e=>N(t,e.shiftKey,e.ctrlKey||e.metaKey),className:`
                          p-1 rounded border-2 transition-all
                          ${r?"border-retro-cyan bg-retro-cyan/20":"border-transparent hover:border-retro-grid/50"}
                        `,title:`Character ${t}`,children:(0,C.jsx)(v.CharacterDisplay,{character:e,mode:"small",smallScale:3})},t)})})})]}),"resize"===s&&b&&(0,C.jsxs)("div",{className:"space-y-6",children:[(0,C.jsxs)("div",{className:"text-center",children:[(0,C.jsx)("p",{className:"text-sm text-gray-300 mb-2",children:"Source dimensions differ from target"}),(0,C.jsxs)("p",{className:"text-xs text-gray-500",children:[eN(b.config)," â ",eN(r)]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm text-gray-300 mb-2 text-center",children:"Anchor Position"}),(0,C.jsx)("p",{className:"text-xs text-gray-500 mb-3 text-center",children:"Select where to anchor content when resizing"}),(0,C.jsx)("div",{className:"grid grid-cols-3 gap-1 w-32 mx-auto",children:tk.map(e=>{let t=p===e;return(0,C.jsx)("button",{type:"button",onClick:()=>g(e),className:`
                          w-10 h-10 rounded border-2 transition-all
                          flex items-center justify-center
                          ${t?"border-retro-cyan bg-retro-cyan/20":"border-retro-grid/50 bg-retro-dark hover:border-retro-grid"}
                        `,title:{tl:"Top Left",tc:"Top Center",tr:"Top Right",ml:"Middle Left",mc:"Middle Center",mr:"Middle Right",bl:"Bottom Left",bc:"Bottom Center",br:"Bottom Right"}[e],children:(0,C.jsx)("div",{className:`
                            w-3 h-3 rounded-sm transition-colors
                            ${t?"bg-retro-cyan":"bg-gray-600"}
                          `})},e)})})]}),(0,C.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:[h.size," character",1!==h.size?"s":""," will be imported and resized"]})]})]}),(0,C.jsxs)("div",{className:"flex-shrink-0 p-4 border-t border-retro-grid/30 flex justify-between",children:["select-set"===s?(0,C.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}):(0,C.jsx)("button",{onClick:E,className:"px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Back"}),"resize"===s?(0,C.jsxs)("button",{onClick:L,className:"px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors",children:["Import (",h.size,")"]}):(0,C.jsx)("button",{onClick:R,disabled:"select-set"===s&&!o||"select-chars"===s&&0===h.size,className:"px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"select-chars"!==s||y?"Next":`Import (${h.size})`})]})]})]}):null}function tS({isOpen:e,onClose:t,characters:r,currentIndex:a,onCopy:n}){let[l,s]=(0,k.useState)(null);(0,k.useEffect)(()=>{e||s(null)},[e]);let i=(0,k.useCallback)(e=>{s(e)},[]),o=(0,k.useCallback)(()=>{null!==l&&(n(l),t())},[l,n,t]),c=(0,k.useCallback)(e=>{"Escape"===e.key?t():"Enter"===e.key&&null!==l&&o()},[t,l,o]);return e?(0,C.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onKeyDown:c,children:[(0,C.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,C.jsxs)("div",{className:"relative w-full max-w-lg max-h-[70vh] bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl flex flex-col overflow-hidden",children:[(0,C.jsxs)("div",{className:"flex-shrink-0 p-4 border-b border-retro-grid/30",children:[(0,C.jsx)("h2",{className:"text-lg font-medium text-white",children:"Copy Character"}),(0,C.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Select a character to copy. It will replace the currently selected character(s)."})]}),(0,C.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:[(0,C.jsx)("div",{className:"bg-black/30 rounded-lg p-3",children:(0,C.jsx)("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(40px, 1fr))"},children:r.map((e,t)=>{let r=l===t,n=t===a;return(0,C.jsxs)("button",{onClick:()=>i(t),disabled:n,className:`
                      p-1.5 rounded border-2 transition-all relative
                      ${r?"border-retro-cyan bg-retro-cyan/20":n?"border-retro-pink/30 bg-retro-pink/10 opacity-50 cursor-not-allowed":"border-transparent hover:border-retro-grid/50"}
                    `,title:n?"Current selection":`Character ${t}`,children:[(0,C.jsx)(v.CharacterDisplay,{character:e,mode:"small",smallScale:3}),n&&(0,C.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,C.jsx)("span",{className:"text-[8px] text-retro-pink bg-retro-dark/80 px-1 rounded",children:"current"})})]},t)})})}),null!==l&&(0,C.jsxs)("div",{className:"text-xs text-gray-500 text-center mt-3",children:["Character ",l," selected"]})]}),(0,C.jsxs)("div",{className:"flex-shrink-0 p-4 border-t border-retro-grid/30 flex justify-between",children:[(0,C.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,C.jsx)("button",{onClick:o,disabled:null===l,className:"px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Copy"})]})]})]}):null}e.s(["ImportCharactersModal",()=>tN],78071),e.s(["CopyCharacterModal",()=>tS],35052);var tM=e.i(74080);let tE="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function tR(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function tL(e){return"nodeType"in e}function tA(e){var t,r;return e?tR(e)?e:tL(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function tD(e){let{Document:t}=tA(e);return e instanceof t}function tI(e){return!tR(e)&&e instanceof tA(e).HTMLElement}function tB(e){return e instanceof tA(e).SVGElement}function tz(e){return e?tR(e)?e.document:tL(e)?tD(e)?e:tI(e)||tB(e)?e.ownerDocument:document:document:document}let t_=tE?k.useLayoutEffect:k.useEffect;function tP(e){let t=(0,k.useRef)(e);return t_(()=>{t.current=e}),(0,k.useCallback)(function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return null==t.current?void 0:t.current(...r)},[])}function tT(e,t){void 0===t&&(t=[e]);let r=(0,k.useRef)(e);return t_(()=>{r.current!==e&&(r.current=e)},t),r}function t$(e,t){let r=(0,k.useRef)();return(0,k.useMemo)(()=>{let t=e(r.current);return r.current=t,t},[...t])}function tO(e){let t=tP(e),r=(0,k.useRef)(null),a=(0,k.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,a]}function tF(e){let t=(0,k.useRef)();return(0,k.useEffect)(()=>{t.current=e},[e]),t.current}let tW={};function tK(e,t){return(0,k.useMemo)(()=>{if(t)return t;let r=null==tW[e]?0:tW[e]+1;return tW[e]=r,e+"-"+r},[e,t])}function tH(e){return function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];return a.reduce((t,r)=>{for(let[a,n]of Object.entries(r)){let r=t[a];null!=r&&(t[a]=r+e*n)}return t},{...t})}}let tU=tH(1),tG=tH(-1);function tV(e){if(!e)return!1;let{KeyboardEvent:t}=tA(e.target);return t&&e instanceof t}function tY(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=tA(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let tq=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[tq.Translate.toString(e),tq.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:a}=e;return t+" "+r+"ms "+a}}}),tJ="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",tZ={display:"none"};function tQ(e){let{id:t,value:r}=e;return k.default.createElement("div",{id:t,style:tZ},r)}function t0(e){let{id:t,announcement:r,ariaLiveType:a="assertive"}=e;return k.default.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":a,"aria-atomic":!0},r)}let t1=(0,k.createContext)(null),t2={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},t4={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function t5(e){var t;let r,{announcements:a=t4,container:n,hiddenTextDescribedById:l,screenReaderInstructions:s=t2}=e,{announce:i,announcement:o}=function(){let[e,t]=(0,k.useState)("");return{announce:(0,k.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),c=tK("DndLiveRegion"),[d,u]=(0,k.useState)(!1);if((0,k.useEffect)(()=>{u(!0)},[]),t=(0,k.useMemo)(()=>({onDragStart(e){let{active:t}=e;i(a.onDragStart({active:t}))},onDragMove(e){let{active:t,over:r}=e;a.onDragMove&&i(a.onDragMove({active:t,over:r}))},onDragOver(e){let{active:t,over:r}=e;i(a.onDragOver({active:t,over:r}))},onDragEnd(e){let{active:t,over:r}=e;i(a.onDragEnd({active:t,over:r}))},onDragCancel(e){let{active:t,over:r}=e;i(a.onDragCancel({active:t,over:r}))}}),[i,a]),r=(0,k.useContext)(t1),(0,k.useEffect)(()=>{if(!r)throw Error("useDndMonitor must be used within a children of <DndContext>");return r(t)},[t,r]),!d)return null;let h=k.default.createElement(k.default.Fragment,null,k.default.createElement(tQ,{id:l,value:s.draggable}),k.default.createElement(t0,{id:c,announcement:o}));return n?(0,tM.createPortal)(h,n):h}function t3(){}function t8(e,t){return(0,k.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}(r=u||(u={})).DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable";let t6=Object.freeze({x:0,y:0});function t7(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function t9(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return r-a}function re(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return a-r}function rt(e){let{left:t,top:r,height:a,width:n}=e;return[{x:t,y:r},{x:t+n,y:r},{x:t,y:r+a},{x:t+n,y:r+a}]}function rr(e,t){if(!e||0===e.length)return null;let[r]=e;return t?r[t]:r}function ra(e,t,r){return void 0===t&&(t=e.left),void 0===r&&(r=e.top),{x:t+.5*e.width,y:r+.5*e.height}}let rn=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,n=ra(t,t.left,t.top),l=[];for(let e of a){let{id:t}=e,a=r.get(t);if(a){let r=t7(ra(a),n);l.push({id:t,data:{droppableContainer:e,value:r}})}}return l.sort(t9)},rl=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,n=[];for(let e of a){let{id:a}=e,l=r.get(a);if(l){let r=function(e,t){let r=Math.max(t.top,e.top),a=Math.max(t.left,e.left),n=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height);if(a<n&&r<l){let s=t.width*t.height,i=e.width*e.height,o=(n-a)*(l-r);return Number((o/(s+i-o)).toFixed(4))}return 0}(l,t);r>0&&n.push({id:a,data:{droppableContainer:e,value:r}})}}return n.sort(re)};function rs(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:t6}let ri=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.reduce((e,t)=>({...e,top:e.top+ +t.y,bottom:e.bottom+ +t.y,left:e.left+ +t.x,right:e.right+ +t.x}),{...e})};function ro(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}let rc={ignoreTransform:!1};function rd(e,t){void 0===t&&(t=rc);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:a}=tA(e).getComputedStyle(e);t&&(r=function(e,t,r){let a=ro(t);if(!a)return e;let{scaleX:n,scaleY:l,x:s,y:i}=a,o=e.left-s-(1-n)*parseFloat(r),c=e.top-i-(1-l)*parseFloat(r.slice(r.indexOf(" ")+1)),d=n?e.width/n:e.width,u=l?e.height/l:e.height;return{width:d,height:u,top:c,right:o+d,bottom:c+u,left:o}}(r,t,a))}let{top:a,left:n,width:l,height:s,bottom:i,right:o}=r;return{top:a,left:n,width:l,height:s,bottom:i,right:o}}function ru(e){return rd(e,{ignoreTransform:!0})}function rh(e,t){let r=[];return e?function a(n){var l,s;let i;if(null!=t&&r.length>=t||!n)return r;if(tD(n)&&null!=n.scrollingElement&&!r.includes(n.scrollingElement))return r.push(n.scrollingElement),r;if(!tI(n)||tB(n)||r.includes(n))return r;let o=tA(e).getComputedStyle(n);return(n!==e&&(void 0===(l=o)&&(l=tA(n).getComputedStyle(n)),i=/(auto|scroll|overlay)/,["overflow","overflowX","overflowY"].some(e=>{let t=l[e];return"string"==typeof t&&i.test(t)}))&&r.push(n),void 0===(s=o)&&(s=tA(n).getComputedStyle(n)),"fixed"===s.position)?r:a(n.parentNode)}(e):r}function rm(e){let[t]=rh(e,1);return null!=t?t:null}function rf(e){return tE&&e?tR(e)?e:tL(e)?tD(e)||e===tz(e).scrollingElement?window:tI(e)?e:null:null:null}function rx(e){return tR(e)?e.scrollX:e.scrollLeft}function rp(e){return tR(e)?e.scrollY:e.scrollTop}function rg(e){return{x:rx(e),y:rp(e)}}function rb(e){return!!tE&&!!e&&e===document.scrollingElement}function rX(e){let t={x:0,y:0},r=rb(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},n=e.scrollTop<=t.y,l=e.scrollLeft<=t.x;return{isTop:n,isLeft:l,isBottom:e.scrollTop>=a.y,isRight:e.scrollLeft>=a.x,maxScroll:a,minScroll:t}}(a=h||(h={}))[a.Forward=1]="Forward",a[a.Backward=-1]="Backward";let ry={x:.2,y:.2};function rv(e){return e.reduce((e,t)=>tU(e,rg(t)),t6)}function rw(e,t){if(void 0===t&&(t=rd),!e)return;let{top:r,left:a,bottom:n,right:l}=t(e);rm(e)&&(n<=0||l<=0||r>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let rj=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+rx(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+rp(t),0)}]];class rC{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=rh(t),a=rv(r);for(const[t,n,l]of(this.rect={...e},this.width=e.width,this.height=e.height,rj))for(const e of n)Object.defineProperty(this,e,{get:()=>{let n=l(r),s=a[t]-n;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class rk{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var a;null==(a=this.target)||a.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function rN(e,t){let r=Math.abs(e.x),a=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+a**2)>t:"x"in t&&"y"in t?r>t.x&&a>t.y:"x"in t?r>t.x:"y"in t&&a>t.y}function rS(e){e.preventDefault()}function rM(e){e.stopPropagation()}(n=m||(m={})).Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange",(l=f||(f={})).Space="Space",l.Down="ArrowDown",l.Right="ArrowRight",l.Left="ArrowLeft",l.Up="ArrowUp",l.Esc="Escape",l.Enter="Enter",l.Tab="Tab";let rE={start:[f.Space,f.Enter],cancel:[f.Esc],end:[f.Space,f.Enter,f.Tab]},rR=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case f.Right:return{...r,x:r.x+25};case f.Left:return{...r,x:r.x-25};case f.Down:return{...r,y:r.y+25};case f.Up:return{...r,y:r.y-25}}};class rL{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new rk(tz(t)),this.windowListeners=new rk(tA(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(m.Resize,this.handleCancel),this.windowListeners.add(m.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(m.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&rw(r),t(t6)}handleKeyDown(e){if(tV(e)){let{active:t,context:r,options:a}=this.props,{keyboardCodes:n=rE,coordinateGetter:l=rR,scrollBehavior:s="smooth"}=a,{code:i}=e;if(n.end.includes(i))return void this.handleEnd(e);if(n.cancel.includes(i))return void this.handleCancel(e);let{collisionRect:o}=r.current,c=o?{x:o.left,y:o.top}:t6;this.referenceCoordinates||(this.referenceCoordinates=c);let d=l(e,{active:t,context:r.current,currentCoordinates:c});if(d){let t=tG(d,c),a={x:0,y:0},{scrollableAncestors:n}=r.current;for(let r of n){let n=e.code,{isTop:l,isRight:i,isLeft:o,isBottom:c,maxScroll:u,minScroll:h}=rX(r),m=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:r,right:a,bottom:n}=e.getBoundingClientRect();return{top:t,left:r,right:a,bottom:n,width:e.clientWidth,height:e.clientHeight}}(r),x={x:Math.min(n===f.Right?m.right-m.width/2:m.right,Math.max(n===f.Right?m.left:m.left+m.width/2,d.x)),y:Math.min(n===f.Down?m.bottom-m.height/2:m.bottom,Math.max(n===f.Down?m.top:m.top+m.height/2,d.y))},p=n===f.Right&&!i||n===f.Left&&!o,g=n===f.Down&&!c||n===f.Up&&!l;if(p&&x.x!==d.x){let e=r.scrollLeft+t.x,l=n===f.Right&&e<=u.x||n===f.Left&&e>=h.x;if(l&&!t.y)return void r.scrollTo({left:e,behavior:s});l?a.x=r.scrollLeft-e:a.x=n===f.Right?r.scrollLeft-u.x:r.scrollLeft-h.x,a.x&&r.scrollBy({left:-a.x,behavior:s});break}if(g&&x.y!==d.y){let e=r.scrollTop+t.y,l=n===f.Down&&e<=u.y||n===f.Up&&e>=h.y;if(l&&!t.x)return void r.scrollTo({top:e,behavior:s});l?a.y=r.scrollTop-e:a.y=n===f.Down?r.scrollTop-u.y:r.scrollTop-h.y,a.y&&r.scrollBy({top:-a.y,behavior:s});break}}this.handleMove(e,tU(tG(d,this.referenceCoordinates),a))}}}handleMove(e,t){let{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function rA(e){return!!(e&&"distance"in e)}function rD(e){return!!(e&&"delay"in e)}rL.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:a=rE,onActivation:n}=t,{active:l}=r,{code:s}=e.nativeEvent;if(a.start.includes(s)){let t=l.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==n||n({event:e.nativeEvent}),!0)}return!1}}];class rI{constructor(e,t,r){var a;void 0===r&&(r=function(e){let{EventTarget:t}=tA(e);return e instanceof t?e:tz(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:n}=e,{target:l}=n;this.props=e,this.events=t,this.document=tz(l),this.documentListeners=new rk(this.document),this.listeners=new rk(r),this.windowListeners=new rk(tA(l)),this.initialCoordinates=null!=(a=tY(n))?a:t6,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(m.Resize,this.handleCancel),this.windowListeners.add(m.DragStart,rS),this.windowListeners.add(m.VisibilityChange,this.handleCancel),this.windowListeners.add(m.ContextMenu,rS),this.documentListeners.add(m.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(rD(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(rA(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:r,onPending:a}=this.props;a(r,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(m.Click,rM,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(m.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:r,initialCoordinates:a,props:n}=this,{onMove:l,options:{activationConstraint:s}}=n;if(!a)return;let i=null!=(t=tY(e))?t:t6,o=tG(a,i);if(!r&&s){if(rA(s)){if(null!=s.tolerance&&rN(o,s.tolerance))return this.handleCancel();if(rN(o,s.distance))return this.handleStart()}return rD(s)&&rN(o,s.tolerance)?this.handleCancel():void this.handlePending(s,o)}e.cancelable&&e.preventDefault(),l(i)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===f.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let rB={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class rz extends rI{constructor(e){const{event:t}=e;super(e,rB,tz(t.target))}}rz.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;return!!r.isPrimary&&0===r.button&&(null==a||a({event:r}),!0)}}];(s=x||(x={}))[s.RightClick=2]="RightClick";(i=p||(p={}))[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect",(o=g||(g={}))[o.TreeOrder=0]="TreeOrder",o[o.ReversedTreeOrder=1]="ReversedTreeOrder";let r_={x:{[h.Backward]:!1,[h.Forward]:!1},y:{[h.Backward]:!1,[h.Forward]:!1}};(c=b||(b={}))[c.Always=0]="Always",c[c.BeforeDragging=1]="BeforeDragging",c[c.WhileDragging=2]="WhileDragging",(X||(X={})).Optimized="optimized";let rP=new Map;function rT(e,t){return t$(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function r$(e){let{callback:t,disabled:r}=e,a=tP(t),n=(0,k.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(a)},[r]);return(0,k.useEffect)(()=>()=>null==n?void 0:n.disconnect(),[n]),n}function rO(e){return new rC(rd(e),e)}function rF(e,t,r){void 0===t&&(t=rO);let[a,n]=(0,k.useState)(null);function l(){n(a=>{if(!e)return null;if(!1===e.isConnected){var n;return null!=(n=null!=a?a:r)?n:null}let l=t(e);return JSON.stringify(a)===JSON.stringify(l)?a:l})}let s=function(e){let{callback:t,disabled:r}=e,a=tP(t),n=(0,k.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(a)},[a,r]);return(0,k.useEffect)(()=>()=>null==n?void 0:n.disconnect(),[n]),n}({callback(t){if(e)for(let r of t){let{type:t,target:a}=r;if("childList"===t&&a instanceof HTMLElement&&a.contains(e)){l();break}}}}),i=r$({callback:l});return t_(()=>{l(),e?(null==i||i.observe(e),null==s||s.observe(document.body,{childList:!0,subtree:!0})):(null==i||i.disconnect(),null==s||s.disconnect())},[e]),a}let rW=[];function rK(e,t){void 0===t&&(t=[]);let r=(0,k.useRef)(null);return(0,k.useEffect)(()=>{r.current=null},t),(0,k.useEffect)(()=>{let t=e!==t6;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?tG(e,r.current):t6}function rH(e){return(0,k.useMemo)(()=>{let t,r;return e?(t=e.innerWidth,{top:0,left:0,right:t,bottom:r=e.innerHeight,width:t,height:r}):null},[e])}let rU=[];function rG(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return tI(t)?t:e}let rV=[{sensor:rz,options:{}},{sensor:rL,options:{}}],rY={current:{}},rq={draggable:{measure:ru},droppable:{measure:ru,strategy:b.WhileDragging,frequency:X.Optimized},dragOverlay:{measure:rd}};class rJ extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}let rZ={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new rJ,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:t3},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:rq,measureDroppableContainers:t3,windowRect:null,measuringScheduled:!1},rQ={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:t3,draggableNodes:new Map,over:null,measureDroppableContainers:t3},r0=(0,k.createContext)(rQ),r1=(0,k.createContext)(rZ);function r2(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new rJ}}}function r4(e,t){switch(t.type){case u.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case u.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case u.DragEnd:case u.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case u.RegisterDroppable:{let{element:r}=t,{id:a}=r,n=new rJ(e.droppable.containers);return n.set(a,r),{...e,droppable:{...e.droppable,containers:n}}}case u.SetDroppableDisabled:{let{id:r,key:a,disabled:n}=t,l=e.droppable.containers.get(r);if(!l||a!==l.key)return e;let s=new rJ(e.droppable.containers);return s.set(r,{...l,disabled:n}),{...e,droppable:{...e.droppable,containers:s}}}case u.UnregisterDroppable:{let{id:r,key:a}=t,n=e.droppable.containers.get(r);if(!n||a!==n.key)return e;let l=new rJ(e.droppable.containers);return l.delete(r),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function r5(e){let{disabled:t}=e,{active:r,activatorEvent:a,draggableNodes:n}=(0,k.useContext)(r0),l=tF(a),s=tF(null==r?void 0:r.id);return(0,k.useEffect)(()=>{if(!t&&!a&&l&&null!=s){if(!tV(l)||document.activeElement===l.target)return;let e=n.get(s);if(!e)return;let{activatorNode:t,node:r}=e;(t.current||r.current)&&requestAnimationFrame(()=>{for(let e of[t.current,r.current]){if(!e)continue;let t=e.matches(tJ)?e:e.querySelector(tJ);if(t){t.focus();break}}})}},[a,t,n,s,l]),null}function r3(e,t){let{transform:r,...a}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...a}),r):r}let r8=(0,k.createContext)({...t6,scaleX:1,scaleY:1});(d=y||(y={}))[d.Uninitialized=0]="Uninitialized",d[d.Initializing=1]="Initializing",d[d.Initialized=2]="Initialized";let r6=(0,k.memo)(function(e){var t,r,a,n,l,s,i,o;let c,d,m,f,x,X,v,w,{id:j,accessibility:C,autoScroll:N=!0,children:S,sensors:M=rV,collisionDetection:E=rl,measuring:R,modifiers:L,...A}=e,[D,I]=(0,k.useReducer)(r4,void 0,r2),[B,z]=function(){let[e]=(0,k.useState)(()=>new Set),t=(0,k.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,k.useCallback)(t=>{let{type:r,event:a}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,a)})},[e]),t]}(),[_,P]=(0,k.useState)(y.Uninitialized),T=_===y.Initialized,{draggable:{active:$,nodes:O,translate:F},droppable:{containers:W}}=D,K=null!=$?O.get($):null,H=(0,k.useRef)({initial:null,translated:null}),U=(0,k.useMemo)(()=>{var e;return null!=$?{id:$,data:null!=(e=null==K?void 0:K.data)?e:rY,rect:H}:null},[$,K]),G=(0,k.useRef)(null),[V,Y]=(0,k.useState)(null),[q,J]=(0,k.useState)(null),Z=tT(A,Object.values(A)),Q=tK("DndDescribedBy",j),ee=(0,k.useMemo)(()=>W.getEnabled(),[W]),et=(0,k.useMemo)(()=>({draggable:{...rq.draggable,...null==R?void 0:R.draggable},droppable:{...rq.droppable,...null==R?void 0:R.droppable},dragOverlay:{...rq.dragOverlay,...null==R?void 0:R.dragOverlay}}),[null==R?void 0:R.draggable,null==R?void 0:R.droppable,null==R?void 0:R.dragOverlay]),{droppableRects:er,measureDroppableContainers:ea,measuringScheduled:en}=function(e,t){let{dragging:r,dependencies:a,config:n}=t,[l,s]=(0,k.useState)(null),{frequency:i,measure:o,strategy:c}=n,d=(0,k.useRef)(e),u=function(){switch(c){case b.Always:return!1;case b.BeforeDragging:return r;default:return!r}}(),h=tT(u),m=(0,k.useCallback)(function(e){void 0===e&&(e=[]),h.current||s(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[h]),f=(0,k.useRef)(null),x=t$(t=>{if(u&&!r)return rP;if(!t||t===rP||d.current!==e||null!=l){let t=new Map;for(let r of e){if(!r)continue;if(l&&l.length>0&&!l.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}let e=r.node.current,a=e?new rC(o(e),e):null;r.rect.current=a,a&&t.set(r.id,a)}return t}return t},[e,l,r,u,o]);return(0,k.useEffect)(()=>{d.current=e},[e]),(0,k.useEffect)(()=>{u||m()},[r,u]),(0,k.useEffect)(()=>{l&&l.length>0&&s(null)},[JSON.stringify(l)]),(0,k.useEffect)(()=>{u||"number"!=typeof i||null!==f.current||(f.current=setTimeout(()=>{m(),f.current=null},i))},[i,u,m,...a]),{droppableRects:x,measureDroppableContainers:m,measuringScheduled:null!=l}}(ee,{dragging:T,dependencies:[F.x,F.y],config:et.droppable}),el=t$(e=>{var t;return null==$?null:null!=(t=null!=x?x:e)?t:null},[x=(f=null!=$?O.get($):void 0)?f.node.current:null,$]),es=(0,k.useMemo)(()=>q?tY(q):null,[q]),ei=(c=(null==V?void 0:V.autoScrollEnabled)===!1,d="object"==typeof N?!1===N.enabled:!1===N,m=T&&!c&&!d,"object"==typeof N?{...N,enabled:m}:{enabled:m}),eo=rT(el,et.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:a,config:n=!0}=e,l=(0,k.useRef)(!1),{x:s,y:i}="boolean"==typeof n?{x:n,y:n}:n;t_(()=>{if(!s&&!i||!t){l.current=!1;return}if(l.current||!a)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let n=rs(r(e),a);if(s||(n.x=0),i||(n.y=0),l.current=!0,Math.abs(n.x)>0||Math.abs(n.y)>0){let t=rm(e);t&&t.scrollBy({top:n.y,left:n.x})}},[t,s,i,a,r])}({activeNode:null!=$?O.get($):null,config:ei.layoutShiftCompensation,initialRect:eo,measure:et.draggable.measure});let ec=rF(el,et.draggable.measure,eo),ed=rF(el?el.parentElement:null),eu=(0,k.useRef)({activatorEvent:null,active:null,activeNode:el,collisionRect:null,collisions:null,droppableRects:er,draggableNodes:O,draggingNode:null,draggingNodeRect:null,droppableContainers:W,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eh=W.getNodeFor(null==(t=eu.current.over)?void 0:t.id),em=function(e){let{measure:t}=e,[r,a]=(0,k.useState)(null),n=r$({callback:(0,k.useCallback)(e=>{for(let{target:r}of e)if(tI(r)){a(e=>{let a=t(r);return e?{...e,width:a.width,height:a.height}:a});break}},[t])}),[l,s]=tO((0,k.useCallback)(e=>{let r=rG(e);null==n||n.disconnect(),r&&(null==n||n.observe(r)),a(r?t(r):null)},[t,n]));return(0,k.useMemo)(()=>({nodeRef:l,rect:r,setRef:s}),[r,l,s])}({measure:et.dragOverlay.measure}),ef=null!=(r=em.nodeRef.current)?r:el,ex=T?null!=(a=em.rect)?a:ec:null,ep=!!(em.nodeRef.current&&em.rect),eg=(X=rT(l=ep?null:ec),rs(l,X)),eb=rH(ef?tA(ef):null),eX=(s=T?null!=eh?eh:el:null,v=(0,k.useRef)(s),w=t$(e=>s?e&&e!==rW&&s&&v.current&&s.parentNode===v.current.parentNode?e:rh(s):rW,[s]),(0,k.useEffect)(()=>{v.current=s},[s]),w),ey=function(e,t){void 0===t&&(t=rd);let[r]=e,a=rH(r?tA(r):null),[n,l]=(0,k.useState)(rU);function s(){l(()=>e.length?e.map(e=>rb(e)?a:new rC(t(e),e)):rU)}let i=r$({callback:s});return t_(()=>{null==i||i.disconnect(),s(),e.forEach(e=>null==i?void 0:i.observe(e))},[e]),n}(eX),ev=r3(L,{transform:{x:F.x-eg.x,y:F.y-eg.y,scaleX:1,scaleY:1},activatorEvent:q,active:U,activeNodeRect:ec,containerNodeRect:ed,draggingNodeRect:ex,over:eu.current.over,overlayNodeRect:em.rect,scrollableAncestors:eX,scrollableAncestorRects:ey,windowRect:eb}),ew=es?tU(es,F):null,ej=function(e){let[t,r]=(0,k.useState)(null),a=(0,k.useRef)(e),n=(0,k.useCallback)(e=>{let t=rf(e.target);t&&r(e=>e?(e.set(t,rg(t)),new Map(e)):null)},[]);return(0,k.useEffect)(()=>{let t=a.current;if(e!==t){l(t);let s=e.map(e=>{let t=rf(e);return t?(t.addEventListener("scroll",n,{passive:!0}),[t,rg(t)]):null}).filter(e=>null!=e);r(s.length?new Map(s):null),a.current=e}return()=>{l(e),l(t)};function l(e){e.forEach(e=>{let t=rf(e);null==t||t.removeEventListener("scroll",n)})}},[n,e]),(0,k.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>tU(e,t),t6):rv(e):t6,[e,t])}(eX),eC=rK(ej),ek=rK(ej,[ec]),eN=tU(ev,eC),eS=ex?ri(ex,ev):null,eM=U&&eS?E({active:U,collisionRect:eS,droppableRects:er,droppableContainers:ee,pointerCoordinates:ew}):null,eE=rr(eM,"id"),[eR,eL]=(0,k.useState)(null),eA=(i=ep?ev:tU(ev,ek),o=null!=(n=null==eR?void 0:eR.rect)?n:null,{...i,scaleX:o&&ec?o.width/ec.width:1,scaleY:o&&ec?o.height/ec.height:1}),eD=(0,k.useRef)(null),eI=(0,k.useCallback)((e,t)=>{let{sensor:r,options:a}=t;if(null==G.current)return;let n=O.get(G.current);if(!n)return;let l=e.nativeEvent,s=new r({active:G.current,activeNode:n,event:l,options:a,context:eu,onAbort(e){if(!O.get(e))return;let{onDragAbort:t}=Z.current,r={id:e};null==t||t(r),B({type:"onDragAbort",event:r})},onPending(e,t,r,a){if(!O.get(e))return;let{onDragPending:n}=Z.current,l={id:e,constraint:t,initialCoordinates:r,offset:a};null==n||n(l),B({type:"onDragPending",event:l})},onStart(e){let t=G.current;if(null==t)return;let r=O.get(t);if(!r)return;let{onDragStart:a}=Z.current,n={activatorEvent:l,active:{id:t,data:r.data,rect:H}};(0,tM.unstable_batchedUpdates)(()=>{null==a||a(n),P(y.Initializing),I({type:u.DragStart,initialCoordinates:e,active:t}),B({type:"onDragStart",event:n}),Y(eD.current),J(l)})},onMove(e){I({type:u.DragMove,coordinates:e})},onEnd:i(u.DragEnd),onCancel:i(u.DragCancel)});function i(e){return async function(){let{active:t,collisions:r,over:a,scrollAdjustedTranslate:n}=eu.current,s=null;if(t&&n){let{cancelDrop:i}=Z.current;s={activatorEvent:l,active:t,collisions:r,delta:n,over:a},e===u.DragEnd&&"function"==typeof i&&await Promise.resolve(i(s))&&(e=u.DragCancel)}G.current=null,(0,tM.unstable_batchedUpdates)(()=>{I({type:e}),P(y.Uninitialized),eL(null),Y(null),J(null),eD.current=null;let t=e===u.DragEnd?"onDragEnd":"onDragCancel";if(s){let e=Z.current[t];null==e||e(s),B({type:t,event:s})}})}}eD.current=s},[O]),eB=(0,k.useCallback)((e,t)=>(r,a)=>{let n=r.nativeEvent,l=O.get(a);null!==G.current||!l||n.dndKit||n.defaultPrevented||!0===e(r,t.options,{active:l})&&(n.dndKit={capturedBy:t.sensor},G.current=a,eI(r,t))},[O,eI]),ez=(0,k.useMemo)(()=>M.reduce((e,t)=>{let{sensor:r}=t;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:eB(e.handler,t)}))]},[]),[M,eB]);(0,k.useEffect)(()=>{if(!tE)return;let e=M.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},M.map(e=>{let{sensor:t}=e;return t})),t_(()=>{ec&&_===y.Initializing&&P(y.Initialized)},[ec,_]),(0,k.useEffect)(()=>{let{onDragMove:e}=Z.current,{active:t,activatorEvent:r,collisions:a,over:n}=eu.current;if(!t||!r)return;let l={active:t,activatorEvent:r,collisions:a,delta:{x:eN.x,y:eN.y},over:n};(0,tM.unstable_batchedUpdates)(()=>{null==e||e(l),B({type:"onDragMove",event:l})})},[eN.x,eN.y]),(0,k.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:r,droppableContainers:a,scrollAdjustedTranslate:n}=eu.current;if(!e||null==G.current||!t||!n)return;let{onDragOver:l}=Z.current,s=a.get(eE),i=s&&s.rect.current?{id:s.id,rect:s.rect.current,data:s.data,disabled:s.disabled}:null,o={active:e,activatorEvent:t,collisions:r,delta:{x:n.x,y:n.y},over:i};(0,tM.unstable_batchedUpdates)(()=>{eL(i),null==l||l(o),B({type:"onDragOver",event:o})})},[eE]),t_(()=>{eu.current={activatorEvent:q,active:U,activeNode:el,collisionRect:eS,collisions:eM,droppableRects:er,draggableNodes:O,draggingNode:ef,draggingNodeRect:ex,droppableContainers:W,over:eR,scrollableAncestors:eX,scrollAdjustedTranslate:eN},H.current={initial:ex,translated:eS}},[U,el,eM,eS,O,ef,ex,er,W,eR,eX,eN]),function(e){let t,{acceleration:r,activator:a=p.Pointer,canScroll:n,draggingRect:l,enabled:s,interval:i=5,order:o=g.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:m,threshold:f}=e,x=function(e){let{delta:t,disabled:r}=e,a=tF(t);return t$(e=>{if(r||!a||!e)return r_;let n={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[h.Backward]:e.x[h.Backward]||-1===n.x,[h.Forward]:e.x[h.Forward]||1===n.x},y:{[h.Backward]:e.y[h.Backward]||-1===n.y,[h.Forward]:e.y[h.Forward]||1===n.y}}},[r,t,a])}({delta:m,disabled:!s}),[b,X]=(t=(0,k.useRef)(null),[(0,k.useCallback)((e,r)=>{t.current=setInterval(e,r)},[]),(0,k.useCallback)(()=>{null!==t.current&&(clearInterval(t.current),t.current=null)},[])]),y=(0,k.useRef)({x:0,y:0}),v=(0,k.useRef)({x:0,y:0}),w=(0,k.useMemo)(()=>{switch(a){case p.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case p.DraggableRect:return l}},[a,l,c]),j=(0,k.useRef)(null),C=(0,k.useCallback)(()=>{let e=j.current;if(!e)return;let t=y.current.x*v.current.x,r=y.current.y*v.current.y;e.scrollBy(t,r)},[]),N=(0,k.useMemo)(()=>o===g.TreeOrder?[...d].reverse():d,[o,d]);(0,k.useEffect)(()=>{if(!s||!d.length||!w)return void X();for(let e of N){if((null==n?void 0:n(e))===!1)continue;let t=u[d.indexOf(e)];if(!t)continue;let{direction:a,speed:l}=function(e,t,r,a,n){let{top:l,left:s,right:i,bottom:o}=r;void 0===a&&(a=10),void 0===n&&(n=ry);let{isTop:c,isBottom:d,isLeft:u,isRight:m}=rX(e),f={x:0,y:0},x={x:0,y:0},p={height:t.height*n.y,width:t.width*n.x};return!c&&l<=t.top+p.height?(f.y=h.Backward,x.y=a*Math.abs((t.top+p.height-l)/p.height)):!d&&o>=t.bottom-p.height&&(f.y=h.Forward,x.y=a*Math.abs((t.bottom-p.height-o)/p.height)),!m&&i>=t.right-p.width?(f.x=h.Forward,x.x=a*Math.abs((t.right-p.width-i)/p.width)):!u&&s<=t.left+p.width&&(f.x=h.Backward,x.x=a*Math.abs((t.left+p.width-s)/p.width)),{direction:f,speed:x}}(e,t,w,r,f);for(let e of["x","y"])x[e][a[e]]||(l[e]=0,a[e]=0);if(l.x>0||l.y>0){X(),j.current=e,b(C,i),y.current=l,v.current=a;return}}y.current={x:0,y:0},v.current={x:0,y:0},X()},[r,C,n,X,s,i,JSON.stringify(w),JSON.stringify(x),b,d,N,u,JSON.stringify(f)])}({...ei,delta:F,draggingRect:eS,pointerCoordinates:ew,scrollableAncestors:eX,scrollableAncestorRects:ey});let e_=(0,k.useMemo)(()=>({active:U,activeNode:el,activeNodeRect:ec,activatorEvent:q,collisions:eM,containerNodeRect:ed,dragOverlay:em,draggableNodes:O,droppableContainers:W,droppableRects:er,over:eR,measureDroppableContainers:ea,scrollableAncestors:eX,scrollableAncestorRects:ey,measuringConfiguration:et,measuringScheduled:en,windowRect:eb}),[U,el,ec,q,eM,ed,em,O,W,er,eR,ea,eX,ey,et,en,eb]),eP=(0,k.useMemo)(()=>({activatorEvent:q,activators:ez,active:U,activeNodeRect:ec,ariaDescribedById:{draggable:Q},dispatch:I,draggableNodes:O,over:eR,measureDroppableContainers:ea}),[q,ez,U,ec,I,Q,O,eR,ea]);return k.default.createElement(t1.Provider,{value:z},k.default.createElement(r0.Provider,{value:eP},k.default.createElement(r1.Provider,{value:e_},k.default.createElement(r8.Provider,{value:eA},S)),k.default.createElement(r5,{disabled:(null==C?void 0:C.restoreFocus)===!1})),k.default.createElement(t5,{...C,hiddenTextDescribedById:Q}))}),r7=(0,k.createContext)(null),r9="button";function ae(){return(0,k.useContext)(r1)}let at={timeout:25};function ar(e){let{animation:t,children:r}=e,[a,n]=(0,k.useState)(null),[l,s]=(0,k.useState)(null),i=tF(r);return r||a||!i||n(i),t_(()=>{if(!l)return;let e=null==a?void 0:a.key,r=null==a?void 0:a.props.id;null==e||null==r?n(null):Promise.resolve(t(r,l)).then(()=>{n(null)})},[t,a,l]),k.default.createElement(k.default.Fragment,null,r,a?(0,k.cloneElement)(a,{ref:s}):null)}let aa={x:0,y:0,scaleX:1,scaleY:1};function an(e){let{children:t}=e;return k.default.createElement(r0.Provider,{value:rQ},k.default.createElement(r8.Provider,{value:aa},t))}let al={position:"fixed",touchAction:"none"},as=e=>tV(e)?"transform 250ms ease":void 0,ai=(0,k.forwardRef)((e,t)=>{let{as:r,activatorEvent:a,adjustScale:n,children:l,className:s,rect:i,style:o,transform:c,transition:d=as}=e;if(!i)return null;let u=n?c:{...c,scaleX:1,scaleY:1},h={...al,width:i.width,height:i.height,top:i.top,left:i.left,transform:tq.Transform.toString(u),transformOrigin:n&&a?function(e,t){let r=tY(e);if(!r)return"0 0";let a={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return a.x+"% "+a.y+"%"}(a,i):void 0,transition:"function"==typeof d?d(a):d,...o};return k.default.createElement(r,{className:s,style:h,ref:t},l)}),ao={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:r}}=e;return[{transform:tq.Transform.toString(t)},{transform:tq.Transform.toString(r)}]},sideEffects:(t={styles:{active:{opacity:"0"}}},e=>{let{active:r,dragOverlay:a}=e,n={},{styles:l,className:s}=t;if(null!=l&&l.active)for(let[e,t]of Object.entries(l.active))void 0!==t&&(n[e]=r.node.style.getPropertyValue(e),r.node.style.setProperty(e,t));if(null!=l&&l.dragOverlay)for(let[e,t]of Object.entries(l.dragOverlay))void 0!==t&&a.node.style.setProperty(e,t);return null!=s&&s.active&&r.node.classList.add(s.active),null!=s&&s.dragOverlay&&a.node.classList.add(s.dragOverlay),function(){for(let[e,t]of Object.entries(n))r.node.style.setProperty(e,t);null!=s&&s.active&&r.node.classList.remove(s.active)}})},ac=0,ad=k.default.memo(e=>{var t;let{adjustScale:r=!1,children:a,dropAnimation:n,style:l,transition:s,modifiers:i,wrapperElement:o="div",className:c,zIndex:d=999}=e,{activatorEvent:u,active:h,activeNodeRect:m,containerNodeRect:f,draggableNodes:x,droppableContainers:p,dragOverlay:g,over:b,measuringConfiguration:X,scrollableAncestors:y,scrollableAncestorRects:v,windowRect:w}=ae(),j=(0,k.useContext)(r8),C=(t=null==h?void 0:h.id,(0,k.useMemo)(()=>{if(null!=t)return++ac},[t])),N=r3(i,{activatorEvent:u,active:h,activeNodeRect:m,containerNodeRect:f,draggingNodeRect:g.rect,over:b,overlayNodeRect:g.rect,scrollableAncestors:y,scrollableAncestorRects:v,transform:j,windowRect:w}),S=rT(m),M=function(e){let{config:t,draggableNodes:r,droppableContainers:a,measuringConfiguration:n}=e;return tP((e,l)=>{if(null===t)return;let s=r.get(e);if(!s)return;let i=s.node.current;if(!i)return;let o=rG(l);if(!o)return;let{transform:c}=tA(l).getComputedStyle(l),d=ro(c);if(!d)return;let u="function"==typeof t?t:function(e){let{duration:t,easing:r,sideEffects:a,keyframes:n}={...ao,...e};return e=>{let{active:l,dragOverlay:s,transform:i,...o}=e;if(!t)return;let c={x:s.rect.left-l.rect.left,y:s.rect.top-l.rect.top},d={scaleX:1!==i.scaleX?l.rect.width*i.scaleX/s.rect.width:1,scaleY:1!==i.scaleY?l.rect.height*i.scaleY/s.rect.height:1},u={x:i.x-c.x,y:i.y-c.y,...d},h=n({...o,active:l,dragOverlay:s,transform:{initial:i,final:u}}),[m]=h,f=h[h.length-1];if(JSON.stringify(m)===JSON.stringify(f))return;let x=null==a?void 0:a({active:l,dragOverlay:s,...o}),p=s.node.animate(h,{duration:t,easing:r,fill:"forwards"});return new Promise(e=>{p.onfinish=()=>{null==x||x(),e()}})}}(t);return rw(i,n.draggable.measure),u({active:{id:e,data:s.data,node:i,rect:n.draggable.measure(i)},draggableNodes:r,dragOverlay:{node:l,rect:n.dragOverlay.measure(o)},droppableContainers:a,measuringConfiguration:n,transform:d})})}({config:n,draggableNodes:x,droppableContainers:p,measuringConfiguration:X}),E=S?g.setRef:void 0;return k.default.createElement(an,null,k.default.createElement(ar,{animation:M},h&&C?k.default.createElement(ai,{key:C,id:h.id,ref:E,as:o,activatorEvent:u,adjustScale:r,className:c,transition:s,rect:S,style:{zIndex:d,...l},transform:N},a):null))});function au(e,t,r){let a=e.slice();return a.splice(r<0?a.length+r:r,0,a.splice(t,1)[0]),a}function ah(e){return null!==e&&e>=0}let am=e=>{let{rects:t,activeIndex:r,overIndex:a,index:n}=e,l=au(t,a,r),s=t[n],i=l[n];return i&&s?{x:i.left-s.left,y:i.top-s.top,scaleX:i.width/s.width,scaleY:i.height/s.height}:null},af="Sortable",ax=k.default.createContext({activeIndex:-1,containerId:af,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:am,disabled:{draggable:!1,droppable:!1}});function ap(e){let{children:t,id:r,items:a,strategy:n=am,disabled:l=!1}=e,{active:s,dragOverlay:i,droppableRects:o,over:c,measureDroppableContainers:d}=ae(),u=tK(af,r),h=null!==i.rect,m=(0,k.useMemo)(()=>a.map(e=>"object"==typeof e&&"id"in e?e.id:e),[a]),f=null!=s,x=s?m.indexOf(s.id):-1,p=c?m.indexOf(c.id):-1,g=(0,k.useRef)(m),b=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(m,g.current),X=-1!==p&&-1===x||b,y="boolean"==typeof l?{draggable:l,droppable:l}:l;t_(()=>{b&&f&&d(m)},[b,m,f,d]),(0,k.useEffect)(()=>{g.current=m},[m]);let v=(0,k.useMemo)(()=>({activeIndex:x,containerId:u,disabled:y,disableTransforms:X,items:m,overIndex:p,useDragOverlay:h,sortedRects:m.reduce((e,t,r)=>{let a=o.get(t);return a&&(e[r]=a),e},Array(m.length)),strategy:n}),[x,u,y.draggable,y.droppable,X,m,p,o,h,n]);return k.default.createElement(ax.Provider,{value:v},t)}let ag=e=>{let{id:t,items:r,activeIndex:a,overIndex:n}=e;return au(r,a,n).indexOf(t)},ab=e=>{let{containerId:t,isSorting:r,wasDragging:a,index:n,items:l,newIndex:s,previousItems:i,previousContainerId:o,transition:c}=e;return!!c&&!!a&&(i===l||n!==s)&&(!!r||s!==n&&t===o)},aX={duration:200,easing:"ease"},ay="transform",av=tq.Transition.toString({property:ay,duration:0,easing:"linear"}),aw={roleDescription:"sortable"};function aj(e){if(!e)return!1;let t=e.data.current;return!!t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable}let aC=[f.Down,f.Right,f.Up,f.Left],ak=(e,t)=>{let{context:{active:r,collisionRect:a,droppableRects:n,droppableContainers:l,over:s,scrollableAncestors:i}}=t;if(aC.includes(e.code)){if(e.preventDefault(),!r||!a)return;let t=[];l.getEnabled().forEach(r=>{if(!r||null!=r&&r.disabled)return;let l=n.get(r.id);if(l)switch(e.code){case f.Down:a.top<l.top&&t.push(r);break;case f.Up:a.top>l.top&&t.push(r);break;case f.Left:a.left>l.left&&t.push(r);break;case f.Right:a.left<l.left&&t.push(r)}});let d=(e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,n=rt(t),l=[];for(let e of a){let{id:t}=e,a=r.get(t);if(a){let r=rt(a),s=Number((n.reduce((e,t,a)=>e+t7(r[a],t),0)/4).toFixed(4));l.push({id:t,data:{droppableContainer:e,value:s}})}}return l.sort(t9)})({active:r,collisionRect:a,droppableRects:n,droppableContainers:t,pointerCoordinates:null}),u=rr(d,"id");if(u===(null==s?void 0:s.id)&&d.length>1&&(u=d[1].id),null!=u){let e=l.get(r.id),t=l.get(u),s=t?n.get(t.id):null,d=null==t?void 0:t.node.current;if(d&&s&&e&&t){var o,c;let r=rh(d).some((e,t)=>i[t]!==e),n=aN(e,t),l=(o=e,c=t,!!aj(o)&&!!aj(c)&&!!aN(o,c)&&o.data.current.sortable.index<c.data.current.sortable.index),u=r||!n?{x:0,y:0}:{x:l?a.width-s.width:0,y:l?a.height-s.height:0},h={x:s.left,y:s.top};return u.x&&u.y?h:tG(h,u)}}}};function aN(e,t){return!!aj(e)&&!!aj(t)&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}function aS({id:e,character:t,index:r}){let{attributes:a,listeners:n,setNodeRef:l,transform:s,transition:i,isDragging:o}=function(e){var t,r,a,n;let{animateLayoutChanges:l=ab,attributes:s,disabled:i,data:o,getNewIndex:c=ag,id:d,strategy:h,resizeObserverConfig:m,transition:f=aX}=e,{items:x,containerId:p,activeIndex:g,disabled:b,disableTransforms:X,sortedRects:y,overIndex:v,useDragOverlay:w,strategy:j}=(0,k.useContext)(ax),C=(t=i,r=b,"boolean"==typeof t?{draggable:t,droppable:!1}:{draggable:null!=(a=null==t?void 0:t.draggable)?a:r.draggable,droppable:null!=(n=null==t?void 0:t.droppable)?n:r.droppable}),N=x.indexOf(d),S=(0,k.useMemo)(()=>({sortable:{containerId:p,index:N,items:x},...o}),[p,o,N,x]),M=(0,k.useMemo)(()=>x.slice(x.indexOf(d)),[x,d]),{rect:E,node:R,isOver:L,setNodeRef:A}=function(e){let{data:t,disabled:r=!1,id:a,resizeObserverConfig:n}=e,l=tK("Droppable"),{active:s,dispatch:i,over:o,measureDroppableContainers:c}=(0,k.useContext)(r0),d=(0,k.useRef)({disabled:r}),h=(0,k.useRef)(!1),m=(0,k.useRef)(null),f=(0,k.useRef)(null),{disabled:x,updateMeasurementsFor:p,timeout:g}={...at,...n},b=tT(null!=p?p:a),X=r$({callback:(0,k.useCallback)(()=>{if(!h.current){h.current=!0;return}null!=f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{c(Array.isArray(b.current)?b.current:[b.current]),f.current=null},g)},[g]),disabled:x||!s}),[y,v]=tO((0,k.useCallback)((e,t)=>{X&&(t&&(X.unobserve(t),h.current=!1),e&&X.observe(e))},[X])),w=tT(t);return(0,k.useEffect)(()=>{X&&y.current&&(X.disconnect(),h.current=!1,X.observe(y.current))},[y,X]),(0,k.useEffect)(()=>(i({type:u.RegisterDroppable,element:{id:a,key:l,disabled:r,node:y,rect:m,data:w}}),()=>i({type:u.UnregisterDroppable,key:l,id:a})),[a]),(0,k.useEffect)(()=>{r!==d.current.disabled&&(i({type:u.SetDroppableDisabled,id:a,key:l,disabled:r}),d.current.disabled=r)},[a,l,r,i]),{active:s,rect:m,isOver:(null==o?void 0:o.id)===a,node:y,over:o,setNodeRef:v}}({id:d,data:S,disabled:C.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...m}}),{active:D,activatorEvent:I,activeNodeRect:B,attributes:z,setNodeRef:_,listeners:P,isDragging:T,over:$,setActivatorNodeRef:O,transform:F}=function(e){let{id:t,data:r,disabled:a=!1,attributes:n}=e,l=tK("Draggable"),{activators:s,activatorEvent:i,active:o,activeNodeRect:c,ariaDescribedById:d,draggableNodes:u,over:h}=(0,k.useContext)(r0),{role:m=r9,roleDescription:f="draggable",tabIndex:x=0}=null!=n?n:{},p=(null==o?void 0:o.id)===t,g=(0,k.useContext)(p?r8:r7),[b,X]=tO(),[y,v]=tO(),w=(0,k.useMemo)(()=>s.reduce((e,r)=>{let{eventName:a,handler:n}=r;return e[a]=e=>{n(e,t)},e},{}),[s,t]),j=tT(r);return t_(()=>(u.set(t,{id:t,key:l,node:b,activatorNode:y,data:j}),()=>{let e=u.get(t);e&&e.key===l&&u.delete(t)}),[u,t]),{active:o,activatorEvent:i,activeNodeRect:c,attributes:(0,k.useMemo)(()=>({role:m,tabIndex:x,"aria-disabled":a,"aria-pressed":!!p&&m===r9||void 0,"aria-roledescription":f,"aria-describedby":d.draggable}),[a,m,x,p,f,d.draggable]),isDragging:p,listeners:a?void 0:w,node:b,over:h,setNodeRef:X,setActivatorNodeRef:v,transform:g}}({id:d,data:S,attributes:{...aw,...s},disabled:C.draggable}),W=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,k.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(A,_),K=!!D,H=K&&!X&&ah(g)&&ah(v),U=!w&&T,G=U&&H?F:null,V=H?null!=G?G:(null!=h?h:j)({rects:y,activeNodeRect:B,activeIndex:g,overIndex:v,index:N}):null,Y=ah(g)&&ah(v)?c({id:d,items:x,activeIndex:g,overIndex:v}):N,q=null==D?void 0:D.id,J=(0,k.useRef)({activeId:q,items:x,newIndex:Y,containerId:p}),Z=x!==J.current.items,Q=l({active:D,containerId:p,isDragging:T,isSorting:K,id:d,index:N,items:x,newIndex:J.current.newIndex,previousItems:J.current.items,previousContainerId:J.current.containerId,transition:f,wasDragging:null!=J.current.activeId}),ee=function(e){let{disabled:t,index:r,node:a,rect:n}=e,[l,s]=(0,k.useState)(null),i=(0,k.useRef)(r);return t_(()=>{if(!t&&r!==i.current&&a.current){let e=n.current;if(e){let t=rd(a.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&s(r)}}r!==i.current&&(i.current=r)},[t,r,a,n]),(0,k.useEffect)(()=>{l&&s(null)},[l]),l}({disabled:!Q,index:N,node:R,rect:E});return(0,k.useEffect)(()=>{K&&J.current.newIndex!==Y&&(J.current.newIndex=Y),p!==J.current.containerId&&(J.current.containerId=p),x!==J.current.items&&(J.current.items=x)},[K,Y,p,x]),(0,k.useEffect)(()=>{if(q===J.current.activeId)return;if(null!=q&&null==J.current.activeId){J.current.activeId=q;return}let e=setTimeout(()=>{J.current.activeId=q},50);return()=>clearTimeout(e)},[q]),{active:D,activeIndex:g,attributes:z,data:S,rect:E,index:N,newIndex:Y,items:x,isOver:L,isSorting:K,isDragging:T,listeners:P,node:R,overIndex:v,over:$,setNodeRef:W,setActivatorNodeRef:O,setDroppableNodeRef:A,setDraggableNodeRef:_,transform:null!=ee?ee:V,transition:ee||Z&&J.current.newIndex===N?av:(!U||tV(I))&&f&&(K||Q)?tq.Transition.toString({...f,property:ay}):void 0}}({id:e}),c={transform:tq.Transform.toString(s),transition:i};return(0,C.jsxs)("div",{ref:l,style:c,...a,...n,className:`
        p-1.5 rounded border-2 transition-all cursor-grab active:cursor-grabbing
        ${o?"border-retro-cyan bg-retro-cyan/20 opacity-50":"border-retro-grid/30 hover:border-retro-grid/50"}
      `,title:`Character ${r}`,children:[(0,C.jsx)(v.CharacterDisplay,{character:t,mode:"small",smallScale:3}),(0,C.jsx)("div",{className:"text-[8px] text-gray-500 text-center mt-0.5",children:r})]})}function aM({character:e}){return(0,C.jsx)("div",{className:"p-1.5 rounded border-2 border-retro-cyan bg-retro-navy shadow-lg",children:(0,C.jsx)(v.CharacterDisplay,{character:e,mode:"small",smallScale:3})})}function aE({isOpen:e,onClose:t,characters:r,onReorder:a}){let[n,l]=(0,k.useState)([]),[s,i]=(0,k.useState)(null);(0,k.useEffect)(()=>{e&&l([...r])},[e,r]);let o=(0,k.useMemo)(()=>n.map((e,t)=>`char-${t}`),[n]),c=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,k.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(t8(rz,{activationConstraint:{distance:8}}),t8(rL,{coordinateGetter:ak})),d=(0,k.useMemo)(()=>s&&n[parseInt(s.replace("char-",""),10)]||null,[s,n]),u=(0,k.useCallback)(e=>{i(e.active.id)},[]),h=(0,k.useCallback)(e=>{let{active:t,over:r}=e;if(i(null),r&&t.id!==r.id){let e=parseInt(t.id.replace("char-",""),10),a=parseInt(r.id.replace("char-",""),10);l(t=>au(t,e,a))}},[]),m=(0,k.useCallback)(()=>{a(n),t()},[n,a,t]),f=(0,k.useCallback)(e=>{"Escape"===e.key&&t()},[t]),x=(0,k.useMemo)(()=>n.length!==r.length||n.some((e,t)=>e!==r[t]),[n,r]);return e?(0,C.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onKeyDown:f,children:[(0,C.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,C.jsxs)("div",{className:"relative w-full max-w-3xl max-h-[80vh] bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl flex flex-col overflow-hidden",children:[(0,C.jsxs)("div",{className:"flex-shrink-0 p-4 border-b border-retro-grid/30",children:[(0,C.jsx)("h2",{className:"text-lg font-medium text-white",children:"Reorder Characters"}),(0,C.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Drag and drop characters to reorder them"})]}),(0,C.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,C.jsxs)(r6,{sensors:c,collisionDetection:rn,onDragStart:u,onDragEnd:h,children:[(0,C.jsx)(ap,{items:o,strategy:am,children:(0,C.jsx)("div",{className:"grid gap-2 bg-black/30 rounded-lg p-3",style:{gridTemplateColumns:"repeat(auto-fill, minmax(50px, 1fr))"},children:n.map((e,t)=>(0,C.jsx)(aS,{id:o[t],character:e,index:t},o[t]))})}),(0,C.jsx)(ad,{children:d&&(0,C.jsx)(aM,{character:d})})]})}),(0,C.jsxs)("div",{className:"flex-shrink-0 p-4 border-t border-retro-grid/30 flex justify-between",children:[(0,C.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,C.jsx)("button",{onClick:m,disabled:!x,className:"px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply"})]})]})]}):null}e.s(["ReorderModal",()=>aE],55361);let aR=[{label:"0.5x",value:.5},{label:"0.75x",value:.75},{label:"1.5x",value:1.5},{label:"2x",value:2},{label:"3x",value:3},{label:"4x",value:4}],aL=["tl","tc","tr","ml","mc","mr","bl","bc","br"],aA=[{id:"nearest",label:"Nearest Neighbor",description:"Fast, sharp edges"},{id:"threshold",label:"Threshold-based",description:"Smoother, considers pixel coverage"}];function aD({isOpen:e,onClose:t,onScale:r,characters:a,selectedIndices:n,config:l,foregroundColor:s="#ffffff",backgroundColor:i="#000000"}){let[o,c]=(0,k.useState)(2),[d,u]=(0,k.useState)("mc"),[h,m]=(0,k.useState)("nearest"),f=(0,k.useMemo)(()=>Array.from(n).slice(0,16).map(e=>a[e]).filter(e=>void 0!==e),[a,n]),x=(0,k.useMemo)(()=>f.map(e=>ea(e,o,d,h)),[f,o,d,h]),p=Math.max(0,n.size-16),g=(0,k.useCallback)(()=>{r(o,d,h),t()},[o,d,h,r,t]),b=(0,k.useCallback)(e=>{"Escape"===e.key?t():"Enter"===e.key&&g()},[t,g]);if(!e)return null;let X=Math.min(4,f.length);return(0,C.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onKeyDown:b,children:[(0,C.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,C.jsxs)("div",{className:"relative w-full max-w-lg bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl p-6",children:[(0,C.jsx)("h2",{className:"text-lg font-medium text-white mb-4",children:"Scale Characters"}),(0,C.jsx)("div",{className:"mb-6",children:(0,C.jsxs)("div",{className:"flex gap-4",children:[(0,C.jsxs)("div",{className:"flex-1",children:[(0,C.jsx)("label",{className:"block text-xs text-gray-500 mb-2",children:"Before"}),(0,C.jsx)("div",{className:"bg-retro-dark rounded border border-retro-grid/30 p-2 min-h-[80px] flex items-center justify-center",children:(0,C.jsx)("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${X}, ${2*l.width}px)`},children:f.map((e,t)=>(0,C.jsx)(v.CharacterDisplay,{character:e,mode:"small",smallScale:2,foregroundColor:s,backgroundColor:i,interactive:!1},t))})}),p>0&&(0,C.jsxs)("p",{className:"text-[10px] text-gray-500 mt-1 text-center",children:["+",p," more"]})]}),(0,C.jsxs)("div",{className:"flex-1",children:[(0,C.jsx)("label",{className:"block text-xs text-gray-500 mb-2",children:"After"}),(0,C.jsx)("div",{className:"bg-retro-dark rounded border border-retro-grid/30 p-2 min-h-[80px] flex items-center justify-center",children:(0,C.jsx)("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${X}, ${2*l.width}px)`},children:x.map((e,t)=>(0,C.jsx)(v.CharacterDisplay,{character:e,mode:"small",smallScale:2,foregroundColor:s,backgroundColor:i,interactive:!1},t))})}),p>0&&(0,C.jsxs)("p",{className:"text-[10px] text-gray-500 mt-1 text-center",children:["+",p," more"]})]})]})}),(0,C.jsxs)("div",{className:"mb-4",children:[(0,C.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Scale Factor"}),(0,C.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[aR.map(e=>(0,C.jsx)("button",{type:"button",onClick:()=>c(e.value),className:`
                  px-3 py-1.5 text-sm rounded border transition-all
                  ${o===e.value?"border-retro-cyan bg-retro-cyan/20 text-retro-cyan":"border-retro-grid/50 bg-retro-dark text-gray-400 hover:border-retro-grid hover:text-white"}
                `,children:e.label},e.value)),(0,C.jsxs)("div",{className:"flex items-center gap-1.5 ml-2",children:[(0,C.jsx)("span",{className:"text-xs text-gray-500",children:"or"}),(0,C.jsx)("input",{type:"number",min:.1,max:10,step:.1,value:o,onChange:e=>{let t=parseFloat(e.target.value);!isNaN(t)&&t>0&&t<=10&&c(Math.round(100*t)/100)},className:"w-20 px-2 py-1.5 text-sm bg-retro-dark border border-retro-grid/50 rounded text-white text-center focus:outline-none focus:border-retro-cyan"}),(0,C.jsx)("span",{className:"text-xs text-gray-500",children:"x"})]})]})]}),(0,C.jsxs)("div",{className:"mb-4",children:[(0,C.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Anchor Position"}),(0,C.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Select where to anchor content when scaling"}),(0,C.jsx)("div",{className:"grid grid-cols-3 gap-1 w-32 mx-auto",children:aL.map(e=>{let t=d===e;return(0,C.jsx)("button",{type:"button",onClick:()=>u(e),className:`
                    w-10 h-10 rounded border-2 transition-all
                    flex items-center justify-center
                    ${t?"border-retro-cyan bg-retro-cyan/20":"border-retro-grid/50 bg-retro-dark hover:border-retro-grid"}
                  `,title:{tl:"Top Left",tc:"Top Center",tr:"Top Right",ml:"Middle Left",mc:"Middle Center",mr:"Middle Right",bl:"Bottom Left",bc:"Bottom Center",br:"Bottom Right"}[e],children:(0,C.jsx)("div",{className:`
                      w-3 h-3 rounded-sm transition-colors
                      ${t?"bg-retro-cyan":"bg-gray-600"}
                    `})},e)})})]}),(0,C.jsxs)("div",{className:"mb-4",children:[(0,C.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Algorithm"}),(0,C.jsx)("div",{className:"flex gap-2",children:aA.map(e=>(0,C.jsxs)("button",{type:"button",onClick:()=>m(e.id),className:`
                  flex-1 px-3 py-2 text-sm rounded border transition-all text-left
                  ${h===e.id?"border-retro-cyan bg-retro-cyan/20 text-retro-cyan":"border-retro-grid/50 bg-retro-dark text-gray-400 hover:border-retro-grid hover:text-white"}
                `,children:[(0,C.jsx)("div",{className:"font-medium",children:e.label}),(0,C.jsx)("div",{className:"text-xs text-gray-500 mt-0.5",children:e.description})]},e.id))})]}),(0,C.jsx)("p",{className:"text-xs text-gray-500 mb-4 text-center h-4",children:o>1?"Content will be enlarged and clipped to fit":o<1?"Content will be reduced":"No scaling applied"}),(0,C.jsxs)("div",{className:"flex gap-3",children:[(0,C.jsx)("button",{onClick:t,className:"flex-1 px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,C.jsx)("button",{onClick:g,disabled:1===o||o<=0||o>10,className:"flex-1 px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply"})]})]})]})}function aI({currentStep:e,totalSteps:t,labels:r}){return(0,C.jsx)("div",{className:"flex items-center justify-center gap-2 mb-8",children:Array.from({length:t},(a,n)=>{let l=n+1,s=l===e,i=l<e;return(0,C.jsxs)("div",{className:"flex items-center",children:[(0,C.jsx)("div",{className:`
                flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium
                transition-colors
                ${s?"bg-retro-cyan text-retro-dark":i?"bg-retro-cyan/30 text-retro-cyan":"bg-retro-grid/30 text-gray-500"}
              `,children:i?(0,C.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})}):l}),(0,C.jsx)("span",{className:`
                ml-2 text-sm hidden sm:inline
                ${s?"text-retro-cyan":i?"text-gray-400":"text-gray-500"}
              `,children:r[n]}),l<t&&(0,C.jsx)("div",{className:`
                  w-8 sm:w-12 h-0.5 mx-2 sm:mx-4
                  ${i?"bg-retro-cyan/50":"bg-retro-grid/30"}
                `})]},l)})})}e.s(["ScaleModal",()=>aD],48026),e.s(["ImportStepIndicator",()=>aI],63427),e.s([],3813)}]);